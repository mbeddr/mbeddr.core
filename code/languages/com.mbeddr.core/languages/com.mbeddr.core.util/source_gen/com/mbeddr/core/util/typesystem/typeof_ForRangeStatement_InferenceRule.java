package com.mbeddr.core.util.typesystem;

/*Generated by MPS */

import jetbrains.mps.lang.typesystem.runtime.AbstractInferenceRule_Runtime;
import jetbrains.mps.lang.typesystem.runtime.InferenceRule_Runtime;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.typesystem.inference.TypeCheckingContext;
import jetbrains.mps.lang.typesystem.runtime.IsApplicableStatus;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SEnumOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import com.mbeddr.core.expressions.behavior.Expression__BehaviorDescriptor;
import java.math.BigInteger;
import jetbrains.mps.typesystem.inference.EquationInfo;
import com.mbeddr.core.expressions.typesystem.MeetTypeHelper;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SProperty;
import org.jetbrains.mps.openapi.language.SConcept;

public class typeof_ForRangeStatement_InferenceRule extends AbstractInferenceRule_Runtime implements InferenceRule_Runtime {
  public typeof_ForRangeStatement_InferenceRule() {
  }
  public void applyRule(final SNode frs, final TypeCheckingContext typeCheckingContext, IsApplicableStatus status) {
    if ((SLinkOperations.getTarget(frs, LINKS.type$XRy1) == null)) {
      {
        final SNode rt = typeCheckingContext.typeOf(SLinkOperations.getTarget(frs, LINKS.range$7Owi), "r:167d778b-bddc-4b3f-a776-89718ce72b97(com.mbeddr.core.util.typesystem)", "7297559910934427882", true);
        typeCheckingContext.whenConcrete(rt, () -> {
          if (SEnumOperations.isMember(SPropertyOperations.getEnum(frs, PROPS.countBackwards$WyPw), 0x2b85e2bc8d7fc848L) && (boolean) Expression__BehaviorDescriptor.isStaticallyEvaluatable_id3ilck8Kr3zN.invoke(SLinkOperations.getTarget(SLinkOperations.getTarget(frs, LINKS.range$7Owi), LINKS.left$NBgM)) && BigInteger.ZERO.compareTo(((BigInteger) Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(SLinkOperations.getTarget(frs, LINKS.range$7Owi), LINKS.left$NBgM)))) <= 0) {
            {
              SNode _nodeToCheck_1029348928467 = frs;
              EquationInfo _info_12389875345 = new EquationInfo(_nodeToCheck_1029348928467, null, "r:167d778b-bddc-4b3f-a776-89718ce72b97(com.mbeddr.core.util.typesystem)", "6929158439843484269", 0, null);
              typeCheckingContext.createEquation((SNode) typeCheckingContext.typeOf(_nodeToCheck_1029348928467, "r:167d778b-bddc-4b3f-a776-89718ce72b97(com.mbeddr.core.util.typesystem)", "6929158439843478296", true), (SNode) MeetTypeHelper.getConcreteNonConstVolatileUnsignedType(((SNode) typeCheckingContext.getExpandedNode(rt))), _info_12389875345);
            }
          } else {
            {
              SNode _nodeToCheck_1029348928467 = frs;
              EquationInfo _info_12389875345 = new EquationInfo(_nodeToCheck_1029348928467, null, "r:167d778b-bddc-4b3f-a776-89718ce72b97(com.mbeddr.core.util.typesystem)", "7297559910934293199", 0, null);
              typeCheckingContext.createEquation((SNode) typeCheckingContext.typeOf(_nodeToCheck_1029348928467, "r:167d778b-bddc-4b3f-a776-89718ce72b97(com.mbeddr.core.util.typesystem)", "7297559910934293175", true), (SNode) typeCheckingContext.getExpandedNode(rt), _info_12389875345);
            }
          }
        }, "r:167d778b-bddc-4b3f-a776-89718ce72b97(com.mbeddr.core.util.typesystem)", "7297559910934427879", false, false);
      }
    } else {
      {
        SNode _nodeToCheck_1029348928467 = frs;
        EquationInfo _info_12389875345 = new EquationInfo(_nodeToCheck_1029348928467, null, "r:167d778b-bddc-4b3f-a776-89718ce72b97(com.mbeddr.core.util.typesystem)", "9035017168188844656", 0, null);
        typeCheckingContext.createEquation((SNode) typeCheckingContext.typeOf(_nodeToCheck_1029348928467, "r:167d778b-bddc-4b3f-a776-89718ce72b97(com.mbeddr.core.util.typesystem)", "9035017168188844660", true), (SNode) SLinkOperations.getTarget(frs, LINKS.type$XRy1), _info_12389875345);
      }
    }

    {
      final SNode tpe = typeCheckingContext.typeOf(frs, "r:167d778b-bddc-4b3f-a776-89718ce72b97(com.mbeddr.core.util.typesystem)", "9035017168193734283", true);
      typeCheckingContext.whenConcrete(tpe, () -> {
        SNode joinType = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x7a5dda6291404668L, 0xab76d5ed1746f2b2L, 0x1129e737f02L, "jetbrains.mps.lang.typesystem.structure.JoinType"));
        SLinkOperations.addNewChild(joinType, LINKS.argument$Iuyp, CONCEPTS.UnsignedInt64tType$at);
        SLinkOperations.addNewChild(joinType, LINKS.argument$Iuyp, CONCEPTS.Int64tType$UX);
        if (!(typeCheckingContext.isSingleTypeComputation())) {
          {
            SNode _nodeToCheck_1029348928467 = SLinkOperations.getTarget(frs, LINKS.range$7Owi);
            EquationInfo _info_12389875345 = new EquationInfo(_nodeToCheck_1029348928467, "only primitive C99 types allowed", "r:167d778b-bddc-4b3f-a776-89718ce72b97(com.mbeddr.core.util.typesystem)", "9035017168188841918", 0, null);
            typeCheckingContext.createLessThanInequality((SNode) typeCheckingContext.getExpandedNode(tpe), (SNode) joinType, true, true, _info_12389875345);
          }
        }
      }, "r:167d778b-bddc-4b3f-a776-89718ce72b97(com.mbeddr.core.util.typesystem)", "9035017168193733055", false, false);
    }
  }
  public SAbstractConcept getApplicableConcept() {
    return CONCEPTS.ForRangeStatement$vf;
  }
  public IsApplicableStatus isApplicableAndPattern(SNode argument) {
    return new IsApplicableStatus(argument.getConcept().isSubConceptOf(getApplicableConcept()), null);
  }
  public boolean overrides() {
    return false;
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink range$7Owi = MetaAdapterFactory.getContainmentLink(0x2693fc719b0e4b05L, 0xab13f57227d675f2L, 0x79253aa36e2e897cL, 0x79253aa36e2f306cL, "range");
    /*package*/ static final SContainmentLink left$NBgM = MetaAdapterFactory.getContainmentLink(0x2693fc719b0e4b05L, 0xab13f57227d675f2L, 0x578779f4086b789aL, 0x578779f4086b789bL, "left");
    /*package*/ static final SContainmentLink type$XRy1 = MetaAdapterFactory.getContainmentLink(0x2693fc719b0e4b05L, 0xab13f57227d675f2L, 0x79253aa36e2e897cL, 0x7d62d43eb1731afcL, "type");
    /*package*/ static final SContainmentLink argument$Iuyp = MetaAdapterFactory.getContainmentLink(0x7a5dda6291404668L, 0xab76d5ed1746f2b2L, 0x1129e737f02L, 0x1129e73a76aL, "argument");
  }

  private static final class PROPS {
    /*package*/ static final SProperty countBackwards$WyPw = MetaAdapterFactory.getProperty(0x2693fc719b0e4b05L, 0xab13f57227d675f2L, 0x79253aa36e2e897cL, 0x2b85e2bc8d7fc846L, "countBackwards");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept UnsignedInt64tType$at = MetaAdapterFactory.getConcept(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x75739ed9f39e3898L, "com.mbeddr.core.expressions.structure.UnsignedInt64tType");
    /*package*/ static final SConcept Int64tType$UX = MetaAdapterFactory.getConcept(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x75739ed9f39e388dL, "com.mbeddr.core.expressions.structure.Int64tType");
    /*package*/ static final SConcept ForRangeStatement$vf = MetaAdapterFactory.getConcept(0x2693fc719b0e4b05L, 0xab13f57227d675f2L, 0x79253aa36e2e897cL, "com.mbeddr.core.util.structure.ForRangeStatement");
  }
}

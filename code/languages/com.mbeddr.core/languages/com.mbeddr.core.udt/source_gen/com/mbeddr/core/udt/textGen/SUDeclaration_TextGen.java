package com.mbeddr.core.udt.textGen;

/*Generated by MPS */

import jetbrains.mps.text.rt.TextGenDescriptorBase;
import jetbrains.mps.text.rt.TextGenContext;
import jetbrains.mps.text.impl.TextGenSupport;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.Sequence;
import com.mbeddr.core.statements.behavior.IHasPrefixes__BehaviorDescriptor;
import com.mbeddr.core.statements.behavior.Prefix__BehaviorDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import com.mbeddr.core.udt.behavior.SUDeclaration__BehaviorDescriptor;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import java.util.Objects;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SConcept;

public class SUDeclaration_TextGen extends TextGenDescriptorBase {
  @Override
  public void generateText(final TextGenContext ctx) {
    final TextGenSupport tgs = new TextGenSupport(ctx);
    for (SNode p : Sequence.fromIterable(IHasPrefixes__BehaviorDescriptor.beforePrefixes_id8PQYytRYmo.invoke(ctx.getPrimaryInput()))) {
      tgs.append(Prefix__BehaviorDescriptor.beforeText_id8PQYytSnuo.invoke(p));
      tgs.newLine();
    }
    tgs.append(SConceptOperations.conceptAlias(SNodeOperations.getConcept(ctx.getPrimaryInput())));
    tgs.append(" ");
    for (SNode p : Sequence.fromIterable(IHasPrefixes__BehaviorDescriptor.attributePrefixes_id8PQYytVn$K.invoke(ctx.getPrimaryInput()))) {
      tgs.append(Prefix__BehaviorDescriptor.beforeText_id8PQYytSnuo.invoke(p));
      tgs.append(" ");
    }

    tgs.append(SUDeclaration__BehaviorDescriptor.genName_id3W2cV_pfm5c.invoke(ctx.getPrimaryInput()));
    tgs.append(" {");
    tgs.newLine();

    ctx.getBuffer().area().increaseIndent();
    for (SNode m : ListSequence.fromList(SLinkOperations.getChildren(ctx.getPrimaryInput(), LINKS.members$C59R))) {
      tgs.indent();
      tgs.appendNode(m);
    }
    ctx.getBuffer().area().decreaseIndent();
    tgs.indent();
    tgs.append("};");
    for (SNode p : Sequence.fromIterable(IHasPrefixes__BehaviorDescriptor.surroundingPrefixes_id8PQYytSgXH.invoke(ctx.getPrimaryInput()))) {
      tgs.newLine();
      tgs.append(Prefix__BehaviorDescriptor.afterText_id8PQYytSnuO.invoke(p));
    }

    SAbstractConcept cncpt = SNodeOperations.getConcept(ctx.getPrimaryInput());
    boolean noneMatched = true;
    if (noneMatched && SConceptOperations.isSubConceptOf(cncpt, CONCEPTS.StructDeclaration$ox)) {
      noneMatched = false;
      if (!(Objects.equals(SLinkOperations.getTarget(SNodeOperations.as(SLinkOperations.getTarget(SNodeOperations.as(SNodeOperations.getNextSibling(ctx.getPrimaryInput()), CONCEPTS.TypeDef$QP), LINKS.original$$TxO), CONCEPTS.StructType$B3), LINKS.struct$WCsg), ctx.getPrimaryInput()))) {
        tgs.newLine();
      }
    }
    if (noneMatched && SConceptOperations.isSubConceptOf(cncpt, CONCEPTS.UnionDeclaration$pl)) {
      noneMatched = false;
      if (!(Objects.equals(SLinkOperations.getTarget(SNodeOperations.as(SLinkOperations.getTarget(SNodeOperations.as(SNodeOperations.getNextSibling(ctx.getPrimaryInput()), CONCEPTS.TypeDef$QP), LINKS.original$$TxO), CONCEPTS.UnionType$xI), LINKS.union$RA0L), ctx.getPrimaryInput()))) {
        tgs.newLine();
      }
    }
    if (noneMatched) {
      tgs.newLine();
    }
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink members$C59R = MetaAdapterFactory.getContainmentLink(0xefda956e491e4f00L, 0xba1436af2f213ecfL, 0x6285e27d4ff6c9f5L, 0x6285e27d4ff7db92L, "members");
    /*package*/ static final SContainmentLink original$$TxO = MetaAdapterFactory.getContainmentLink(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x6b0ac27ac5014717L, 0x54e261614fd09a16L, "original");
    /*package*/ static final SReferenceLink struct$WCsg = MetaAdapterFactory.getReferenceLink(0xefda956e491e4f00L, 0xba1436af2f213ecfL, 0x58bef62304fc0a38L, 0x58bef62304fc0a39L, "struct");
    /*package*/ static final SReferenceLink union$RA0L = MetaAdapterFactory.getReferenceLink(0xefda956e491e4f00L, 0xba1436af2f213ecfL, 0x51a277741cc58405L, 0x51a277741cc58407L, "union");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept TypeDef$QP = MetaAdapterFactory.getConcept(0xefda956e491e4f00L, 0xba1436af2f213ecfL, 0x54e261614fd09a11L, "com.mbeddr.core.udt.structure.TypeDef");
    /*package*/ static final SConcept StructType$B3 = MetaAdapterFactory.getConcept(0xefda956e491e4f00L, 0xba1436af2f213ecfL, 0x58bef62304fc0a38L, "com.mbeddr.core.udt.structure.StructType");
    /*package*/ static final SConcept StructDeclaration$ox = MetaAdapterFactory.getConcept(0xefda956e491e4f00L, 0xba1436af2f213ecfL, 0x58bef62304fc0a2fL, "com.mbeddr.core.udt.structure.StructDeclaration");
    /*package*/ static final SConcept UnionType$xI = MetaAdapterFactory.getConcept(0xefda956e491e4f00L, 0xba1436af2f213ecfL, 0x51a277741cc58405L, "com.mbeddr.core.udt.structure.UnionType");
    /*package*/ static final SConcept UnionDeclaration$pl = MetaAdapterFactory.getConcept(0xefda956e491e4f00L, 0xba1436af2f213ecfL, 0x51a277741cc5837aL, "com.mbeddr.core.udt.structure.UnionDeclaration");
  }
}

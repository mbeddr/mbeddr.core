package com.mbeddr.core.pointers.editor;

/*Generated by MPS */

import jetbrains.mps.nodeEditor.menus.transformation.TransformationMenuBase;
import jetbrains.mps.lang.editor.menus.EditorMenuDescriptorBase;
import jetbrains.mps.smodel.SNodePointer;
import java.util.List;
import jetbrains.mps.lang.editor.menus.transformation.MenuLocations;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.lang.editor.menus.MenuPart;
import jetbrains.mps.openapi.editor.menus.transformation.TransformationMenuItem;
import jetbrains.mps.openapi.editor.menus.transformation.TransformationMenuContext;
import java.util.ArrayList;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.editor.menus.SingleItemMenuPart;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.lang.editor.menus.transformation.ActionItemBase;
import com.mbeddr.core.pointers.behavior.StringLiteralHelper;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import com.intellij.ide.CopyPasteManagerEx;
import java.awt.datatransfer.StringSelection;
import jetbrains.mps.ide.datatransfer.TextPasteUtil;
import org.jetbrains.mps.openapi.language.SProperty;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public class StringLiteral_TransformationMenu extends TransformationMenuBase {
  public StringLiteral_TransformationMenu() {
    super(false, new EditorMenuDescriptorBase("default transformation menu for " + "StringLiteral", new SNodePointer("r:9a326681-7a8d-435d-989e-2781eecc297d(com.mbeddr.core.pointers.editor)", "2981793776144725275")), List.<String>of(MenuLocations.CONTEXT_ASSISTANT));
  }

  @Override
  @NotNull
  protected List<MenuPart<TransformationMenuItem, TransformationMenuContext>> getParts(TransformationMenuContext _context) {
    List<MenuPart<TransformationMenuItem, TransformationMenuContext>> result = new ArrayList<MenuPart<TransformationMenuItem, TransformationMenuContext>>();
    if (ListSequence.fromListAndArray(new ArrayList<String>(), MenuLocations.CONTEXT_ASSISTANT).contains(_context.getMenuLocation())) {
      result.add(new TMP_Action_pibsys_a0());
      result.add(new TMP_Action_pibsys_b0());
      result.add(new TMP_Action_pibsys_c0());
    }
    return result;
  }

  private class TMP_Action_pibsys_a0 extends SingleItemMenuPart<TransformationMenuItem, TransformationMenuContext> {
    @Nullable
    protected TransformationMenuItem createItem(TransformationMenuContext context) {
      return new Item(context).resetTraceInfo();
    }

    private class Item extends ActionItemBase {
      /*package*/ Item(TransformationMenuContext context) {
        super(context);
      }
      /*package*/ Item resetTraceInfo() {
        updateTraceInfo("single item: " + getLabelText(""), new SNodePointer("r:9a326681-7a8d-435d-989e-2781eecc297d(com.mbeddr.core.pointers.editor)", "2981793776150921401"));
        return this;
      }
      @Nullable
      @Override
      public String getLabelText(String pattern) {
        return "Smart copy";
      }

      @Override
      public void execute(@NotNull String pattern) {
        String text = StringLiteralHelper.unescape(SPropertyOperations.getString(_context.getNode(), PROPS.value$a7Yf));
        CopyPasteManagerEx.getInstanceEx().setContents(new StringSelection(text));
      }



    }
  }
  private class TMP_Action_pibsys_b0 extends SingleItemMenuPart<TransformationMenuItem, TransformationMenuContext> {
    @Nullable
    protected TransformationMenuItem createItem(TransformationMenuContext context) {
      return new Item(context).resetTraceInfo();
    }

    private class Item extends ActionItemBase {
      /*package*/ Item(TransformationMenuContext context) {
        super(context);
      }
      /*package*/ Item resetTraceInfo() {
        updateTraceInfo("single item: " + getLabelText(""), new SNodePointer("r:9a326681-7a8d-435d-989e-2781eecc297d(com.mbeddr.core.pointers.editor)", "2981793776144725283"));
        return this;
      }
      @Nullable
      @Override
      public String getLabelText(String pattern) {
        return "Smart paste";
      }

      @Override
      public void execute(@NotNull String pattern) {
        String text = TextPasteUtil.getStringFromClipboard();
        SPropertyOperations.assign(_context.getNode(), PROPS.value$a7Yf, StringLiteralHelper.escape(text));
      }

      @Override
      public boolean canExecute(@NotNull String pattern) {
        return TextPasteUtil.hasStringInClipboard();
      }


    }
  }
  private class TMP_Action_pibsys_c0 extends SingleItemMenuPart<TransformationMenuItem, TransformationMenuContext> {
    @Nullable
    protected TransformationMenuItem createItem(TransformationMenuContext context) {
      return new Item(context).resetTraceInfo();
    }

    private class Item extends ActionItemBase {
      /*package*/ Item(TransformationMenuContext context) {
        super(context);
      }
      /*package*/ Item resetTraceInfo() {
        updateTraceInfo("single item: " + getLabelText(""), new SNodePointer("r:9a326681-7a8d-435d-989e-2781eecc297d(com.mbeddr.core.pointers.editor)", "8475291993305725711"));
        return this;
      }
      @Nullable
      @Override
      public String getLabelText(String pattern) {
        return "Strip formatting";
      }

      @Override
      public void execute(@NotNull String pattern) {
        SPropertyOperations.assign(_context.getNode(), PROPS.value$a7Yf, StringLiteralHelper.stripFormatting(SPropertyOperations.getString(_context.getNode(), PROPS.value$a7Yf)));
      }



    }
  }

  private static final class PROPS {
    /*package*/ static final SProperty value$a7Yf = MetaAdapterFactory.getProperty(0x3bf5377ae9044dedL, 0x97545a516023bfaaL, 0x54d65a836190f177L, 0x54d65a836190f17aL, "value");
  }
}

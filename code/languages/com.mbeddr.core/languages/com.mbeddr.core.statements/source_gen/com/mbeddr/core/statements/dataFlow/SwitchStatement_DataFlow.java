package com.mbeddr.core.statements.dataFlow;

/*Generated by MPS */

import jetbrains.mps.lang.dataFlow.DataFlowBuilder;
import jetbrains.mps.lang.dataFlow.DataFlowBuilderContext;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import com.mbeddr.core.expressions.behavior.Expression__BehaviorDescriptor;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SConcept;

public class SwitchStatement_DataFlow extends DataFlowBuilder {
  public void build(final DataFlowBuilderContext _context) {
    _context.getBuilder().build((SNode) SLinkOperations.getTarget(_context.getNode(), LINKS.expression$QVUr));
    if ((boolean) Expression__BehaviorDescriptor.isStaticallyEvaluatable_id3ilck8Kr3zN.invoke(SLinkOperations.getTarget(_context.getNode(), LINKS.expression$QVUr))) {
      Object expressionResult = Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(_context.getNode(), LINKS.expression$QVUr));

      for (int i = 0; i < ListSequence.fromList(SLinkOperations.getChildren(_context.getNode(), LINKS.cases$RiEW)).count(); i++) {
        SNode switchCase = (SNode) SLinkOperations.getChildren(_context.getNode(), LINKS.cases$RiEW).get(i);

        if (SNodeOperations.isInstanceOf(switchCase, CONCEPTS.SwitchCase$tY)) {
          Object caseResult = Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(((SNode) switchCase), LINKS.expression$QWSr));
          if (i < SLinkOperations.getChildren(_context.getNode(), LINKS.cases$RiEW).size() - 1) {
            if (caseResult.equals(expressionResult)) {
              _context.getBuilder().emitJump(_context.getBuilder().before(switchCase), "r:25b82005-e10a-44f3-8ec9-44bc58837757(com.mbeddr.core.statements.dataFlow)/5781444008245313837");
            }
          }

        } else if (SNodeOperations.isInstanceOf(switchCase, CONCEPTS.SwitchDefault$D7)) {
          _context.getBuilder().emitJump(_context.getBuilder().before(switchCase), "r:25b82005-e10a-44f3-8ec9-44bc58837757(com.mbeddr.core.statements.dataFlow)/5781444008245313891");
        } else {
          _context.getBuilder().emitIfJump(_context.getBuilder().before(switchCase), "r:25b82005-e10a-44f3-8ec9-44bc58837757(com.mbeddr.core.statements.dataFlow)/5781444008245313896");
          _context.getBuilder().emitJump(_context.getBuilder().after(_context.getNode()), "r:25b82005-e10a-44f3-8ec9-44bc58837757(com.mbeddr.core.statements.dataFlow)/5781444008245313899");
        }

      }
      for (SNode switchCase : SLinkOperations.getChildren(_context.getNode(), LINKS.cases$RiEW)) {
        _context.getBuilder().build((SNode) switchCase);
      }
    } else {
      for (int i = 0; i < ListSequence.fromList(SLinkOperations.getChildren(_context.getNode(), LINKS.cases$RiEW)).count(); i++) {
        SNode switchCase = (SNode) SLinkOperations.getChildren(_context.getNode(), LINKS.cases$RiEW).get(i);

        if (i < SLinkOperations.getChildren(_context.getNode(), LINKS.cases$RiEW).size() - 1) {
          _context.getBuilder().emitIfJump(_context.getBuilder().before(switchCase), "r:25b82005-e10a-44f3-8ec9-44bc58837757(com.mbeddr.core.statements.dataFlow)/5781444008245313672");
        } else if (SNodeOperations.isInstanceOf(switchCase, CONCEPTS.SwitchDefault$D7)) {
          _context.getBuilder().emitJump(_context.getBuilder().before(switchCase), "r:25b82005-e10a-44f3-8ec9-44bc58837757(com.mbeddr.core.statements.dataFlow)/5781444008245313690");
        } else {
          _context.getBuilder().emitIfJump(_context.getBuilder().before(switchCase), "r:25b82005-e10a-44f3-8ec9-44bc58837757(com.mbeddr.core.statements.dataFlow)/5781444008245313695");
          _context.getBuilder().emitJump(_context.getBuilder().after(_context.getNode()), "r:25b82005-e10a-44f3-8ec9-44bc58837757(com.mbeddr.core.statements.dataFlow)/5781444008245313698");
        }
      }
      for (SNode switchCase : SLinkOperations.getChildren(_context.getNode(), LINKS.cases$RiEW)) {
        _context.getBuilder().build((SNode) switchCase);
      }
    }
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink expression$QVUr = MetaAdapterFactory.getContainmentLink(0xa9d696470840491eL, 0xbf392eb0805d2011L, 0x2b8026b23bc2d9fcL, 0x2b8026b23bc2d9fdL, "expression");
    /*package*/ static final SContainmentLink cases$RiEW = MetaAdapterFactory.getContainmentLink(0xa9d696470840491eL, 0xbf392eb0805d2011L, 0x2b8026b23bc2d9fcL, 0x2b8026b23bc2da1fL, "cases");
    /*package*/ static final SContainmentLink expression$QWSr = MetaAdapterFactory.getContainmentLink(0xa9d696470840491eL, 0xbf392eb0805d2011L, 0x2b8026b23bc2da00L, 0x2b8026b23bc2da01L, "expression");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept SwitchCase$tY = MetaAdapterFactory.getConcept(0xa9d696470840491eL, 0xbf392eb0805d2011L, 0x2b8026b23bc2da00L, "com.mbeddr.core.statements.structure.SwitchCase");
    /*package*/ static final SConcept SwitchDefault$D7 = MetaAdapterFactory.getConcept(0xa9d696470840491eL, 0xbf392eb0805d2011L, 0x2b8026b23bc2da02L, "com.mbeddr.core.statements.structure.SwitchDefault");
  }
}

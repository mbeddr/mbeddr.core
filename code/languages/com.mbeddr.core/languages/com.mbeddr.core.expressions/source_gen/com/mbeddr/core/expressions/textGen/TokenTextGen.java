package com.mbeddr.core.expressions.textGen;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.text.rt.TextGenContext;
import jetbrains.mps.text.impl.TextGenSupport;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import com.mbeddr.core.expressions.runtime.plugin.IToken;
import com.mbeddr.core.expressions.behavior.ITextGenContext__BehaviorDescriptor;
import com.mbeddr.core.expressions.runtime.plugin.AtomicToken;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public abstract class TokenTextGen {
  public static void genTypeWithName(SNode type, String name, final TextGenContext ctx) {
    final TextGenSupport tgs = new TextGenSupport(ctx);
    TokenTextGen.gen(type, name, ctx);
  }
  public static void genType(SNode type, final TextGenContext ctx) {
    final TextGenSupport tgs = new TextGenSupport(ctx);
    TokenTextGen.gen(type, "", ctx);
  }
  public static void genExpression(SNode expr, final TextGenContext ctx) {
    final TextGenSupport tgs = new TextGenSupport(ctx);
    TokenTextGen.gen(expr, "", ctx);
  }
  protected static void gen(SNode node, String name, final TextGenContext ctx) {
    final TextGenSupport tgs = new TextGenSupport(ctx);
    if (SNodeOperations.isInstanceOf(node, CONCEPTS.ITextGenContext$$4)) {
      IToken token = ITextGenContext__BehaviorDescriptor.getToken_id6AaN29SvfIf.invoke(((SNode) node), new AtomicToken(name));
      if (token != null) {
        for (Object value : token.gen()) {
          if (value instanceof String) {
            tgs.append(((String) value));
          } else if (value instanceof SNode) {
            tgs.appendNode(((SNode) value));
          } else {
            tgs.append("Unexpected token in token stream: " + value.getClass().getName() + "!");
          }
        }
        return;
      }
    }
    tgs.append("Invalid input node! (TokenTextGen.gen)");
  }

  private static final class CONCEPTS {
    /*package*/ static final SInterfaceConcept ITextGenContext$$4 = MetaAdapterFactory.getInterfaceConcept(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x698acc22787cfb8bL, "com.mbeddr.core.expressions.structure.ITextGenContext");
  }
}

package com.mbeddr.core.expressions.typesystem;

/*Generated by MPS */

import jetbrains.mps.lang.typesystem.runtime.AbstractNonTypesystemRule_Runtime;
import jetbrains.mps.lang.typesystem.runtime.NonTypesystemRule_Runtime;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.typesystem.inference.TypeCheckingContext;
import jetbrains.mps.lang.typesystem.runtime.IsApplicableStatus;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.errors.messageTargets.MessageTarget;
import jetbrains.mps.errors.messageTargets.NodeMessageTarget;
import jetbrains.mps.errors.IErrorReporter;
import jetbrains.mps.errors.BaseQuickFixProvider;
import com.mbeddr.core.expressions.behavior.Expression__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SConcept;

public class check_TypeSizeConfiguration_NonTypesystemRule extends AbstractNonTypesystemRule_Runtime implements NonTypesystemRule_Runtime {
  public check_TypeSizeConfiguration_NonTypesystemRule() {
  }
  public void applyRule(final SNode tsc, final TypeCheckingContext typeCheckingContext, IsApplicableStatus status) {
    if ((SLinkOperations.getTarget(tsc, LINKS.minFloatValue$OwpR) == null) || (SLinkOperations.getTarget(tsc, LINKS.maxFloatValue$DQPu) == null) || (SLinkOperations.getTarget(tsc, LINKS.minDoubleValue$ODMv) == null) || (SLinkOperations.getTarget(tsc, LINKS.maxDoubleValue$Oyx0) == null)) {
      {
        final MessageTarget errorTarget = new NodeMessageTarget();
        IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(tsc, "min and max values for float and double should be set", "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "6658270785808284428", null, errorTarget);
        {
          BaseQuickFixProvider intentionProvider = new BaseQuickFixProvider("com.mbeddr.core.expressions.typesystem.addMissingMinAndMaxValues_QuickFix", "6658270785808362250", true);
          intentionProvider.putArgument("tsc", tsc);
          _reporter_2309309498.addIntentionProvider(intentionProvider);
        }
      }
    }

    boolean isMinFloatStatic = (boolean) Expression__BehaviorDescriptor.isStaticallyEvaluatable_id3ilck8Kr3zN.invoke(SLinkOperations.getTarget(tsc, LINKS.minFloatValue$OwpR));
    if ((SLinkOperations.getTarget(tsc, LINKS.minFloatValue$OwpR) != null) && !(isMinFloatStatic)) {
      {
        final MessageTarget errorTarget = new NodeMessageTarget();
        IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(SLinkOperations.getTarget(tsc, LINKS.minFloatValue$OwpR), "must be statically evaluatable", "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "6658270785806324966", null, errorTarget);
      }
    }
    boolean isMaxFloatStatic = (boolean) Expression__BehaviorDescriptor.isStaticallyEvaluatable_id3ilck8Kr3zN.invoke(SLinkOperations.getTarget(tsc, LINKS.maxFloatValue$DQPu));
    if ((SLinkOperations.getTarget(tsc, LINKS.maxFloatValue$DQPu) != null) && !(isMaxFloatStatic)) {
      {
        final MessageTarget errorTarget = new NodeMessageTarget();
        IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(SLinkOperations.getTarget(tsc, LINKS.maxFloatValue$DQPu), "must be statically evaluatable", "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "6658270785807233947", null, errorTarget);
      }
    }

    if (isMinFloatStatic && isMaxFloatStatic) {
      if (!(((Number) Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(tsc, LINKS.minFloatValue$OwpR))).doubleValue() < ((Number) Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(tsc, LINKS.maxFloatValue$DQPu))).doubleValue())) {
        final MessageTarget errorTarget = new NodeMessageTarget();
        IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(SLinkOperations.getTarget(tsc, LINKS.minFloatValue$OwpR), "float min must be less than float max", "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "6658270785789186082", null, errorTarget);
      }
    }


    boolean isMinDoubleStatic = (boolean) Expression__BehaviorDescriptor.isStaticallyEvaluatable_id3ilck8Kr3zN.invoke(SLinkOperations.getTarget(tsc, LINKS.minDoubleValue$ODMv));
    if ((SLinkOperations.getTarget(tsc, LINKS.minDoubleValue$ODMv) != null) && !(isMinDoubleStatic)) {
      {
        final MessageTarget errorTarget = new NodeMessageTarget();
        IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(SLinkOperations.getTarget(tsc, LINKS.minDoubleValue$ODMv), "must be statically evaluatable", "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "6658270785807263262", null, errorTarget);
      }
    }

    boolean isMaxDoubleStatic = (boolean) Expression__BehaviorDescriptor.isStaticallyEvaluatable_id3ilck8Kr3zN.invoke(SLinkOperations.getTarget(tsc, LINKS.maxDoubleValue$Oyx0));
    if ((SLinkOperations.getTarget(tsc, LINKS.maxDoubleValue$Oyx0) != null) && !(isMaxDoubleStatic)) {
      {
        final MessageTarget errorTarget = new NodeMessageTarget();
        IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(SLinkOperations.getTarget(tsc, LINKS.maxDoubleValue$Oyx0), "must be statically evaluatable", "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "6658270785807300387", null, errorTarget);
      }
    }

    if (isMinDoubleStatic && isMaxDoubleStatic) {
      if (!(((Number) Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(tsc, LINKS.minDoubleValue$ODMv))).doubleValue() < ((Number) Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(tsc, LINKS.maxDoubleValue$Oyx0))).doubleValue())) {
        final MessageTarget errorTarget = new NodeMessageTarget();
        IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(SLinkOperations.getTarget(tsc, LINKS.minDoubleValue$ODMv), "double min must be less than double max", "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "6658270785789248873", null, errorTarget);
      }
    }

    if (isMinFloatStatic && isMinDoubleStatic) {
      if (!(((Number) Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(tsc, LINKS.minFloatValue$OwpR))).doubleValue() >= ((Number) Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(tsc, LINKS.minDoubleValue$ODMv))).doubleValue())) {
        final MessageTarget errorTarget = new NodeMessageTarget();
        IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(SLinkOperations.getTarget(tsc, LINKS.minFloatValue$OwpR), "double min must be less than float max", "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "6658270785789290984", null, errorTarget);
      }
    }

    if (isMaxFloatStatic && isMaxDoubleStatic) {
      if (!(((Number) Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(tsc, LINKS.maxFloatValue$DQPu))).doubleValue() <= ((Number) Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(tsc, LINKS.maxDoubleValue$Oyx0))).doubleValue())) {
        final MessageTarget errorTarget = new NodeMessageTarget();
        IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(SLinkOperations.getTarget(tsc, LINKS.maxFloatValue$DQPu), "float max must be less than double max", "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "6658270785789301679", null, errorTarget);
      }
    }


  }
  public SAbstractConcept getApplicableConcept() {
    return CONCEPTS.TypeSizeConfiguration$OP;
  }
  public IsApplicableStatus isApplicableAndPattern(SNode argument) {
    return new IsApplicableStatus(argument.getConcept().isSubConceptOf(getApplicableConcept()), null);
  }
  public boolean overrides() {
    return false;
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink minFloatValue$OwpR = MetaAdapterFactory.getContainmentLink(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x2e4bd40f1cbdfd34L, 0x5c66ee00ad4d945aL, "minFloatValue");
    /*package*/ static final SContainmentLink maxFloatValue$DQPu = MetaAdapterFactory.getContainmentLink(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x2e4bd40f1cbdfd34L, 0x5c66ee00ad4d932dL, "maxFloatValue");
    /*package*/ static final SContainmentLink minDoubleValue$ODMv = MetaAdapterFactory.getContainmentLink(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x2e4bd40f1cbdfd34L, 0x5c66ee00ad4d946dL, "minDoubleValue");
    /*package*/ static final SContainmentLink maxDoubleValue$Oyx0 = MetaAdapterFactory.getContainmentLink(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x2e4bd40f1cbdfd34L, 0x5c66ee00ad4d9463L, "maxDoubleValue");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept TypeSizeConfiguration$OP = MetaAdapterFactory.getConcept(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x2e4bd40f1cbdfd34L, "com.mbeddr.core.expressions.structure.TypeSizeConfiguration");
  }
}

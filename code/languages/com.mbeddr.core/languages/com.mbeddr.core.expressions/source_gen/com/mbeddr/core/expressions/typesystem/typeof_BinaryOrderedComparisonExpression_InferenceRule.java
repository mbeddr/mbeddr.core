package com.mbeddr.core.expressions.typesystem;

/*Generated by MPS */

import jetbrains.mps.lang.typesystem.runtime.AbstractInferenceRule_Runtime;
import jetbrains.mps.lang.typesystem.runtime.InferenceRule_Runtime;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.typesystem.inference.TypeCheckingContext;
import jetbrains.mps.lang.typesystem.runtime.IsApplicableStatus;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.errors.messageTargets.MessageTarget;
import jetbrains.mps.errors.messageTargets.NodeMessageTarget;
import jetbrains.mps.errors.IErrorReporter;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import jetbrains.mps.typesystem.inference.EquationInfo;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SProperty;

public class typeof_BinaryOrderedComparisonExpression_InferenceRule extends AbstractInferenceRule_Runtime implements InferenceRule_Runtime {
  public typeof_BinaryOrderedComparisonExpression_InferenceRule() {
  }
  public void applyRule(final SNode boce, final TypeCheckingContext typeCheckingContext, IsApplicableStatus status) {
    {
      final SNode lt = typeCheckingContext.typeOf(SLinkOperations.getTarget(boce, LINKS.left$SkXz), "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "4006257212296688425", true);
      typeCheckingContext.whenConcrete(lt, () -> {
        {
          final SNode rt = typeCheckingContext.typeOf(SLinkOperations.getTarget(boce, LINKS.right$Slc$), "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "4006257212296688442", true);
          typeCheckingContext.whenConcrete(rt, () -> {
            if (!(SNodeOperations.isInstanceOf(typeCheckingContext.getExpandedNode(lt), CONCEPTS.IOrdered$CJ)) && !(SNodeOperations.isInstanceOf(typeCheckingContext.getExpandedNode(lt), CONCEPTS.MeetType$ZG) && (ListSequence.fromList(SLinkOperations.getChildren(SNodeOperations.cast(typeCheckingContext.getExpandedNode(lt), CONCEPTS.MeetType$ZG), LINKS.argument$r2cT)).findFirst((it) -> SNodeOperations.isInstanceOf(it, CONCEPTS.IOrdered$CJ)) != null))) {
              {
                final MessageTarget errorTarget = new NodeMessageTarget();
                IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(boce, "left type not ordered", "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "1762375172531556559", null, errorTarget);
              }
            }
            if (!(SNodeOperations.isInstanceOf(typeCheckingContext.getExpandedNode(rt), CONCEPTS.IOrdered$CJ)) && !(SNodeOperations.isInstanceOf(typeCheckingContext.getExpandedNode(rt), CONCEPTS.MeetType$ZG) && (ListSequence.fromList(SLinkOperations.getChildren(SNodeOperations.cast(typeCheckingContext.getExpandedNode(rt), CONCEPTS.MeetType$ZG), LINKS.argument$r2cT)).findFirst(new _FunctionTypes._return_P1_E0<Boolean, SNode>() {
              public Boolean invoke(SNode rt) {
                return SNodeOperations.isInstanceOf(rt, CONCEPTS.IOrdered$CJ);
              }
            }) != null)) && !(SNodeOperations.isInstanceOf(typeCheckingContext.getExpandedNode(rt), CONCEPTS.JoinType$re) && (ListSequence.fromList(SLinkOperations.getChildren(SNodeOperations.cast(typeCheckingContext.getExpandedNode(rt), CONCEPTS.JoinType$re), LINKS.argument$Iuyp)).findFirst(new _FunctionTypes._return_P1_E0<Boolean, SNode>() {
              public Boolean invoke(SNode rt) {
                return SNodeOperations.isInstanceOf(rt, CONCEPTS.IOrdered$CJ);
              }
            }) != null))) {
              {
                final MessageTarget errorTarget = new NodeMessageTarget();
                IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(boce, "right type not ordered", "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "1762375172531556623", null, errorTarget);
              }
            }
            {
              SNode _nodeToCheck_1029348928467 = boce;
              EquationInfo _info_12389875345 = new EquationInfo(_nodeToCheck_1029348928467, null, "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "4006257212296601191", 0, null);
              typeCheckingContext.createComparableEquation((SNode) typeCheckingContext.typeOf(SLinkOperations.getTarget(boce, LINKS.left$SkXz), "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "4006257212296601193", true), (SNode) typeCheckingContext.typeOf(SLinkOperations.getTarget(boce, LINKS.right$Slc$), "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "4006257212296601199", true), false, _info_12389875345);
            }
            SNode bt = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x7af69e2e83a1ba3aL, "com.mbeddr.core.expressions.structure.BooleanType"));
            SPropertyOperations.assign(bt, PROPS.const$VWr7, true);
            {
              SNode _nodeToCheck_1029348928467 = boce;
              EquationInfo _info_12389875345 = new EquationInfo(_nodeToCheck_1029348928467, null, "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "4006257212296554273", 0, null);
              typeCheckingContext.createEquation((SNode) typeCheckingContext.typeOf(_nodeToCheck_1029348928467, "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "4006257212296554278", true), (SNode) bt, _info_12389875345);
            }
          }, "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "4006257212296688439", false, false);
        }
      }, "r:1f4b6c73-0d50-4599-bc8a-9f6948adf243(com.mbeddr.core.expressions.typesystem)", "4006257212296688422", false, false);
    }
  }
  public SAbstractConcept getApplicableConcept() {
    return CONCEPTS.BinaryOrderedComparisonExpression$ib;
  }
  public IsApplicableStatus isApplicableAndPattern(SNode argument) {
    return new IsApplicableStatus(argument.getConcept().isSubConceptOf(getApplicableConcept()), null);
  }
  public boolean overrides() {
    return true;
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink left$SkXz = MetaAdapterFactory.getContainmentLink(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x7af69e2e83a1ba34L, 0x7af69e2e83a1ba40L, "left");
    /*package*/ static final SContainmentLink right$Slc$ = MetaAdapterFactory.getContainmentLink(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x7af69e2e83a1ba34L, 0x7af69e2e83a1ba41L, "right");
    /*package*/ static final SContainmentLink argument$r2cT = MetaAdapterFactory.getContainmentLink(0x7a5dda6291404668L, 0xab76d5ed1746f2b2L, 0x114b68ad132L, 0x114b68b040bL, "argument");
    /*package*/ static final SContainmentLink argument$Iuyp = MetaAdapterFactory.getContainmentLink(0x7a5dda6291404668L, 0xab76d5ed1746f2b2L, 0x1129e737f02L, 0x1129e73a76aL, "argument");
  }

  private static final class CONCEPTS {
    /*package*/ static final SInterfaceConcept IOrdered$CJ = MetaAdapterFactory.getInterfaceConcept(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x4ffba68fe82a4861L, "com.mbeddr.core.expressions.structure.IOrdered");
    /*package*/ static final SConcept MeetType$ZG = MetaAdapterFactory.getConcept(0x7a5dda6291404668L, 0xab76d5ed1746f2b2L, 0x114b68ad132L, "jetbrains.mps.lang.typesystem.structure.MeetType");
    /*package*/ static final SConcept JoinType$re = MetaAdapterFactory.getConcept(0x7a5dda6291404668L, 0xab76d5ed1746f2b2L, 0x1129e737f02L, "jetbrains.mps.lang.typesystem.structure.JoinType");
    /*package*/ static final SConcept BinaryOrderedComparisonExpression$ib = MetaAdapterFactory.getConcept(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x187536e1c7b61d87L, "com.mbeddr.core.expressions.structure.BinaryOrderedComparisonExpression");
  }

  private static final class PROPS {
    /*package*/ static final SProperty const$VWr7 = MetaAdapterFactory.getProperty(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x7af69e2e83a1ba36L, 0x28d183d9a4cc7da8L, "const");
  }
}

package com.mbeddr.core.buildconfig.scripts;

/*Generated by MPS */

import jetbrains.mps.lang.script.runtime.BaseMigrationScript;
import jetbrains.mps.lang.script.runtime.AbstractMigrationRefactoring;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import org.jetbrains.annotations.Nullable;
import org.jetbrains.mps.openapi.model.SNodeReference;
import org.jetbrains.mps.openapi.persistence.PersistenceFacade;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SProperty;

public final class addDefaultToolPathsToAllDesktopBuildSystems_MigrationScript extends BaseMigrationScript {
  public addDefaultToolPathsToAllDesktopBuildSystems_MigrationScript() {
    super("MBEDDR: Add default tool paths to all desktop build systems");
    this.addRefactoring(new AbstractMigrationRefactoring() {
      @Override
      public String getName() {
        return "Add -g";
      }
      @Override
      public String getAdditionalInfo() {
        return "Add -g";
      }
      @Override
      public SAbstractConcept getApplicableConcept() {
        return CONCEPTS.DesktopPlatform$p7;
      }
      @Override
      public boolean isApplicableInstanceNode(SNode node) {
        return isEmptyString(SPropertyOperations.getString(node, PROPS.make$cWZW)) || isEmptyString(SPropertyOperations.getString(node, PROPS.gdb$c8Uu)) || isEmptyString(SPropertyOperations.getString(node, PROPS.cCompiler$f7vk));
      }
      @Override
      public void doUpdateInstanceNode(SNode node) {
        if (isEmptyString(SPropertyOperations.getString(node, PROPS.make$cWZW))) {
          SPropertyOperations.assign(node, PROPS.make$cWZW, "make");
        }
        if (isEmptyString(SPropertyOperations.getString(node, PROPS.gdb$c8Uu))) {
          SPropertyOperations.assign(node, PROPS.gdb$c8Uu, "gdb");
        }
        if (isEmptyString(SPropertyOperations.getString(node, PROPS.cCompiler$f7vk))) {
          SPropertyOperations.assign(node, PROPS.make$cWZW, "gcc");
        }
      }
      @Override
      public boolean isShowAsIntention() {
        return false;
      }
    });
  }

  @Nullable
  @Override
  public SNodeReference getScriptNode() {
    return PersistenceFacade.getInstance().createNodeReference("r:27b1ee56-a0bc-4e36-85b1-31d7d9fa2d5f(com.mbeddr.core.buildconfig.scripts)/3963667026133540954");
  }
  private static boolean isEmptyString(String str) {
    return str == null || str.isEmpty();
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept DesktopPlatform$p7 = MetaAdapterFactory.getConcept(0x2d7fadf533f64e80L, 0xa78f0f739add2bdeL, 0x49e1b9dfef12762eL, "com.mbeddr.core.buildconfig.structure.DesktopPlatform");
  }

  private static final class PROPS {
    /*package*/ static final SProperty cCompiler$f7vk = MetaAdapterFactory.getProperty(0x2d7fadf533f64e80L, 0xa78f0f739add2bdeL, 0x49e1b9dfef12762eL, 0x49e1b9dfef127630L, "cCompiler");
    /*package*/ static final SProperty make$cWZW = MetaAdapterFactory.getProperty(0x2d7fadf533f64e80L, 0xa78f0f739add2bdeL, 0x49e1b9dfef12762eL, 0x3701c628ec22ce74L, "make");
    /*package*/ static final SProperty gdb$c8Uu = MetaAdapterFactory.getProperty(0x2d7fadf533f64e80L, 0xa78f0f739add2bdeL, 0x49e1b9dfef12762eL, 0x3701c628ec22ce29L, "gdb");
  }
}

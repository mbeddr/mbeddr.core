package com.mbeddr.core.buildconfig.scripts;

/*Generated by MPS */

import jetbrains.mps.lang.script.runtime.BaseMigrationScript;
import jetbrains.mps.lang.script.runtime.AbstractMigrationRefactoring;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import org.jetbrains.annotations.Nullable;
import org.jetbrains.mps.openapi.model.SNodeReference;
import org.jetbrains.mps.openapi.persistence.PersistenceFacade;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SProperty;

public final class addDebugOptionToAllDesktopBuildSystems_MigrationScript extends BaseMigrationScript {
  public addDebugOptionToAllDesktopBuildSystems_MigrationScript() {
    super("MBEDDR: Add -g as debug option to all desktop build systems");
    this.addRefactoring(new AbstractMigrationRefactoring() {
      @Override
      public String getName() {
        return "Add -g";
      }
      @Override
      public String getAdditionalInfo() {
        return "Add -g";
      }
      @Override
      public SAbstractConcept getApplicableConcept() {
        return CONCEPTS.DesktopPlatform$p7;
      }
      @Override
      public boolean isApplicableInstanceNode(SNode node) {
        return isEmptyString(SPropertyOperations.getString(node, PROPS.debugOptions$EfxN));
      }
      @Override
      public void doUpdateInstanceNode(SNode node) {
        SPropertyOperations.assign(node, PROPS.debugOptions$EfxN, "-g");
      }
      @Override
      public boolean isShowAsIntention() {
        return false;
      }
    });
  }

  @Nullable
  @Override
  public SNodeReference getScriptNode() {
    return PersistenceFacade.getInstance().createNodeReference("r:27b1ee56-a0bc-4e36-85b1-31d7d9fa2d5f(com.mbeddr.core.buildconfig.scripts)/2736179788492057715");
  }
  private static boolean isEmptyString(String str) {
    return str == null || str.isEmpty();
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept DesktopPlatform$p7 = MetaAdapterFactory.getConcept(0x2d7fadf533f64e80L, 0xa78f0f739add2bdeL, 0x49e1b9dfef12762eL, "com.mbeddr.core.buildconfig.structure.DesktopPlatform");
  }

  private static final class PROPS {
    /*package*/ static final SProperty debugOptions$EfxN = MetaAdapterFactory.getProperty(0x2d7fadf533f64e80L, 0xa78f0f739add2bdeL, 0x25f8dd054eab5a60L, 0x25f8dd054eab5a61L, "debugOptions");
  }
}

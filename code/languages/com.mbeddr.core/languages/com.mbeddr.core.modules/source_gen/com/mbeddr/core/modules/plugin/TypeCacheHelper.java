package com.mbeddr.core.modules.plugin;

/*Generated by MPS */

import java.util.Map;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.HashMap;
import jetbrains.mps.typechecking.TypecheckingFacade;

public class TypeCacheHelper {
  private Map<SNode, SNode> cache = MapSequence.fromMap(new HashMap<SNode, SNode>());
  public SNode typeOf(SNode n) {
    SNode fromCache = MapSequence.fromMap(cache).get(n);
    if (fromCache != null) {
      return fromCache;
    }
    SNode typeOf = TypecheckingFacade.getFromContext().getTypeOf(n);
    MapSequence.fromMap(cache).put(n, typeOf);
    return typeOf;
  }
}

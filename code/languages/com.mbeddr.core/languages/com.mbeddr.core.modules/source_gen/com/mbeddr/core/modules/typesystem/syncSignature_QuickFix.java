package com.mbeddr.core.modules.typesystem;

/*Generated by MPS */

import jetbrains.mps.errors.QuickFix_Runtime;
import jetbrains.mps.smodel.SNodePointer;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import com.mbeddr.core.expressions.behavior.PrimitiveType__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SProperty;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SConcept;

public class syncSignature_QuickFix extends QuickFix_Runtime {
  public syncSignature_QuickFix() {
    super(new SNodePointer("r:7b158038-abbe-4e11-b171-d5a959b4e91a(com.mbeddr.core.modules.typesystem)", "8667582976647605605"));
  }
  public void execute(SNode node) {
    SPropertyOperations.assign(((SNode) syncSignature_QuickFix.this.getField("function")[0]), PROPS.exported$V4am, false);
    SPropertyOperations.assign(((SNode) syncSignature_QuickFix.this.getField("function")[0]), PROPS.extern$WI8W, false);
    SPropertyOperations.assign(((SNode) syncSignature_QuickFix.this.getField("function")[0]), PROPS.preventNameMangling$DOH5, true);

    for (SNode prototypeArgument : ListSequence.fromList(SLinkOperations.getChildren(((SNode) syncSignature_QuickFix.this.getField("prototype")[0]), LINKS.arguments$6da0))) {
      SNode concreteArgument = null;

      if (SNodeOperations.getIndexInParent(prototypeArgument) < ListSequence.fromList(SLinkOperations.getChildren(((SNode) syncSignature_QuickFix.this.getField("function")[0]), LINKS.arguments$6da0)).count()) {
        concreteArgument = ListSequence.fromList(SLinkOperations.getChildren(((SNode) syncSignature_QuickFix.this.getField("function")[0]), LINKS.arguments$6da0)).getElement(SNodeOperations.getIndexInParent(prototypeArgument));
      }

      if (concreteArgument == null) {
        concreteArgument = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x6d872ef9245a20d7L, "com.mbeddr.core.modules.structure.Argument"));
        ListSequence.fromList(SLinkOperations.getChildren(((SNode) syncSignature_QuickFix.this.getField("function")[0]), LINKS.arguments$6da0)).addElement(concreteArgument);
      }

      SPropertyOperations.assign(concreteArgument, PROPS.name$MnvL, SPropertyOperations.getString(prototypeArgument, PROPS.name$MnvL));
      SLinkOperations.setTarget(concreteArgument, LINKS.type$sXU3, (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(prototypeArgument, LINKS.type$sXU3), CONCEPTS.PrimitiveBasicIntegralType$$2) ? SNodeOperations.copyNode(PrimitiveType__BehaviorDescriptor.getCorrespondingC99Type_id1rZqEK2gLnh.invoke(SNodeOperations.cast(SLinkOperations.getTarget(prototypeArgument, LINKS.type$sXU3), CONCEPTS.PrimitiveBasicIntegralType$$2))) : SNodeOperations.copyNode(SLinkOperations.getTarget(prototypeArgument, LINKS.type$sXU3))));

      if (SLinkOperations.getTarget(prototypeArgument, LINKS.kind$ebZT) == null) {
        SNodeOperations.deleteNode(SLinkOperations.getTarget(concreteArgument, LINKS.kind$ebZT));
      } else {
        if (SLinkOperations.getTarget(concreteArgument, LINKS.kind$ebZT) == null) {
          SLinkOperations.setTarget(concreteArgument, LINKS.kind$ebZT, SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0xc42f172f6d01a6eL, "com.mbeddr.core.modules.structure.ArgumentKindContainer")));
        }
        SPropertyOperations.assignEnum(SLinkOperations.getTarget(concreteArgument, LINKS.kind$ebZT), PROPS.value$1$x_, SPropertyOperations.getEnum(SLinkOperations.getTarget(prototypeArgument, LINKS.kind$ebZT), PROPS.value$1$x_));
      }
    }

    ListSequence.fromList(SLinkOperations.getChildren(((SNode) syncSignature_QuickFix.this.getField("function")[0]), LINKS.arguments$6da0)).where((it) -> SNodeOperations.getIndexInParent(it) >= ListSequence.fromList(SLinkOperations.getChildren(((SNode) syncSignature_QuickFix.this.getField("prototype")[0]), LINKS.arguments$6da0)).count()).visitAll((it) -> SNodeOperations.deleteNode(it));

    SPropertyOperations.assign(((SNode) syncSignature_QuickFix.this.getField("function")[0]), PROPS.name$MnvL, SPropertyOperations.getString(((SNode) syncSignature_QuickFix.this.getField("prototype")[0]), PROPS.name$MnvL));
    if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(((SNode) syncSignature_QuickFix.this.getField("prototype")[0]), LINKS.type$sXU3), CONCEPTS.PrimitiveBasicIntegralType$$2)) {
      SLinkOperations.setTarget(((SNode) syncSignature_QuickFix.this.getField("function")[0]), LINKS.type$sXU3, SNodeOperations.copyNode(PrimitiveType__BehaviorDescriptor.getCorrespondingC99Type_id1rZqEK2gLnh.invoke(SNodeOperations.cast(SLinkOperations.getTarget(((SNode) syncSignature_QuickFix.this.getField("prototype")[0]), LINKS.type$sXU3), CONCEPTS.PrimitiveBasicIntegralType$$2))));
    } else {
      SLinkOperations.setTarget(((SNode) syncSignature_QuickFix.this.getField("function")[0]), LINKS.type$sXU3, SNodeOperations.copyNode(SLinkOperations.getTarget(((SNode) syncSignature_QuickFix.this.getField("prototype")[0]), LINKS.type$sXU3)));
    }
  }

  private static final class PROPS {
    /*package*/ static final SProperty exported$V4am = MetaAdapterFactory.getProperty(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x595522006a5b934fL, 0x124a1a47a69807f0L, "exported");
    /*package*/ static final SProperty extern$WI8W = MetaAdapterFactory.getProperty(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x5d18402e8bd5672eL, 0x5d18402e8bd56731L, "extern");
    /*package*/ static final SProperty preventNameMangling$DOH5 = MetaAdapterFactory.getProperty(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x595522006a5b934fL, 0x5d18402e8bd65342L, "preventNameMangling");
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
    /*package*/ static final SProperty value$1$x_ = MetaAdapterFactory.getProperty(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0xc42f172f6d01a6eL, 0xc42f172f6d01b82L, "value");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink arguments$6da0 = MetaAdapterFactory.getContainmentLink(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x707ac195dd5d51f2L, 0x4f39f90935e92f45L, "arguments");
    /*package*/ static final SContainmentLink type$sXU3 = MetaAdapterFactory.getContainmentLink(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x46a2a92ac61b183L, 0x46a2a92ac61b184L, "type");
    /*package*/ static final SContainmentLink kind$ebZT = MetaAdapterFactory.getContainmentLink(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x75302b1261129ff9L, 0xc42f172f6d02776L, "kind");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept PrimitiveBasicIntegralType$$2 = MetaAdapterFactory.getConcept(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x4d4a3140e3e01fdaL, "com.mbeddr.core.expressions.structure.PrimitiveBasicIntegralType");
  }
}

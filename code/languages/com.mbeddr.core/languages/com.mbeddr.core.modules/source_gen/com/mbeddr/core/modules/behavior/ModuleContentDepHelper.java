package com.mbeddr.core.modules.behavior;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import java.util.List;
import java.util.ArrayList;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import com.mbeddr.core.expressions.behavior.Type__BehaviorDescriptor;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import com.mbeddr.core.base.behavior.IModuleContentRef__BehaviorDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SConcept;

public class ModuleContentDepHelper {

  public static Iterable<SNode> dependenciesForType(SNode t) {
    final List<SNode> res = new ArrayList<SNode>();
    SNode d = getDeclaration(t);
    if (d != null) {
      ListSequence.fromList(res).addElement(d);
    }
    ListSequence.fromList(Type__BehaviorDescriptor.dependentTypes_id7oI7FI6rVlf.invoke(t)).visitAll(new _FunctionTypes._void_P1_E0<SNode>() {
      public void invoke(SNode it) {
        SNode d = getDeclaration(it);
        if (d != null) {
          ListSequence.fromList(res).addElement(d);
        }
      }
    });
    ListSequence.fromList(Type__BehaviorDescriptor.dependentModuleContents_id1tHnH2eLwg4.invoke(t)).visitAll((it) -> {
      SNode resolvedMC = IModuleContentRef__BehaviorDescriptor.referencedModuleContent_id7jSUHHvkAph.invoke(it);
      if (SNodeOperations.isInstanceOf(resolvedMC, CONCEPTS.IModuleContent$H1)) {
        ListSequence.fromList(res).addElement(SNodeOperations.cast(resolvedMC, CONCEPTS.IModuleContent$H1));
      }
    });
    return res;
  }

  private static SNode getDeclaration(SNode t) {
    if (SNodeOperations.isInstanceOf(t, CONCEPTS.TypeWithDeclaration$E2)) {
      return TypeWithDeclaration__BehaviorDescriptor.getDeclaration_id59zzgFRcVlN.invoke(SNodeOperations.cast(t, CONCEPTS.TypeWithDeclaration$E2));
    }
    return null;
  }

  private static final class CONCEPTS {
    /*package*/ static final SInterfaceConcept IModuleContent$H1 = MetaAdapterFactory.getInterfaceConcept(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x595522006a5b934fL, "com.mbeddr.core.modules.structure.IModuleContent");
    /*package*/ static final SConcept TypeWithDeclaration$E2 = MetaAdapterFactory.getConcept(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x52638d0af733b56eL, "com.mbeddr.core.modules.structure.TypeWithDeclaration");
  }
}

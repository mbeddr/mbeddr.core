package com.mbeddr.core.modules.gen.textGen;

/*Generated by MPS */

import jetbrains.mps.text.rt.TextGenDescriptorBase;
import jetbrains.mps.text.rt.TextGenContext;
import jetbrains.mps.text.impl.TextGenSupport;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import com.mbeddr.core.modules.gen.behavior.AbstractGenModule__BehaviorDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.traceable.behavior.UnitConcept__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SProperty;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;

public class GenModuleC_TextGen extends TextGenDescriptorBase {
  @Override
  public void generateText(final TextGenContext ctx) {
    final TextGenSupport tgs = new TextGenSupport(ctx);
    tgs.createUnitInfo();
    if (isNotEmptyString(SPropertyOperations.getString(ctx.getPrimaryInput(), PROPS.copyrightNoticePath$y0oA))) {
      tgs.append(AbstractGenModule__BehaviorDescriptor.readCopyrightNotice_id6TPUpoFAGOQ.invoke(ctx.getPrimaryInput()));
      tgs.newLine();
    }

    if ((SLinkOperations.getTarget(ctx.getPrimaryInput(), LINKS.myHeader$wbeB) != null)) {
      tgs.append("#include \"");
      tgs.append(AbstractGenModule__BehaviorDescriptor.genName_id7Aba6Bzz6b$.invoke(SLinkOperations.getTarget(ctx.getPrimaryInput(), LINKS.myHeader$wbeB)));
      tgs.append(".");
      tgs.append(SPropertyOperations.getString(SLinkOperations.getTarget(ctx.getPrimaryInput(), LINKS.myHeader$wbeB), PROPS.fileExtension$IoTz));
      tgs.append("\"");
      tgs.newLine();
      tgs.newLine();
    }

    for (SNode i : ListSequence.fromList(SLinkOperations.getChildren(ctx.getPrimaryInput(), LINKS.refs$cI_h))) {
      tgs.appendNode(i);
    }
    if (ListSequence.fromList(SLinkOperations.getChildren(ctx.getPrimaryInput(), LINKS.refs$cI_h)).isNotEmpty()) {
      tgs.newLine();
    }

    for (SNode content : ListSequence.fromList(SLinkOperations.getChildren(ctx.getPrimaryInput(), LINKS.contents$F2ap)).where((it) -> !(SNodeOperations.isInstanceOf(it, CONCEPTS.EmptyModuleContent$uN)))) {
      tgs.appendNode(content);
      if (SNodeOperations.getIndexInParent(content) < ListSequence.fromList(SLinkOperations.getChildren(ctx.getPrimaryInput(), LINKS.contents$F2ap)).count() - 1) {
        tgs.newLine();
      }
    }
    if (tgs.needPositions()) {
      tgs.fillUnitInfo(UnitConcept__BehaviorDescriptor.getUnitName_id4pl5GY7LKmR.invoke(SNodeOperations.cast(ctx.getPrimaryInput(), CONCEPTS.UnitConcept$1g)));
    }
  }
  private static boolean isNotEmptyString(String str) {
    return str != null && str.length() > 0;
  }

  private static final class PROPS {
    /*package*/ static final SProperty copyrightNoticePath$y0oA = MetaAdapterFactory.getProperty(0x62296a07bc3846d2L, 0x8034198c24063588L, 0x6492560dd5e536beL, 0x6e75e9962b82b6eeL, "copyrightNoticePath");
    /*package*/ static final SProperty fileExtension$IoTz = MetaAdapterFactory.getProperty(0x62296a07bc3846d2L, 0x8034198c24063588L, 0x6492560dd5e536beL, 0x6492560dd5e536bfL, "fileExtension");
  }

  private static final class LINKS {
    /*package*/ static final SReferenceLink myHeader$wbeB = MetaAdapterFactory.getReferenceLink(0x62296a07bc3846d2L, 0x8034198c24063588L, 0x1865bdb749ca065bL, 0x162e987a8c9dc171L, "myHeader");
    /*package*/ static final SContainmentLink refs$cI_h = MetaAdapterFactory.getContainmentLink(0x62296a07bc3846d2L, 0x8034198c24063588L, 0x1865bdb749ca065bL, 0x124a1a47a699b532L, "refs");
    /*package*/ static final SContainmentLink contents$F2ap = MetaAdapterFactory.getContainmentLink(0x62296a07bc3846d2L, 0x8034198c24063588L, 0x1865bdb749ca065bL, 0x1865bdb749ca065dL, "contents");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept EmptyModuleContent$uN = MetaAdapterFactory.getConcept(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x7bfc48eac80b1723L, "com.mbeddr.core.modules.structure.EmptyModuleContent");
    /*package*/ static final SInterfaceConcept UnitConcept$1g = MetaAdapterFactory.getInterfaceConcept(0x9ded098bad6a4657L, 0xbfd948636cfe8bc3L, 0x465516cf87c705a4L, "jetbrains.mps.lang.traceable.structure.UnitConcept");
  }
}

package com.mbeddr.core.unittest.behavior;

/*Generated by MPS */

import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.smodel.SNodePointer;
import jetbrains.mps.baseLanguage.closures.runtime.YieldingIterator;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPointerOperations;
import org.jetbrains.mps.openapi.model.SNode;
import com.mbeddr.core.buildconfig.behavior.Binary__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SProperty;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public class ExecutableHelper {

  private static final Iterable<String> UNIT_TEST_MODULE_NAMES = Sequence.fromIterable(Sequence.fromClosure(() -> {
    return (Iterable<SNodePointer>) () -> {
      return new YieldingIterator<SNodePointer>() {
        private int __CP__ = 0;
        protected boolean moveToNext() {
__loop__:
          do {
__switch__:
            switch (this.__CP__) {
              case -1:
                assert false : "Internal error";
                return false;
              case 2:
                this.__CP__ = 3;
                this.yield(new SNodePointer("r:5ed6e5dc-ec13-45f6-960b-a889d781d323(com.mbeddr.core.unittest.runtime)", "7076734286944571007"));
                return true;
              case 3:
                this.__CP__ = 4;
                this.yield(new SNodePointer("r:5ed6e5dc-ec13-45f6-960b-a889d781d323(com.mbeddr.core.unittest.runtime)", "3270283541636215070"));
                return true;
              case 4:
                this.__CP__ = 5;
                this.yield(new SNodePointer("r:5ed6e5dc-ec13-45f6-960b-a889d781d323(com.mbeddr.core.unittest.runtime)", "3270283541636183106"));
                return true;
              case 5:
                this.__CP__ = 6;
                this.yield(new SNodePointer("r:5ed6e5dc-ec13-45f6-960b-a889d781d323(com.mbeddr.core.unittest.runtime)", "6313030504155454112"));
                return true;
              case 6:
                this.__CP__ = 7;
                this.yield(new SNodePointer("r:5ed6e5dc-ec13-45f6-960b-a889d781d323(com.mbeddr.core.unittest.runtime)", "5355719375892477208"));
                return true;
              case 7:
                this.__CP__ = 1;
                this.yield(new SNodePointer("r:5ed6e5dc-ec13-45f6-960b-a889d781d323(com.mbeddr.core.unittest.runtime)", "3270283541636352244"));
                return true;
              case 0:
                this.__CP__ = 2;
                break;
              default:
                break __loop__;
            }
          } while (true);
          return false;
        }
      };
    };
  })).select((it) -> SPropertyOperations.getString(SPointerOperations.resolveNode(it, null), PROPS.name$MnvL));

  public static boolean isTest(SNode executable) {
    return Sequence.fromIterable(Binary__BehaviorDescriptor.referencedImplModules_id7RiewQ_lHPf.invoke(executable)).select((it) -> SPropertyOperations.getString(it, PROPS.name$MnvL)).containsSequence(Sequence.fromIterable(UNIT_TEST_MODULE_NAMES));
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
  }
}

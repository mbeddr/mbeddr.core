package com.mbeddr.core.unittest.typesystem;

/*Generated by MPS */

import jetbrains.mps.errors.QuickFix_Runtime;
import jetbrains.mps.smodel.SNodePointer;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SProperty;

public class exportAllUsedTests_QuickFix extends QuickFix_Runtime {
  public exportAllUsedTests_QuickFix() {
    super(new SNodePointer("r:572f6bc0-c998-48d5-9fdb-9ca4597c66de(com.mbeddr.core.unittest.typesystem)", "8195843641596768271"));
  }
  public String getDescription(SNode node) {
    return "Export all referenced Tests";
  }
  public void execute(SNode node) {
    SNode input = ((SNode) exportAllUsedTests_QuickFix.this.getField("collection")[0]);

    Iterable<SNode> notExportedTests = Sequence.fromIterable(SNodeOperations.ofConcept(SLinkOperations.getChildren(input, LINKS.tests$GWNl), CONCEPTS.TestCaseRef$6w)).where((it) -> !(SPropertyOperations.getBoolean(SLinkOperations.getTarget(it, LINKS.testcase$9iCj), PROPS.exported$V4am))).select((it) -> SLinkOperations.getTarget(it, LINKS.testcase$9iCj)).distinct();
    for (SNode test : Sequence.fromIterable(notExportedTests)) {
      SPropertyOperations.assign(test, PROPS.exported$V4am, true);
    }
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink tests$GWNl = MetaAdapterFactory.getContainmentLink(0x6d68b77b6994918L, 0x83b8857e63787800L, 0x6e6681f47bde7c66L, 0x6e6681f47bde7c69L, "tests");
    /*package*/ static final SReferenceLink testcase$9iCj = MetaAdapterFactory.getReferenceLink(0x6d68b77b6994918L, 0x83b8857e63787800L, 0x4eeaa4ca8222cf79L, 0x4eeaa4ca8222cf7aL, "testcase");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept TestCaseRef$6w = MetaAdapterFactory.getConcept(0x6d68b77b6994918L, 0x83b8857e63787800L, 0x4eeaa4ca8222cf79L, "com.mbeddr.core.unittest.structure.TestCaseRef");
  }

  private static final class PROPS {
    /*package*/ static final SProperty exported$V4am = MetaAdapterFactory.getProperty(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x595522006a5b934fL, 0x124a1a47a69807f0L, "exported");
  }
}

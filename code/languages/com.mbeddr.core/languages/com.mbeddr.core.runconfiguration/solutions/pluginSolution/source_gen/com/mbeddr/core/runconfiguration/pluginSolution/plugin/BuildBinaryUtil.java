package com.mbeddr.core.runconfiguration.pluginSolution.plugin;

/*Generated by MPS */

import java.util.List;
import java.util.concurrent.Callable;
import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.mps.openapi.util.ProgressMonitor;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.TimeUnit;

public class BuildBinaryUtil {

  public static List<Callable<Boolean>> getValidationTasks(SNode myBinary, ProgressMonitor progressMonitor) {
    List<Callable<Boolean>> validationTasks = ListSequence.fromList(new ArrayList<Callable<Boolean>>());

    ListSequence.fromList(validationTasks).addElement(DebugValidator.makeFileExists(myBinary, progressMonitor));
    ListSequence.fromList(validationTasks).addElement(DebugValidator.toolIsExecutable(BuildConfigHelper.getPathToMake(myBinary), new String[]{"--help"}, progressMonitor));
    ListSequence.fromList(validationTasks).addElement(DebugValidator.toolIsExecutable(BuildConfigHelper.getPathToGdb(myBinary), new String[]{"--help"}, progressMonitor));

    return validationTasks;
  }

  public static List<Callable<Boolean>> getValidationTasks(SNode myBinary) {
    List<Callable<Boolean>> validationTasks = ListSequence.fromList(new ArrayList<Callable<Boolean>>());

    ListSequence.fromList(validationTasks).addElement(DebugValidator.makeFileExists(myBinary));
    ListSequence.fromList(validationTasks).addElement(DebugValidator.toolIsExecutable(BuildConfigHelper.getPathToMake(myBinary), new String[]{"--help"}));
    ListSequence.fromList(validationTasks).addElement(DebugValidator.toolIsExecutable(BuildConfigHelper.getPathToGdb(myBinary), new String[]{"--help"}));

    return validationTasks;
  }


  public static void awaitTillTimeout(CountDownLatch latch, int seconds) {
    try {
      latch.await(seconds, TimeUnit.SECONDS);
    } catch (Exception e) {
      e.printStackTrace();
    }
  }


}

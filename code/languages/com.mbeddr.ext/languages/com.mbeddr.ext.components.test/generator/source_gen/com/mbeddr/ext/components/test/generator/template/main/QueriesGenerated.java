package com.mbeddr.ext.components.test.generator.template.main;

/*Generated by MPS */

import jetbrains.mps.generator.runtime.Generated;
import jetbrains.mps.generator.impl.query.QueryProviderBase;
import jetbrains.mps.generator.template.BaseMappingRuleContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.IAttributeDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.generator.template.ReferenceMacroContext;
import com.mbeddr.core.unittest.behavior.IFailuresAware__BehaviorDescriptor;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodesContext;
import jetbrains.mps.generator.template.MappingScriptContext;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SModelOperations;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.generator.template.TemplateQueryContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import com.mbeddr.core.buildconfig.behavior.BCHelper;
import java.util.Map;
import jetbrains.mps.generator.impl.query.ReductionRuleCondition;
import java.util.HashMap;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.generator.impl.query.QueryKey;
import jetbrains.mps.generator.template.ReductionRuleQueryContext;
import jetbrains.mps.generator.impl.GenerationFailureException;
import jetbrains.mps.generator.impl.query.ScriptCodeBlock;
import jetbrains.mps.generator.impl.query.MapConfigurationCondition;
import jetbrains.mps.generator.impl.query.SourceNodesQuery;
import java.util.Collection;
import jetbrains.mps.util.IterableUtil;
import jetbrains.mps.generator.impl.query.ReferenceTargetQuery;
import org.jetbrains.annotations.Nullable;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SProperty;

@Generated
public class QueriesGenerated extends QueryProviderBase {
  public QueriesGenerated() {
    super(1);
  }
  public static boolean rule_Condition_0_0(final BaseMappingRuleContext _context) {
    return new IAttributeDescriptor.NodeAttribute(CONCEPTS.TestHelperFunctionAnnotation$yr).get(SLinkOperations.getTarget(_context.getNode(), LINKS.runnable$RUWS)) != null;
  }
  public static boolean rule_Condition_0_1(final BaseMappingRuleContext _context) {
    return new IAttributeDescriptor.NodeAttribute(CONCEPTS.TestHelperFunctionAnnotation$yr).get(SLinkOperations.getTarget(_context.getNode(), LINKS.runnable$RUWS)) == null;
  }
  public static Object referenceMacro_GetReferent_0_0(final ReferenceMacroContext _context) {
    return (String) IFailuresAware__BehaviorDescriptor.pointerOnNumOfFailsVarName_id5hYHEwYdCRV.invoke(new IAttributeDescriptor.NodeAttribute(CONCEPTS.TestHelperFunctionAnnotation$yr).get(SLinkOperations.getTarget(_context.getNode(), LINKS.runnable$RUWS)));
  }
  public static Object referenceMacro_GetReferent_0_1(final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(SLinkOperations.getTarget(_context.getNode(), LINKS.instance$tSe9), "ComponentInstance_genGlobalVarName");
  }
  public static Object referenceMacro_GetReferent_0_2(final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(SLinkOperations.getTarget(_context.getNode(), LINKS.runnable$RUWS), "Runnable_genFunctionName");
  }
  public static Object referenceMacro_GetReferent_0_3(final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(SLinkOperations.getTarget(_context.getNode(), LINKS.instance$tSe9), "ComponentInstance_genGlobalVarName");
  }
  public static Object referenceMacro_GetReferent_0_4(final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(SLinkOperations.getTarget(_context.getNode(), LINKS.runnable$RUWS), "Runnable_genFunctionName");
  }
  public static Object referenceMacro_GetReferent_0_5(final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(SLinkOperations.getTarget(_context.getNode(), LINKS.field$aKir), "Field_genMemberName");
  }
  public static Object referenceMacro_GetReferent_0_6(final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(SLinkOperations.getTarget(_context.getNode(), LINKS.instance$tSe9), "ComponentInstance_genGlobalVarName");
  }
  public static Iterable<SNode> sourceNodesQuery_0_0(final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getChildren(_context.getNode(), LINKS.actuals$t2rY);
  }
  public static Iterable<SNode> sourceNodesQuery_0_1(final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getChildren(_context.getNode(), LINKS.actuals$t2rY);
  }
  public static void mappingScript_CodeBlock_1(final MappingScriptContext _context) {
    ListSequence.fromList(SModelOperations.nodes(_context.getModel(), CONCEPTS.Runnable$OJ)).where((it) -> new IAttributeDescriptor.NodeAttribute(CONCEPTS.TestHelperFunctionAnnotation$yr).get(it) != null).visitAll((final SNode it) -> ListSequence.fromList(SLinkOperations.getChildren(it, LINKS.arguments$6da0)).addElement(((_FunctionTypes._return_P0_E0<SNode>) () -> {
      final SNode node_268054603277678545 = ((_FunctionTypes._return_P0_E0<SNode>) () -> {
        SNode res = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x75739ed9f39e3888L, "com.mbeddr.core.expressions.structure.Int32tType"));
        return res;
      }).invoke();
      final SNode node_268054603277678543 = ((_FunctionTypes._return_P0_E0<SNode>) () -> {
        SNode res = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x3bf5377ae9044dedL, 0x97545a516023bfaaL, 0x3e0cae5e366d630L, "com.mbeddr.core.pointers.structure.PointerType"));
        SLinkOperations.setTarget(res, LINKS.baseType$zMGV, node_268054603277678545);
        return res;
      }).invoke();
      SNode node_268054603277678541 = ((_FunctionTypes._return_P0_E0<SNode>) () -> {
        SNode res = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x6d872ef9245a20d7L, "com.mbeddr.core.modules.structure.Argument"));
        SPropertyOperations.assign(res, PROPS.name$MnvL, (IFailuresAware__BehaviorDescriptor.pointerOnNumOfFailsVarName_id5hYHEwYdCRV.invoke(new IAttributeDescriptor.NodeAttribute(CONCEPTS.TestHelperFunctionAnnotation$yr).get(it))));
        SLinkOperations.setTarget(res, LINKS.type$sXU3, node_268054603277678543);
        return res;
      }).invoke();
      return node_268054603277678541;
    }).invoke()));
  }
  public static boolean mc_Condition_0(final TemplateQueryContext _context) {
    boolean hasConcepts = ListSequence.fromList(SModelOperations.nodes(_context.getInputModel(), null)).select((it) -> SNodeOperations.getConcept(it).getQualifiedName()).any((it) -> it.startsWith("com.mbeddr.ext.components"));
    if (!(hasConcepts)) {
      return false;
    }

    SNode compconfig = BCHelper.expectBCConfigItem(_context.getInputModel(), _context, "com.mbeddr.ext.components.test/main.main", CONCEPTS.ComponentsConfigItem$6o.getDeclarationNode());
    if (compconfig == null) {
      return false;
    }
    return SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SNodeOperations.cast(compconfig, CONCEPTS.ComponentsConfigItem$6o), LINKS.genStrategy$fd3B), CONCEPTS.NoMwComponentsGenStrategy$VR);
  }
  private final Map<String, ReductionRuleCondition> rrcMethods = new HashMap<String, ReductionRuleCondition>();
  {
    int i = 0;
    rrcMethods.put("8230733038425694023", new RRC(i++));
    rrcMethods.put("268054603277678348", new RRC(i++));
  }
  @Override
  @NotNull
  public ReductionRuleCondition getReductionRuleCondition(@NotNull QueryKey identity) {
    ReductionRuleCondition query = identity.forTemplateNode(rrcMethods);
    return (query != null ? query : super.getReductionRuleCondition(identity));
  }
  private static class RRC implements ReductionRuleCondition {
    private final int methodKey;
    public RRC(int methodKey) {
      this.methodKey = methodKey;
    }
    @Override
    public boolean check(ReductionRuleQueryContext ctx) throws GenerationFailureException {
      switch (methodKey) {
        case 0:
          return QueriesGenerated.rule_Condition_0_0(ctx);
        case 1:
          return QueriesGenerated.rule_Condition_0_1(ctx);
        default:
          throw new GenerationFailureException(String.format("Inconsistent QueriesGenerated: there's no condition method for rule %s (key: #%d)", ctx.getTemplateReference(), methodKey));
      }
    }
  }
  private final Map<String, ScriptCodeBlock> mscbMethods = new HashMap<String, ScriptCodeBlock>();
  {
    int i = 0;
    mscbMethods.put("268054603277668377", new SCB(i++));
  }
  @Override
  @NotNull
  public ScriptCodeBlock getScriptCodeBlock(@NotNull QueryKey identity) {
    ScriptCodeBlock query = identity.forTemplateNode(mscbMethods);
    return (query != null ? query : super.getScriptCodeBlock(identity));
  }
  private static class SCB implements ScriptCodeBlock {
    private final int methodKey;
    public SCB(int methodKey) {
      this.methodKey = methodKey;
    }
    @Override
    public void invoke(MappingScriptContext ctx) throws GenerationFailureException {
      switch (methodKey) {
        case 0:
          QueriesGenerated.mappingScript_CodeBlock_1(ctx);
          return;
        default:
          throw new GenerationFailureException(String.format("There's no code block with method index %d ", methodKey));
      }
    }
  }
  private final Map<String, MapConfigurationCondition> mccMethods = new HashMap<String, MapConfigurationCondition>();
  {
    int i = 0;
    mccMethods.put("8230733038425113258", new MCC(i++));
  }
  @Override
  @NotNull
  public MapConfigurationCondition getMapConfigurationCondition(@NotNull QueryKey identity) {
    MapConfigurationCondition query = identity.forTemplateNode(mccMethods);
    return (query != null ? query : super.getMapConfigurationCondition(identity));
  }
  private static class MCC implements MapConfigurationCondition {
    private final int methodKey;
    public MCC(int methodKey) {
      this.methodKey = methodKey;
    }
    @Override
    public boolean check(TemplateQueryContext ctx) throws GenerationFailureException {
      switch (methodKey) {
        case 0:
          return QueriesGenerated.mc_Condition_0(ctx);
        default:
          throw new GenerationFailureException(String.format("Inconsistent QueriesGenerated: there's no condition method for map configuration %s (key: #%d)", ctx.getTemplateReference(), methodKey));
      }
    }
  }
  private final Map<String, SourceNodesQuery> snsqMethods = new HashMap<String, SourceNodesQuery>();
  {
    int i = 0;
    snsqMethods.put("8230733038425694366", new SNsQ(i++));
    snsqMethods.put("268054603277678361", new SNsQ(i++));
  }
  @NotNull
  @Override
  public SourceNodesQuery getSourceNodesQuery(@NotNull QueryKey identity) {
    SourceNodesQuery query = identity.forFunctionNode(snsqMethods);
    return (query != null ? query : super.getSourceNodesQuery(identity));
  }
  private static class SNsQ implements SourceNodesQuery {
    private final int methodKey;
    public SNsQ(int methodKey) {
      this.methodKey = methodKey;
    }
    @NotNull
    public Collection<SNode> evaluate(@NotNull SourceSubstituteMacroNodesContext ctx) throws GenerationFailureException {
      switch (methodKey) {
        case 0:
          return IterableUtil.asCollection(QueriesGenerated.sourceNodesQuery_0_0(ctx));
        case 1:
          return IterableUtil.asCollection(QueriesGenerated.sourceNodesQuery_0_1(ctx));
        default:
          throw new GenerationFailureException(String.format("Inconsistent QueriesGenerated: there's no method for query %s (key: #%d)", ctx.getTemplateReference(), methodKey));
      }
    }
  }
  private final Map<String, ReferenceTargetQuery> rtqMethods = new HashMap<String, ReferenceTargetQuery>();
  {
    rtqMethods.put("6088504579968036151", new RTQ(0, "failures"));
    rtqMethods.put("8230733038425694299", new RTQ(1, "instanceData"));
    rtqMethods.put("8230733038425694120", new RTQ(2, "aFunction"));
    rtqMethods.put("268054603277678369", new RTQ(3, "instanceData"));
    rtqMethods.put("268054603277678379", new RTQ(4, "aFunction"));
    rtqMethods.put("572633089222480877", new RTQ(5, "field"));
    rtqMethods.put("572633089222477050", new RTQ(6, "instancevar"));
  }
  @NotNull
  @Override
  public ReferenceTargetQuery getReferenceTargetQuery(@NotNull QueryKey queryKey) {
    ReferenceTargetQuery query = queryKey.forTemplateNode(rtqMethods);
    return (query != null ? query : super.getReferenceTargetQuery(queryKey));
  }
  private static class RTQ extends ReferenceTargetQuery.Base {
    private final int methodKey;
    /*package*/ RTQ(int methodKey, String templateValue) {
      super(templateValue);
      this.methodKey = methodKey;
    }
    @Nullable
    public Object evaluate(@NotNull ReferenceMacroContext ctx) throws GenerationFailureException {
      switch (methodKey) {
        case 0:
          return QueriesGenerated.referenceMacro_GetReferent_0_0(ctx);
        case 1:
          return QueriesGenerated.referenceMacro_GetReferent_0_1(ctx);
        case 2:
          return QueriesGenerated.referenceMacro_GetReferent_0_2(ctx);
        case 3:
          return QueriesGenerated.referenceMacro_GetReferent_0_3(ctx);
        case 4:
          return QueriesGenerated.referenceMacro_GetReferent_0_4(ctx);
        case 5:
          return QueriesGenerated.referenceMacro_GetReferent_0_5(ctx);
        case 6:
          return QueriesGenerated.referenceMacro_GetReferent_0_6(ctx);
        default:
          throw new GenerationFailureException(String.format("Inconsistent QueriesGenerated: there's no method for query %s (key: #%d)", ctx.getTemplateReference(), methodKey));
      }
    }
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept TestHelperFunctionAnnotation$yr = MetaAdapterFactory.getConcept(0x6d68b77b6994918L, 0x83b8857e63787800L, 0x7239701714738629L, "com.mbeddr.core.unittest.structure.TestHelperFunctionAnnotation");
    /*package*/ static final SConcept Runnable$OJ = MetaAdapterFactory.getConcept(0x97d2424451db4e2eL, 0x97fc7bd73b1f5f40L, 0x3e5659cd94a4c1c6L, "com.mbeddr.ext.components.structure.Runnable");
    /*package*/ static final SConcept ComponentsConfigItem$6o = MetaAdapterFactory.getConcept(0x97d2424451db4e2eL, 0x97fc7bd73b1f5f40L, 0x1d31b29ecf3bf048L, "com.mbeddr.ext.components.structure.ComponentsConfigItem");
    /*package*/ static final SConcept NoMwComponentsGenStrategy$VR = MetaAdapterFactory.getConcept(0xbd640b8f4be442b6L, 0x8dc02c94d1ddf606L, 0x1d31b29ecf3e58afL, "com.mbeddr.ext.components.gen_nomw.structure.NoMwComponentsGenStrategy");
  }

  private static final class LINKS {
    /*package*/ static final SReferenceLink runnable$RUWS = MetaAdapterFactory.getReferenceLink(0x41911c23eb234ee6L, 0x872fbc7f7ebce290L, 0x723970171463b1a2L, 0x54bbb4c1ea27cc16L, "runnable");
    /*package*/ static final SReferenceLink instance$tSe9 = MetaAdapterFactory.getReferenceLink(0x97d2424451db4e2eL, 0x97fc7bd73b1f5f40L, 0x1493be2e6967d530L, 0x1493be2e6967d532L, "instance");
    /*package*/ static final SReferenceLink field$aKir = MetaAdapterFactory.getReferenceLink(0x41911c23eb234ee6L, 0x872fbc7f7ebce290L, 0x7f266c2bdbbe880L, 0x7f266c2bdbbf1ffL, "field");
    /*package*/ static final SContainmentLink actuals$t2rY = MetaAdapterFactory.getContainmentLink(0x41911c23eb234ee6L, 0x872fbc7f7ebce290L, 0x723970171463b1a2L, 0x723970171463b1a5L, "actuals");
    /*package*/ static final SContainmentLink arguments$6da0 = MetaAdapterFactory.getContainmentLink(0x6d11763d483d4b2bL, 0x8efc09336c1b0001L, 0x707ac195dd5d51f2L, 0x4f39f90935e92f45L, "arguments");
    /*package*/ static final SContainmentLink baseType$zMGV = MetaAdapterFactory.getContainmentLink(0xa9d696470840491eL, 0xbf392eb0805d2011L, 0x6bbcdccef5e46755L, 0x6bbcdccef5e46756L, "baseType");
    /*package*/ static final SContainmentLink type$sXU3 = MetaAdapterFactory.getContainmentLink(0x61c69711ed614850L, 0x81d97714ff227fb0L, 0x46a2a92ac61b183L, 0x46a2a92ac61b184L, "type");
    /*package*/ static final SContainmentLink genStrategy$fd3B = MetaAdapterFactory.getContainmentLink(0x97d2424451db4e2eL, 0x97fc7bd73b1f5f40L, 0x1d31b29ecf3bf048L, 0x1d31b29ecf3dbc17L, "genStrategy");
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
  }
}

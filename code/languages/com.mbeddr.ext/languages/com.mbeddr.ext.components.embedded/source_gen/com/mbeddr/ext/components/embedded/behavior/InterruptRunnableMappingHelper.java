package com.mbeddr.ext.components.embedded.behavior;

/*Generated by MPS */

import java.util.List;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.IAttributeDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.internal.collections.runtime.IterableUtils;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SReferenceLink;

public class InterruptRunnableMappingHelper {

  public static boolean hasValidInterruptExitHandlerUsage(List<SNode> companions) {
    return ListSequence.fromList(companions).count() == 1 || !(ListSequence.fromList(companions).any((it) -> (new IAttributeDescriptor.NodeAttribute(CONCEPTS.InterruptExitHandler$Ur).get(SLinkOperations.getTarget(it, LINKS.runnable$BIyn)) != null)));
  }

  public static String getCompanionsWithInterruptExitHandlers(List<SNode> companions) {
    return IterableUtils.join(ListSequence.fromList(companions).where((it) -> (new IAttributeDescriptor.NodeAttribute(CONCEPTS.InterruptExitHandler$Ur).get(SLinkOperations.getTarget(it, LINKS.runnable$BIyn)) != null)).select((it) -> SNodeOperations.present(SLinkOperations.getTarget(it, LINKS.instance$BIjm)) + "::" + SLinkOperations.getTarget(it, LINKS.runnable$BIyn)), ", ");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept InterruptExitHandler$Ur = MetaAdapterFactory.getConcept(0x28899e1bfee4db6L, 0xb470ed0f9ee5f662L, 0x1190893126260ac1L, "com.mbeddr.ext.components.embedded.structure.InterruptExitHandler");
  }

  private static final class LINKS {
    /*package*/ static final SReferenceLink runnable$BIyn = MetaAdapterFactory.getReferenceLink(0x28899e1bfee4db6L, 0xb470ed0f9ee5f662L, 0x7f4986009ab49c73L, 0x7f4986009ab49c76L, "runnable");
    /*package*/ static final SReferenceLink instance$BIjm = MetaAdapterFactory.getReferenceLink(0x28899e1bfee4db6L, 0xb470ed0f9ee5f662L, 0x7f4986009ab49c73L, 0x7f4986009ab49c75L, "instance");
  }
}

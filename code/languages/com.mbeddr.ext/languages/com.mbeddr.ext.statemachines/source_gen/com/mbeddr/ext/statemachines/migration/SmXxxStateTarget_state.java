package com.mbeddr.ext.statemachines.migration;

/*Generated by MPS */

import jetbrains.mps.lang.migration.runtime.base.MigrationScriptBase;
import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.mps.openapi.module.SModule;
import org.jetbrains.mps.openapi.model.SModel;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SModelOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.migration.runtime.base.MigrationScriptReference;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.smodel.builder.SNodeBuilder;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;

public class SmXxxStateTarget_state extends MigrationScriptBase {
  private final String description = "SmXxxStateTarget_state";
  public String getCaption() {
    return description;
  }
  @Override
  public boolean isRerunnable() {
    return false;
  }
  public SNode execute(final SModule m) {
    doExecute(m);
    return null;
  }
  public void doExecute(final SModule m) {
    for (SModel model : m.getModels()) {
      ListSequence.fromList(SModelOperations.nodes(model, CONCEPTS.SmSetStateTarget$DJ)).visitAll((it) -> {
        SLinkOperations.setTarget(it, LINKS.state$e6ks, createStateRef_zhvfij_a0a0a0a0a0a6(SLinkOperations.getTarget(it, LINKS.state_old$W7Wo)));
        SLinkOperations.setTarget(it, LINKS.state_old$W7Wo, null);
      });
      ListSequence.fromList(SModelOperations.nodes(model, CONCEPTS.SmIsInStateTarget$B0)).visitAll((it) -> {
        SLinkOperations.setTarget(it, LINKS.state$nL89, createStateRef_zhvfij_a0a0a0a1a0a6(SLinkOperations.getTarget(it, LINKS.state_old$WXFG)));
        SLinkOperations.setTarget(it, LINKS.state_old$WXFG, null);
      });
    }
  }
  public MigrationScriptReference getReference() {
    return new MigrationScriptReference(MetaAdapterFactory.getLanguage(0x564e97d68fb741f5L, 0xbfc1c7ed376efd62L, "com.mbeddr.ext.statemachines"), 0);
  }

  private static SNode createStateRef_zhvfij_a0a0a0a0a0a6(SNode p0) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.StateRef$nC);
    n0.setReferenceTarget(LINKS.state$gium, p0);
    return n0.getResult();
  }
  private static SNode createStateRef_zhvfij_a0a0a0a1a0a6(SNode p0) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.StateRef$nC);
    n0.setReferenceTarget(LINKS.state$gium, p0);
    return n0.getResult();
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept SmSetStateTarget$DJ = MetaAdapterFactory.getConcept(0x564e97d68fb741f5L, 0xbfc1c7ed376efd62L, 0x1fde2235a628666L, "com.mbeddr.ext.statemachines.structure.SmSetStateTarget");
    /*package*/ static final SConcept SmIsInStateTarget$B0 = MetaAdapterFactory.getConcept(0x564e97d68fb741f5L, 0xbfc1c7ed376efd62L, 0x4fd7cb7fbb5355a4L, "com.mbeddr.ext.statemachines.structure.SmIsInStateTarget");
    /*package*/ static final SConcept StateRef$nC = MetaAdapterFactory.getConcept(0x564e97d68fb741f5L, 0xbfc1c7ed376efd62L, 0x6adab8426ca9b7e7L, "com.mbeddr.ext.statemachines.structure.StateRef");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink state$e6ks = MetaAdapterFactory.getContainmentLink(0x564e97d68fb741f5L, 0xbfc1c7ed376efd62L, 0x1fde2235a628666L, 0x52941adca601b38fL, "state");
    /*package*/ static final SReferenceLink state_old$W7Wo = MetaAdapterFactory.getReferenceLink(0x564e97d68fb741f5L, 0xbfc1c7ed376efd62L, 0x1fde2235a628666L, 0x1fde2235a628742L, "state_old");
    /*package*/ static final SContainmentLink state$nL89 = MetaAdapterFactory.getContainmentLink(0x564e97d68fb741f5L, 0xbfc1c7ed376efd62L, 0x4fd7cb7fbb5355a4L, 0x1253ceea822ca259L, "state");
    /*package*/ static final SReferenceLink state_old$WXFG = MetaAdapterFactory.getReferenceLink(0x564e97d68fb741f5L, 0xbfc1c7ed376efd62L, 0x4fd7cb7fbb5355a4L, 0x4fd7cb7fbb535674L, "state_old");
    /*package*/ static final SReferenceLink state$gium = MetaAdapterFactory.getReferenceLink(0x564e97d68fb741f5L, 0xbfc1c7ed376efd62L, 0x6adab8426ca9b7e7L, 0x6adab8426ca9b81cL, "state");
  }
}

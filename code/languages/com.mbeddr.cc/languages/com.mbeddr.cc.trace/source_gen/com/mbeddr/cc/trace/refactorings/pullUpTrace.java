package com.mbeddr.cc.trace.refactorings;

/*Generated by MPS */

import jetbrains.mps.refactoring.framework.BaseRefactoring;
import jetbrains.mps.refactoring.framework.IRefactoringTarget;
import jetbrains.mps.refactoring.framework.RefactoringContext;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.IAttributeDescriptor;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SContainmentLink;

public class pullUpTrace extends BaseRefactoring {
  public pullUpTrace() {
  }
  public IRefactoringTarget getRefactoringTarget() {
    return new pullUpTrace_Target();
  }
  public String getUserFriendlyName() {
    return "Pull Up Trace";
  }
  public void refactor(final RefactoringContext refactoringContext) {
    SNode n = SNodeOperations.getParent(refactoringContext.getSelectedNode());
    SNode p = SNodeOperations.getParent(n);
    if (p != null) {
      if (new IAttributeDescriptor.NodeAttribute(CONCEPTS.TraceAnnotation$ho).get(p) != null) {
        ListSequence.fromList(SLinkOperations.getChildren(new IAttributeDescriptor.NodeAttribute(CONCEPTS.TraceAnnotation$ho).get(p), LINKS.refs$Khba)).addSequence(ListSequence.fromList(SLinkOperations.getChildren(new IAttributeDescriptor.NodeAttribute(CONCEPTS.TraceAnnotation$ho).get(n), LINKS.refs$Khba)));
        SNodeOperations.deleteNode(new IAttributeDescriptor.NodeAttribute(CONCEPTS.TraceAnnotation$ho).get(n));
      } else {
        new IAttributeDescriptor.NodeAttribute(CONCEPTS.TraceAnnotation$ho).set(p, new IAttributeDescriptor.NodeAttribute(CONCEPTS.TraceAnnotation$ho).get(n));
      }
    }
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept TraceAnnotation$ho = MetaAdapterFactory.getConcept(0x53bab999e9c3428aL, 0x80befef5bed08f55L, 0x619a854eb408b62L, "com.mbeddr.cc.trace.structure.TraceAnnotation");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink refs$Khba = MetaAdapterFactory.getContainmentLink(0x53bab999e9c3428aL, 0x80befef5bed08f55L, 0x3f878a0314aee6c0L, 0x3f878a0314aeff4dL, "refs");
  }
}

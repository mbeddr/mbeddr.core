package com.mbeddr.cc.var.annotations.editor;

/*Generated by MPS */

import java.awt.Color;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import com.mbeddr.cc.var.annotations.behavior.FeatureCondition__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public class ColorEngine {
  public ColorEngine() {
  }
  public Color getColorForPC(SNode fc) {
    if (SLinkOperations.getTarget(fc, LINKS.expr$Myds) == null) {
      return Color.lightGray;
    }
    long hashcode = (long) FeatureCondition__BehaviorDescriptor.getCharacteristicNumber_id2h6lNbWo02l.invoke(fc);
    String s = "" + hashcode;
    while (s.length() < 6) {
      hashcode += 1;
      hashcode *= 2;
      s = "" + hashcode;
    }
    int l = s.length();
    float col0 = pickColor(s, l - 2, l, 100);
    float col1 = pickColor(s, l - 4, l - 2, 100);
    float col2 = pickColor(s, l - 6, l - 4, 100);
    return new Color(col0, col1, col2);
  }
  public float pickColor(String hashCodeString, int p1, int p2, int divid) {
    float col0 = Float.valueOf(hashCodeString.substring(p1, p2)) / divid;
    if (col0 < 0.2) {
      col0 = col0 + 0.8f;
    }
    if (col0 < 0.3) {
      col0 = col0 + 0.7f;
    }
    if (col0 < 0.4) {
      col0 = col0 + 0.6f;
    }
    if (col0 < 0.5) {
      col0 = col0 + 0.5f;
    }
    return col0;
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink expr$Myds = MetaAdapterFactory.getContainmentLink(0x17fba0eaf154a23L, 0xb0a802b5c1141e75L, 0x24465732fc60006dL, 0x24465732fc60006eL, "expr");
  }
}

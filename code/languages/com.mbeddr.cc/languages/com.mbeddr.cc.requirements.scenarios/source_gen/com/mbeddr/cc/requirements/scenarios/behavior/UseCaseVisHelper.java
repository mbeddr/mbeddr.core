package com.mbeddr.cc.requirements.scenarios.behavior;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import com.mbeddr.mpsutil.plantuml.node.behavior.VisGraph;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SProperty;

public class UseCaseVisHelper {
  private static final String UCD = "use case diagram";
  private static final String PD = "participant diagram";
  public UseCaseVisHelper() {
  }
  public static String[] getCategories() {
    return new String[]{UCD};
  }
  public static void visualize(SNode summary, String category, VisGraph g) {
    if (category.equals(UCD)) {
      visualizeUseCaseDiagram(summary, g);
    }
  }
  public static void visualizeUseCaseDiagram(SNode summary, final VisGraph g) {
    SNode owningReq = SNodeOperations.getNodeAncestor(summary, CONCEPTS.Requirement$sS, false, false);
    g.add("left to right direction");
    ListSequence.fromList(SNodeOperations.getNodeDescendants(owningReq, CONCEPTS.UseCaseActiveActor$S6, false, new SAbstractConcept[]{})).where((it) -> SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SLinkOperations.getTarget(it, LINKS.participant$aufo), LINKS.participant$paZn), CONCEPTS.Actor$uk)).visitAll((it) -> g.add("actor " + UseCaseActiveActor__BehaviorDescriptor.asString_id5DCgtXuHhpE.invoke(it)));
    ListSequence.fromList(SNodeOperations.getNodeDescendants(owningReq, CONCEPTS.UseCasePassiveActor$En, false, new SAbstractConcept[]{})).where((it) -> SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SLinkOperations.getTarget(it, LINKS.participant$xR8R), LINKS.participant$paZn), CONCEPTS.Actor$uk)).visitAll((it) -> g.add("actor " + UseCasePassiveActor__BehaviorDescriptor.asString_id5DCgtXuHhr9.invoke(it)));
    g.add("rectangle system {");
    ListSequence.fromList(SNodeOperations.getNodeDescendants(owningReq, CONCEPTS.UseCaseActiveActor$S6, false, new SAbstractConcept[]{})).where((it) -> SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SLinkOperations.getTarget(it, LINKS.participant$aufo), LINKS.participant$paZn), CONCEPTS.Component$GQ)).visitAll((it) -> {
      g.add("actor " + UseCaseActiveActor__BehaviorDescriptor.asString_id5DCgtXuHhpE.invoke(it));
      g.add("url of " + UseCaseActiveActor__BehaviorDescriptor.asString_id5DCgtXuHhpE.invoke(it) + " is " + g.createLink(SLinkOperations.getTarget(SLinkOperations.getTarget(it, LINKS.participant$aufo), LINKS.participant$paZn)));
    });
    ListSequence.fromList(SNodeOperations.getNodeDescendants(owningReq, CONCEPTS.UseCasePassiveActor$En, false, new SAbstractConcept[]{})).where((it) -> SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SLinkOperations.getTarget(it, LINKS.participant$xR8R), LINKS.participant$paZn), CONCEPTS.Component$GQ)).visitAll((it) -> {
      g.add("actor " + UseCasePassiveActor__BehaviorDescriptor.asString_id5DCgtXuHhr9.invoke(it));
      g.add("url of " + UseCasePassiveActor__BehaviorDescriptor.asString_id5DCgtXuHhr9.invoke(it) + " is " + g.createLink(SLinkOperations.getTarget(SLinkOperations.getTarget(it, LINKS.participant$xR8R), LINKS.participant$paZn)));
    });
    ListSequence.fromList(SNodeOperations.getNodeDescendants(owningReq, CONCEPTS.UseCase$8$, false, new SAbstractConcept[]{})).visitAll((final SNode uc) -> {
      g.add("usecase " + SPropertyOperations.getString(uc, PROPS.name$MnvL));
      g.add("url of " + SPropertyOperations.getString(uc, PROPS.name$MnvL) + " is " + g.createLink(uc));
      ListSequence.fromList(SNodeOperations.getNodeDescendants(uc, CONCEPTS.UseCaseActiveActor$S6, false, new SAbstractConcept[]{})).visitAll((aa) -> g.add(UseCaseActiveActor__BehaviorDescriptor.asString_id5DCgtXuHhpE.invoke(aa) + " -- " + SPropertyOperations.getString(uc, PROPS.name$MnvL)));
      ListSequence.fromList(SNodeOperations.getNodeDescendants(uc, CONCEPTS.UseCasePassiveActor$En, false, new SAbstractConcept[]{})).visitAll((pa) -> g.add(SPropertyOperations.getString(uc, PROPS.name$MnvL) + " -- " + UseCasePassiveActor__BehaviorDescriptor.asString_id5DCgtXuHhr9.invoke(pa)));
    });
    g.add("}");
    ListSequence.fromList(SNodeOperations.getNodeDescendants(owningReq, CONCEPTS.UseCaseExtension$77, false, new SAbstractConcept[]{})).visitAll((it) -> g.add(SPropertyOperations.getString(SLinkOperations.getTarget(it, LINKS.usecase$a_JS), PROPS.name$MnvL) + " <|- " + SPropertyOperations.getString(SNodeOperations.getNodeAncestor(it, CONCEPTS.UseCase$8$, false, false), PROPS.name$MnvL)));
    ListSequence.fromList(SNodeOperations.getNodeDescendants(owningReq, CONCEPTS.UseCaseInclude$$1, false, new SAbstractConcept[]{})).visitAll((it) -> g.add(SPropertyOperations.getString(SLinkOperations.getTarget(it, LINKS.usecase$vjXR), PROPS.name$MnvL) + " <. " + SPropertyOperations.getString(SNodeOperations.getNodeAncestor(it, CONCEPTS.UseCase$8$, false, false), PROPS.name$MnvL) + ": <<includes>>"));
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept Requirement$sS = MetaAdapterFactory.getConcept(0xe865cad27cc8437aL, 0x951a665bcbcb8b1aL, 0x795de87bb67288a5L, "com.mbeddr.cc.requirements.structure.Requirement");
    /*package*/ static final SConcept UseCaseActiveActor$S6 = MetaAdapterFactory.getConcept(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x5a6841df5eb486a1L, "com.mbeddr.cc.requirements.scenarios.structure.UseCaseActiveActor");
    /*package*/ static final SConcept Actor$uk = MetaAdapterFactory.getConcept(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x4fb6ca5209786882L, "com.mbeddr.cc.requirements.scenarios.structure.Actor");
    /*package*/ static final SConcept UseCasePassiveActor$En = MetaAdapterFactory.getConcept(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x5a6841df5eb4db4bL, "com.mbeddr.cc.requirements.scenarios.structure.UseCasePassiveActor");
    /*package*/ static final SConcept Component$GQ = MetaAdapterFactory.getConcept(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x4fb6ca520978688bL, "com.mbeddr.cc.requirements.scenarios.structure.Component");
    /*package*/ static final SConcept UseCase$8$ = MetaAdapterFactory.getConcept(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x5a6841df5eb457e3L, "com.mbeddr.cc.requirements.scenarios.structure.UseCase");
    /*package*/ static final SConcept UseCaseExtension$77 = MetaAdapterFactory.getConcept(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x5a6841df5eb486abL, "com.mbeddr.cc.requirements.scenarios.structure.UseCaseExtension");
    /*package*/ static final SConcept UseCaseInclude$$1 = MetaAdapterFactory.getConcept(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x5a6841df5eb5f676L, "com.mbeddr.cc.requirements.scenarios.structure.UseCaseInclude");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink participant$aufo = MetaAdapterFactory.getContainmentLink(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x5a6841df5eb486a1L, 0x5a6841df5eb486a3L, "participant");
    /*package*/ static final SReferenceLink participant$paZn = MetaAdapterFactory.getReferenceLink(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x4fb6ca52097ae40aL, 0x4fb6ca52097ae40bL, "participant");
    /*package*/ static final SContainmentLink participant$xR8R = MetaAdapterFactory.getContainmentLink(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x5a6841df5eb4db4bL, 0x5a6841df5eb4db4cL, "participant");
    /*package*/ static final SReferenceLink usecase$a_JS = MetaAdapterFactory.getReferenceLink(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x5a6841df5eb486abL, 0x5a6841df5eb486adL, "usecase");
    /*package*/ static final SReferenceLink usecase$vjXR = MetaAdapterFactory.getReferenceLink(0xd6714220402d48cbL, 0xa4a288223c6257f6L, 0x5a6841df5eb5f676L, 0x5a6841df5eb5f677L, "usecase");
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
  }
}

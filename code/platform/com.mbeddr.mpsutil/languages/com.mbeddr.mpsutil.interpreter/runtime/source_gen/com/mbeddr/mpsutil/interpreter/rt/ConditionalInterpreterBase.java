package com.mbeddr.mpsutil.interpreter.rt;

/*Generated by MPS */

import jetbrains.mps.logging.Logger;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.List;

public abstract class ConditionalInterpreterBase extends InterpreterBase implements IConditionalInterpreter {
  private static final Logger LOG = Logger.getLogger(ConditionalInterpreterBase.class);

  public boolean isEvaluable(SNode node, IContext context) {
    if ((node == null)) {
      return false;
    }

    context.setMapTypeProvider(this);

    if (LOG.isTraceLevel()) {
      LOG.trace("node: " + SNodeOperations.present(node) + " evaluators: " + listEvaluators());
    }

    for (IConditionalEvaluator evaluator : ListSequence.fromList(listEvaluators())) {
      if (LOG.isTraceLevel()) {
        LOG.trace("trying evaluator " + evaluator);
      }
      if (evaluator.matchesEvaluatorTypeless(node, context)) {
        boolean result = evaluator.isEvaluable(node, context);
        if (LOG.isTraceLevel()) {
          LOG.trace("result: " + result);
        }
        return result;
      }
    }

    return false;
  }

  @Override
  public List<? extends IConditionalEvaluator> listEvaluators() {
    return ((List<? extends IConditionalEvaluator>) super.listEvaluators());
  }
}

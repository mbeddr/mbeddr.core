package com.mbeddr.mpsutil.interpreter.rt;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.core.behavior.BaseConcept__BehaviorDescriptor;
import jetbrains.mps.smodel.SNodePointer;

public class InterpreterRuntimeException extends InterpreterBaseException {
  private String evaluator;
  private SNode node;
  private String message;
  private ComputationTrace failedTrace;

  public InterpreterRuntimeException(String evaluator, SNode node, ComputationTrace trace) {
    super();
    this.evaluator = evaluator;
    this.node = node;
    populateMessage();
    failedTrace = trace;
  }

  public InterpreterRuntimeException(String evaluator, SNode node, Throwable throwable, ComputationTrace trace) {
    super(throwable);
    this.evaluator = evaluator;
    this.node = node;
    this.failedTrace = trace;
    populateMessage();
  }

  public ComputationTrace getFailureTrace() {
    return this.failedTrace;
  }

  public void populateMessage() {
    this.message = "Exception in " + evaluator + " on '" + BaseConcept__BehaviorDescriptor.getDetailedPresentation_id22G2W3WJ92t.invoke(node) + "' (" + new SNodePointer(node).toString() + ")" + ":" + ((getCause() != null ? "\n" + getCause().getMessage() : " (unknown)"));
  }

  @Override
  public String getMessage() {
    return message;
  }
}

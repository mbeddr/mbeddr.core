package com.mbeddr.mpsutil.interpreter.rt;

/*Generated by MPS */

import java.util.Map;
import org.jetbrains.mps.openapi.model.SNode;

/**
 * Bundles together various services required for evaluation, to make it easier to pass them around.
 * Accessible via {@code evaluator} expression.
 */
public class Evaluator {
  public final IContext context;
  public final ICoverageAnalyzer coverage;
  public final ComputationTrace trace;
  public Map<SNode, Object> getEnv() {
    return ((Map<SNode, Object>) context.getEnvironment());
  }

  public Evaluator(IContext context, ICoverageAnalyzer coverage, ComputationTrace trace) {
    this.context = context;
    this.coverage = coverage;
    this.trace = trace;
  }

  public Object evaluate(SNode node) {
    return evaluate(node, false);
  }

  public Object evaluate(SNode node, boolean stopOnStop) {
    return context.getRootInterpreter().evaluate(node, context, coverage, trace, stopOnStop);
  }
}

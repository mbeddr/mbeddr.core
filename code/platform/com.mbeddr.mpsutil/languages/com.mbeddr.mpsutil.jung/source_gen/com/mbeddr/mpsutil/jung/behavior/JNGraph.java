package com.mbeddr.mpsutil.jung.behavior;

/*Generated by MPS */

import java.util.Map;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.HashMap;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import java.awt.Paint;
import java.awt.Shape;
import java.awt.Color;
import java.util.Set;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import java.util.HashSet;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.baseLanguage.tuples.runtime.Tuples;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.baseLanguage.tuples.runtime.MultiTuple;

public class JNGraph {

  protected Map<String, JNEdge> edges = MapSequence.fromMap(new HashMap<String, JNEdge>());
  protected Map<String, JNNode> vertices = MapSequence.fromMap(new HashMap<String, JNNode>());
  protected String title;
  public _FunctionTypes._return_P1_E0<? extends Paint, ? super JNNode> vertexFillColor;
  public _FunctionTypes._return_P1_E0<? extends Paint, ? super JNNode> vertexDrawColor;
  public _FunctionTypes._return_P1_E0<? extends Integer, ? super JNNode> vertexSize;
  public _FunctionTypes._return_P1_E0<? extends Shape, ? super JNNode> vertexShape;
  public _FunctionTypes._return_P1_E0<? extends Color, ? super JNEdge> edgeColor;
  public _FunctionTypes._return_P1_E0<? extends Float, ? super JNEdge> edgeWidth;
  public _FunctionTypes._return_P1_E0<? extends Integer, ? super JNEdge> edgeDash;
  public _FunctionTypes._return_P1_E0<? extends Shape, ? super JNEdge> arrowShape;
  public _FunctionTypes._return_P1_E0<? extends String, ? super Long> continuousAxisOneFormatter;
  public long continuousAxisOneCalibrationFactor = 1;
  public double continuousAxisOneOvermaxFactor = 0.1;
  protected JNLayout layout;
  private Object primarySelection;
  private int initialSize;


  private Set<String> vertexKinds = SetSequence.fromSet(new HashSet<String>());
  private Set<String> edgeKinds = SetSequence.fromSet(new HashSet<String>());


  protected JNHighlightMode highlightMode;

  protected JNGraph() {
  }


  public JNGraph(String title, JNGraphLayout layout, JNHighlightMode highlightMode, int initialSize) {
    this.title = title;
    this.layout = layout;
    this.highlightMode = highlightMode;
    this.initialSize = initialSize;
  }

  public JNNode createVertex(SNode n, String name) {
    if (MapSequence.fromMap(vertices).containsKey(name)) {
      return MapSequence.fromMap(vertices).get(name);
    }
    JNNode jn = new JNNode(n, name, this);
    MapSequence.fromMap(vertices).put(name, jn);
    return jn;
  }

  public JNNode createVertex(SNode n, String name, int characteriticSize, String kind) {
    if (MapSequence.fromMap(vertices).containsKey(name)) {
      return MapSequence.fromMap(vertices).get(name);
    }
    JNNode jn = new JNNode(n, name, this, characteriticSize, kind);
    MapSequence.fromMap(vertices).put(name, jn);
    SetSequence.fromSet(vertexKinds).addElement(kind);
    return jn;
  }

  public JNNode createVertex(SNode n, String name, int characteriticSize, String[] kinds) {
    if (MapSequence.fromMap(vertices).containsKey(name)) {
      return MapSequence.fromMap(vertices).get(name);
    }
    JNNode jn = new JNNode(n, name, this, characteriticSize, kinds);
    MapSequence.fromMap(vertices).put(name, jn);
    for (String k : kinds) {
      SetSequence.fromSet(vertexKinds).addElement(k);
    }
    return jn;
  }

  public JNEdge createEdge(String sourceID, String targetID, SNode n, String kind) {
    return createEdge(sourceID, targetID, n, kind, 0);
  }

  public JNEdge createDirectedEdge(String sourceID, String targetID, SNode n, String kind) {
    return createDirectedEdge(sourceID, targetID, n, kind, 0);
  }

  public JNEdge createEdge(String sourceID, String targetID, SNode n, String kind, int weight) {
    String edgeID = sourceID + "___" + kind + "___" + targetID;
    SetSequence.fromSet(edgeKinds).addElement(kind);
    if (MapSequence.fromMap(edges).containsKey(edgeID)) {
      return MapSequence.fromMap(edges).get(edgeID);
    }
    JNEdge edge = new JNEdge(this, sourceID, targetID, n, edgeID, false, weight, kind);
    edge.setTooltip(sourceID + " --" + kind + "--> " + targetID);
    MapSequence.fromMap(edges).put(edgeID, edge);
    return edge;
  }


  public JNEdge createDirectedEdge(String sourceID, String targetID, SNode n, String kind, int weight) {
    String edgeID = sourceID + "___" + kind + "___" + targetID;
    SetSequence.fromSet(edgeKinds).addElement(kind);
    if (MapSequence.fromMap(edges).containsKey(edgeID)) {
      return MapSequence.fromMap(edges).get(edgeID);
    }
    JNEdge edge = new JNEdge(this, sourceID, targetID, n, edgeID, true, weight, kind);
    edge.setTooltip(sourceID + " --" + kind + "--> " + targetID);
    MapSequence.fromMap(edges).put(edgeID, edge);
    return edge;
  }

  public Iterable<JNNode> vertices() {
    return MapSequence.fromMap(this.vertices).values();
  }

  public Iterable<JNEdge> edges() {
    return MapSequence.fromMap(this.edges).values();
  }

  public JNNode getVertexByID(String id) {
    return MapSequence.fromMap(this.vertices).get(id);
  }

  public String title() {
    return this.title;
  }


  public Tuples._2<Integer, Integer> characteristicVertexSizes() {
    int min = Integer.MAX_VALUE;
    int max = 0;
    for (JNNode v : Sequence.fromIterable(vertices())) {
      int cs = v.characteristicSize();
      if (cs < min) {
        min = cs;
      }
      if (cs > max) {
        max = cs;
      }
    }
    return MultiTuple.<Integer,Integer>from(min, max);
  }

  public Tuples._2<Integer, Integer> numberOfOutEdges() {
    int min = Integer.MAX_VALUE;
    int max = 0;
    for (JNNode v : Sequence.fromIterable(vertices())) {
      int cs = v.numberOfOutEdges();
      if (cs < min) {
        min = cs;
      }
      if (cs > max) {
        max = cs;
      }
    }
    return MultiTuple.<Integer,Integer>from(min, max);
  }

  public Tuples._2<Integer, Integer> edgeWeights() {
    int min = Integer.MAX_VALUE;
    int max = 0;
    for (JNEdge e : Sequence.fromIterable(edges())) {
      int cs = e.weight();
      if (cs < min) {
        min = cs;
      }
      if (cs > max) {
        max = cs;
      }
    }
    return MultiTuple.<Integer,Integer>from(min, max);
  }

  public Tuples._2<Long, Long> continuousAxisOneValues() {
    long min = Long.MAX_VALUE;
    long max = 0;
    for (JNNode v : Sequence.fromIterable(vertices())) {
      long cs = v.continuousAxisOneValue();
      if (cs >= 0) {
        if (cs < min) {
          min = cs;
        }
        if (cs > max) {
          max = cs;
        }
      }
    }
    return MultiTuple.<Long,Long>from(min, max);
  }

  public JNLayout getLayout() {
    return this.layout;
  }

  public Color getPrimarSelectionColor() {
    return new Color(238, 50, 118);
  }

  public Color getSecondarySelectionColor() {
    return new Color(238, 160, 118);
  }

  public JNHighlightMode getHighlightMode() {
    return this.highlightMode;
  }

  public JNGraph refresh(SNode provider) {
    return IJGraphProvider__BehaviorDescriptor.getGraph_id5yCuRHcaxm8.invoke(provider);
  }

  public void setPrimarySelectedNode(Object n) {
    this.primarySelection = n;
  }

  public Object getPrimarySelectedNode() {
    return this.primarySelection;
  }

  public boolean isPrimarySelection(Object n) {
    return this.primarySelection == n;
  }

  public Iterable<String> vertexKinds() {
    return this.vertexKinds;
  }

  public Iterable<String> edgeKinds() {
    return this.edgeKinds;
  }

  public int getInitialSize() {
    return this.initialSize;
  }

  public void addKindToNode(JNNode n, String s) {
    n.addKind(s);
    SetSequence.fromSet(this.vertexKinds).addElement(s);
  }

}

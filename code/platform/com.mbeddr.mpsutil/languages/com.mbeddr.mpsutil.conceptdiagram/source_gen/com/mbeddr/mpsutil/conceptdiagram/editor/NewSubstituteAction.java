package com.mbeddr.mpsutil.conceptdiagram.editor;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.SubstituteAction;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SModelOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.smodel.action.SNodeFactoryOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import org.jetbrains.mps.openapi.language.SProperty;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;

public class NewSubstituteAction implements SubstituteAction {
  private final SNode conceptNode;
  private final SNode diagram;

  public NewSubstituteAction(SNode conceptNode, SNode diagram) {
    this.conceptNode = conceptNode;
    this.diagram = diagram;
  }

  public SNode getIconNode(String p0) {
    return conceptNode;
  }
  public boolean isReferentPresentation() {
    return false;
  }
  public SNode getSourceNode() {
    return null;
  }
  public Object getParameterObject() {
    return null;
  }
  public SNode getOutputConcept() {
    return conceptNode;
  }
  public SNode getActionType(String p0) {
    return null;
  }
  public SNode getActionType(String p0, EditorCell p1) {
    return null;
  }
  public String getMatchingText(String pattern) {
    return "create new " + SPropertyOperations.getString(conceptNode, PROPS.name$MnvL);
  }
  public String getVisibleMatchingText(String pattern) {
    return getMatchingText(pattern);
  }
  public String getDescriptionText(String pattern) {
    return null;
  }
  public boolean canSubstituteStrictly(String pattern) {
    return canSubstitute(pattern);
  }
  public boolean canSubstitute(String pattern) {
    return true;
  }
  public SNode substitute(@Nullable EditorContext editorContext, String pattern) {
    SNode result = (SNode) SModelOperations.addRootNode(SNodeOperations.getModel(diagram), SNodeFactoryOperations.createNewNode(SNodeFactoryOperations.asInstanceConcept(conceptNode), null));
    SLinkOperations.setTarget(SLinkOperations.addNewChild(diagram, LINKS.contents$BgwK, null), LINKS.concept$p3Wi, result);
    return result;
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink contents$BgwK = MetaAdapterFactory.getContainmentLink(0x9d1cb9f82ae04895L, 0x91c8ff32e8afc27dL, 0x2490cbe4d990691aL, 0x2490cbe4d996c41cL, "contents");
    /*package*/ static final SReferenceLink concept$p3Wi = MetaAdapterFactory.getReferenceLink(0x9d1cb9f82ae04895L, 0x91c8ff32e8afc27dL, 0x2490cbe4d9d63687L, 0x2490cbe4d9d63688L, "concept");
  }
}

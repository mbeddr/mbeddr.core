package com.mbeddr.core.base.editor;

/*Generated by MPS */

import jetbrains.mps.nodeEditor.AbstractCellProvider;
import java.awt.Color;
import org.jetbrains.mps.openapi.model.SNode;
import java.awt.Graphics;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.nodeEditor.cells.EditorCell;
import jetbrains.mps.nodeEditor.cells.ParentSettings;
import jetbrains.mps.openapi.editor.cells.CellTraversalUtil;
import java.util.Iterator;
import java.util.List;
import jetbrains.mps.openapi.editor.selection.Selection;

public abstract class AbstractBracketCell extends AbstractCellProvider {
  protected Color color;

  public AbstractBracketCell(SNode node) {
    super(node);
  }

  public AbstractBracketCell(SNode node, Color c) {
    super(node);
    this.color = c;
  }

  protected void prepareGraphicsColor(Graphics g) {
    if (color != null) {
      g.setColor(color);
    } else {
      g.setColor(Color.LIGHT_GRAY);
    }
  }

  protected boolean shouldPaintBracket(EditorContext context, EditorCell self, ParentSettings parentSettings) {
    EditorCell selectedCell = (EditorCell) context.getSelectedCell();
    if (selectedCell == null) {
      selectedCell = ((EditorCell) check_k53yh0_a0a0a0b0i(check_k53yh0_a0a0a0a1a8(check_k53yh0_a0a0a0a0b0i(context.getSelectionManager().getSelection()))));
    }
    jetbrains.mps.openapi.editor.cells.EditorCell containingBigCell = CellTraversalUtil.getContainingBigCell(self);

    if (selectedCell == null || containingBigCell == null) {
      return false;
    }

    return self == selectedCell || containingBigCell == selectedCell || CellTraversalUtil.isAncestor(containingBigCell, selectedCell);
  }
  private static jetbrains.mps.openapi.editor.cells.EditorCell check_k53yh0_a0a0a0b0i(Iterator<jetbrains.mps.openapi.editor.cells.EditorCell> checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.next();
    }
    return null;
  }
  private static Iterator<jetbrains.mps.openapi.editor.cells.EditorCell> check_k53yh0_a0a0a0a1a8(List<jetbrains.mps.openapi.editor.cells.EditorCell> checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.iterator();
    }
    return null;
  }
  private static List<jetbrains.mps.openapi.editor.cells.EditorCell> check_k53yh0_a0a0a0a0b0i(Selection checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getSelectedCells();
    }
    return null;
  }
}

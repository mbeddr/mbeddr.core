package com.mbeddr.core.base.scripts;

/*Generated by MPS */

import jetbrains.mps.lang.script.runtime.BaseMigrationScript;
import jetbrains.mps.lang.script.runtime.AbstractMigrationRefactoring;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.jetbrains.annotations.Nullable;
import org.jetbrains.mps.openapi.model.SNodeReference;
import org.jetbrains.mps.openapi.persistence.PersistenceFacade;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SProperty;

public final class removeNullWords_MigrationScript extends BaseMigrationScript {
  public removeNullWords_MigrationScript() {
    super("MBEDDR-DOC: remove null words");
    this.addRefactoring(new AbstractMigrationRefactoring() {
      @Override
      public String getName() {
        return "remove null words";
      }
      @Override
      public String getAdditionalInfo() {
        return "remove null words";
      }
      @Override
      public SAbstractConcept getApplicableConcept() {
        return CONCEPTS.Word$5r;
      }
      @Override
      public boolean isApplicableInstanceNode(SNode node) {
        return SPropertyOperations.getString(node, PROPS.escapedValue$2Lqz) == null || isEmptyString(SPropertyOperations.getString(node, PROPS.escapedValue$2Lqz));
      }
      @Override
      public void doUpdateInstanceNode(SNode node) {
        SNodeOperations.deleteNode(node);
      }
      @Override
      public boolean isShowAsIntention() {
        return false;
      }
    });
  }

  @Nullable
  @Override
  public SNodeReference getScriptNode() {
    return PersistenceFacade.getInstance().createNodeReference("r:4524c84e-9433-4889-9361-102b85681cc1(com.mbeddr.core.base.scripts)/1969649511497760204");
  }
  private static boolean isEmptyString(String str) {
    return str == null || str.isEmpty();
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept Word$5r = MetaAdapterFactory.getConcept(0x92d2ea165a424fdfL, 0xa676c7604efe3504L, 0x237c8da86a9f2e0cL, "de.slisson.mps.richtext.structure.Word");
  }

  private static final class PROPS {
    /*package*/ static final SProperty escapedValue$2Lqz = MetaAdapterFactory.getProperty(0x92d2ea165a424fdfL, 0xa676c7604efe3504L, 0x237c8da86a9f2e0cL, 0x237c8da86a9f2e0eL, "escapedValue");
  }
}

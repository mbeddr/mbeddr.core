package com.mbeddr.core.base.behavior;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.Sequence;
import java.util.Set;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import java.util.HashSet;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public class ControlledNameHelper {

  public static Iterable<SNode> visibleControlledNonConstantNames(SNode context) {
    return Sequence.fromIterable(allVisibleControlledNames(context)).where((it) -> !((boolean) IControlledName__BehaviorDescriptor.isConstantLike_id4k0bDztYlgO.invoke(it)));
  }

  public static Iterable<SNode> visibleControlledConstantNames(SNode context) {
    return Sequence.fromIterable(allVisibleControlledNames(context)).where((it) -> (boolean) IControlledName__BehaviorDescriptor.isConstantLike_id4k0bDztYlgO.invoke(it));
  }

  public static Iterable<SNode> allVisibleControlledNames(SNode context) {
    Set<SNode> result = SetSequence.fromSet(new HashSet<SNode>());

    SNode visibleElementProvider = SNodeOperations.getNodeAncestor(context, CONCEPTS.IVisibleElementProvider$$O, true, false);

    if (visibleElementProvider != null) {
      Iterable<SNode> controlledNameProviders = SNodeOperations.ofConcept(Sequence.fromIterable(IVisibleElementProvider__BehaviorDescriptor.visibleContentsOfType_id6clJcrJXo2_.invoke(visibleElementProvider, CONCEPTS.IControlledNameProvider$PE.getDeclarationNode())).toList(), CONCEPTS.IControlledNameProvider$PE);

      Iterable<SNode> controlledNames = SNodeOperations.ofConcept(Sequence.fromIterable(IVisibleElementProvider__BehaviorDescriptor.visibleContentsOfType_id6clJcrJXo2_.invoke(visibleElementProvider, CONCEPTS.IControlledName$hu.getDeclarationNode())).toList(), CONCEPTS.IControlledName$hu);

      SetSequence.fromSet(result).addSequence(Sequence.fromIterable(controlledNameProviders).translate((it) -> (Iterable<SNode>) IControlledNameProvider__BehaviorDescriptor.getControlledNames_id2GIWVTRLmpu.invoke(it)));
      SetSequence.fromSet(result).addSequence(Sequence.fromIterable(controlledNames));
    }

    return result;
  }

  private static final class CONCEPTS {
    /*package*/ static final SInterfaceConcept IVisibleElementProvider$$O = MetaAdapterFactory.getInterfaceConcept(0xd4280a54f6df4383L, 0xaa41d1b2bffa7eb1L, 0x6315bcc6eff580a3L, "com.mbeddr.core.base.structure.IVisibleElementProvider");
    /*package*/ static final SInterfaceConcept IControlledNameProvider$PE = MetaAdapterFactory.getInterfaceConcept(0xd4280a54f6df4383L, 0xaa41d1b2bffa7eb1L, 0x2b2ef3be77c5647aL, "com.mbeddr.core.base.structure.IControlledNameProvider");
    /*package*/ static final SInterfaceConcept IControlledName$hu = MetaAdapterFactory.getInterfaceConcept(0xd4280a54f6df4383L, 0xaa41d1b2bffa7eb1L, 0x2b2ef3be77b50fd6L, "com.mbeddr.core.base.structure.IControlledName");
  }
}

package com.mbeddr.mpsutil.plantuml.node.behavior;

/*Generated by MPS */

import jetbrains.mps.project.Project;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.ide.httpsupport.runtime.base.HttpSupportUtil;

public class VisGraph {
  private Project project;
  private StringBuilder code = new StringBuilder();
  private String title = "unnamed";
  private boolean isEffectivelyEmpty = false;

  /**
   * 
   * @deprecated  VisGraph no longer uses project argument, use no-arg cons instead.
   */
  @Deprecated
  public VisGraph(Project project) {
    this();
    this.project = project;
  }

  public VisGraph() {
  }

  public void setCode(String c) {
    code = new StringBuilder(c);
  }

  public String getTitle() {
    return title;
  }

  public void setTitle(String title) {
    this.title = title;
  }



  public void add(String s) {
    code.append(s);
    code.append("\n");
  }
  public boolean isEffectivelyEmpty() {
    return isEffectivelyEmpty;
  }
  public void setEffectivelyEmpty(boolean b) {
    isEffectivelyEmpty = b;
  }
  public String toString() {
    String c = code.toString().trim();
    if (!(c.startsWith("@"))) {
      c = "@startuml\n" + c + "\n" + "@enduml";
    }
    return c;
  }

  public String createLink(SNode node) {
    return createLink(node, "");
  }

  public String createLink(SNode node, String title) {
    if ((title != null && title.length() > 0)) {
      return "[[" + createUrl(node) + " " + title + "]]";
    } else {
      return "[[" + createUrl(node) + "]]";
    }
  }

  public String createUrl(SNode node) {
    return HttpSupportUtil.getURL(node);
  }

  /**
   * 
   * @deprecated  VisGraph doesn't need project itself, and would not supply one
   * @return may return {@code null}
   */
  @Deprecated
  public Project getProject() {
    return project;
  }
}

package com.mbeddr.mpsutil.hyperlink.runtime;

/*Generated by MPS */

import jetbrains.mps.logging.Logger;
import java.awt.Desktop;
import java.net.URI;

public class HyperlinkUtil {
  private static final Logger LOG = Logger.getLogger(HyperlinkUtil.class);
  public static final HyperlinkUtil INSTANCE = new HyperlinkUtil();

  private HyperlinkUtil() {
  }

  /**
   * Will open a provided URL via the OS' default browser.
   * No-op, if the provided URL is null or empty.
   * 
   * @param url any URL that should be opened in the OS' default browser
   */
  public void openInBrowser(String url) {
    try {
      Desktop d = (Desktop.isDesktopSupported() ? Desktop.getDesktop() : null);
      if (d != null && (url != null && url.length() > 0)) {
        if (url.startsWith("mailto:")) {
          d.browse(new URI(url));
          return;
        }
        if (!(url.startsWith("http://")) && !(url.startsWith("https://"))) {
          url = "http://" + url;
        }
        d.browse(new URI(url));
      }
    } catch (Exception ex) {
      if (LOG.isErrorLevel()) {
        LOG.error("Failed to open URL: " + url, ex);
      }
    }
  }
}

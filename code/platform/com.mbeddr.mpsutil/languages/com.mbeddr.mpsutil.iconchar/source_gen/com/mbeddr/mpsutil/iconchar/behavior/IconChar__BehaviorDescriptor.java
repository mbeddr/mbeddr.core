package com.mbeddr.mpsutil.iconchar.behavior;

/*Generated by MPS */

import jetbrains.mps.core.aspects.behaviour.BaseBHDescriptor;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.core.aspects.behaviour.api.SMethod;
import jetbrains.mps.core.aspects.behaviour.SMethodBuilder;
import jetbrains.mps.core.aspects.behaviour.SJavaCompoundTypeImpl;
import jetbrains.mps.core.aspects.behaviour.AccessPrivileges;
import org.jetbrains.mps.openapi.model.SNode;
import java.io.File;
import jetbrains.mps.project.AbstractModule;
import java.awt.image.BufferedImage;
import java.awt.Graphics2D;
import java.awt.Color;
import java.util.List;
import java.util.Arrays;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import java.util.Random;
import org.apache.commons.lang3.StringUtils;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.vfs.IFile;
import java.awt.geom.Ellipse2D;
import java.awt.BasicStroke;
import org.apache.commons.io.FileUtils;
import javax.imageio.ImageIO;
import java.io.IOException;
import java.awt.RenderingHints;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.geom.Rectangle2D;
import jetbrains.mps.core.aspects.behaviour.api.SConstructor;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.core.aspects.behaviour.api.BHMethodNotFoundException;
import org.jetbrains.mps.openapi.language.SProperty;
import org.jetbrains.mps.openapi.language.SConcept;

public final class IconChar__BehaviorDescriptor extends BaseBHDescriptor {
  private static final SAbstractConcept CONCEPT = MetaAdapterFactory.getConcept(0xe840b8ae64d94b5bL, 0xb3b4eca3f222d4daL, 0x7b0afcb877ece1f6L, "com.mbeddr.mpsutil.iconchar.structure.IconChar");

  public static final SMethod<Void> init_id3TQBmq3qB5f = new SMethodBuilder<Void>(new SJavaCompoundTypeImpl(Void.class)).name("init").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4500957941220405583L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2();
  public static final SMethod<Void> setDefaultValues_id3TQBmq3qBde = new SMethodBuilder<Void>(new SJavaCompoundTypeImpl(Void.class)).name("setDefaultValues").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4500957941220406094L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2();
  public static final SMethod<Void> setIconPath_id3TQBmq3p9ZJ = new SMethodBuilder<Void>(new SJavaCompoundTypeImpl(Void.class)).name("setIconPath").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4500957941220024303L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2();
  public static final SMethod<SNode> getConceptDeclaration_id3TQBmq3qpDT = new SMethodBuilder<SNode>(new SJavaCompoundTypeImpl((Class<SNode>) ((Class) Object.class))).name("getConceptDeclaration").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4500957941220350585L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2();
  public static final SMethod<String> concatIconFileName_id3TQBmq3qtXH = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("concatIconFileName").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4500957941220368237L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2();
  public static final SMethod<File> getIconFile_id3TQBmq3qdeX = new SMethodBuilder<File>(new SJavaCompoundTypeImpl(File.class)).name("getIconFile").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4500957941220299709L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2();
  public static final SMethod<File> getIconFile_id3TQBmq3rnNb = new SMethodBuilder<File>(new SJavaCompoundTypeImpl(File.class)).name("getIconFile").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4500957941220605131L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2(SMethodBuilder.createJavaParameter(AbstractModule.class, ""));
  public static final SMethod<BufferedImage> createIconImage_id5L7BF$C77MJ = new SMethodBuilder<BufferedImage>(new SJavaCompoundTypeImpl(BufferedImage.class)).name("createIconImage").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(6649457892914920623L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2();
  public static final SMethod<Void> writeIconImage_id5L7BF$C8g1T = new SMethodBuilder<Void>(new SJavaCompoundTypeImpl(Void.class)).name("writeIconImage").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(6649457892915216505L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2(SMethodBuilder.createJavaParameter(BufferedImage.class, ""), SMethodBuilder.createJavaParameter(AbstractModule.class, ""));
  public static final SMethod<Void> setGraphicsHints_id608oBgqv2dI = new SMethodBuilder<Void>(new SJavaCompoundTypeImpl(Void.class)).name("setGraphicsHints").modifiers(0, AccessPrivileges.PROTECTED).concept(CONCEPT).baseMethodId(6919889078254838638L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2(SMethodBuilder.createJavaParameter(Graphics2D.class, ""));
  public static final SMethod<BufferedImage> createCharImage_id5L7BF$C6Jgf = new SMethodBuilder<BufferedImage>(new SJavaCompoundTypeImpl(BufferedImage.class)).name("createCharImage").modifiers(0, AccessPrivileges.PROTECTED).concept(CONCEPT).baseMethodId(6649457892914820111L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2(SMethodBuilder.createJavaParameter(Integer.TYPE, ""), SMethodBuilder.createJavaParameter(Integer.TYPE, ""), SMethodBuilder.createJavaParameter(Double.TYPE, ""), SMethodBuilder.createJavaParameter(Double.TYPE, ""));
  public static final SMethod<Integer> findCharMinX_id5L7BF$C6PQd = new SMethodBuilder<Integer>(new SJavaCompoundTypeImpl(Integer.TYPE)).name("findCharMinX").modifiers(0, AccessPrivileges.PROTECTED).concept(CONCEPT).baseMethodId(6649457892914847117L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2(SMethodBuilder.createJavaParameter(Integer.TYPE, ""), SMethodBuilder.createJavaParameter(Integer.TYPE, ""), SMethodBuilder.createJavaParameter(BufferedImage.class, ""));
  public static final SMethod<Integer> findCharMaxX_id5L7BF$C6W0S = new SMethodBuilder<Integer>(new SJavaCompoundTypeImpl(Integer.TYPE)).name("findCharMaxX").modifiers(0, AccessPrivileges.PROTECTED).concept(CONCEPT).baseMethodId(6649457892914872376L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2(SMethodBuilder.createJavaParameter(Integer.TYPE, ""), SMethodBuilder.createJavaParameter(Integer.TYPE, ""), SMethodBuilder.createJavaParameter(BufferedImage.class, ""));
  public static final SMethod<Integer> findCharMinY_id5L7BF$C6TaA = new SMethodBuilder<Integer>(new SJavaCompoundTypeImpl(Integer.TYPE)).name("findCharMinY").modifiers(0, AccessPrivileges.PROTECTED).concept(CONCEPT).baseMethodId(6649457892914860710L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2(SMethodBuilder.createJavaParameter(Integer.TYPE, ""), SMethodBuilder.createJavaParameter(Integer.TYPE, ""), SMethodBuilder.createJavaParameter(BufferedImage.class, ""));
  public static final SMethod<Integer> findCharMaxY_id5L7BF$C6X6A = new SMethodBuilder<Integer>(new SJavaCompoundTypeImpl(Integer.TYPE)).name("findCharMaxY").modifiers(0, AccessPrivileges.PROTECTED).concept(CONCEPT).baseMethodId(6649457892914876838L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2(SMethodBuilder.createJavaParameter(Integer.TYPE, ""), SMethodBuilder.createJavaParameter(Integer.TYPE, ""), SMethodBuilder.createJavaParameter(BufferedImage.class, ""));
  public static final SMethod<Boolean> isPixelUsed_id608oBgqljgu = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("isPixelUsed").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(6919889078252287006L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2(SMethodBuilder.createJavaParameter(BufferedImage.class, ""), SMethodBuilder.createJavaParameter(Integer.TYPE, ""), SMethodBuilder.createJavaParameter(Integer.TYPE, ""));
  public static final SMethod<Color> getTransparentColor_id5L7BF$C6GwK = new SMethodBuilder<Color>(new SJavaCompoundTypeImpl(Color.class)).name("getTransparentColor").modifiers(1, AccessPrivileges.PROTECTED).concept(CONCEPT).baseMethodId(6649457892914808880L).languageId(0xb3b4eca3f222d4daL, 0xe840b8ae64d94b5bL).build2();

  private static final List<SMethod<?>> BH_METHODS = Arrays.<SMethod<?>>asList(init_id3TQBmq3qB5f, setDefaultValues_id3TQBmq3qBde, setIconPath_id3TQBmq3p9ZJ, getConceptDeclaration_id3TQBmq3qpDT, concatIconFileName_id3TQBmq3qtXH, getIconFile_id3TQBmq3qdeX, getIconFile_id3TQBmq3rnNb, createIconImage_id5L7BF$C77MJ, writeIconImage_id5L7BF$C8g1T, setGraphicsHints_id608oBgqv2dI, createCharImage_id5L7BF$C6Jgf, findCharMinX_id5L7BF$C6PQd, findCharMaxX_id5L7BF$C6W0S, findCharMinY_id5L7BF$C6TaA, findCharMaxY_id5L7BF$C6X6A, isPixelUsed_id608oBgqljgu, getTransparentColor_id5L7BF$C6GwK);

  private static void ___init___(@NotNull SNode __thisNode__) {
  }

  /*package*/ static void init_id3TQBmq3qB5f(@NotNull SNode __thisNode__) {
    IconChar__BehaviorDescriptor.setDefaultValues_id3TQBmq3qBde.invoke(__thisNode__);
    IconChar__BehaviorDescriptor.setIconPath_id3TQBmq3p9ZJ.invoke(__thisNode__);
  }
  /*package*/ static void setDefaultValues_id3TQBmq3qBde(@NotNull SNode __thisNode__) {
    SPropertyOperations.assign(__thisNode__, PROPS.char$etDn, SPropertyOperations.getString(IconChar__BehaviorDescriptor.getConceptDeclaration_id3TQBmq3qpDT.invoke(__thisNode__), PROPS.name$MnvL).substring(0, 1));
    int backgroundColor = new Random().nextInt(0x1000000);
    String backgroundColorText = "#" + StringUtils.leftPad(Integer.toHexString(backgroundColor), 6, '0');
    SPropertyOperations.assign(__thisNode__, PROPS.backgroundColor$eumq, backgroundColorText);
    SPropertyOperations.assign(__thisNode__, PROPS.borderColor$h3Kr, backgroundColorText);
    SPropertyOperations.assign(__thisNode__, PROPS.textColor$e$sO, "#" + StringUtils.leftPad(Integer.toHexString(~(backgroundColor) & 0xffffff), 6, '0'));
  }
  /*package*/ static void setIconPath_id3TQBmq3p9ZJ(@NotNull SNode __thisNode__) {
    SPropertyOperations.assign(IconChar__BehaviorDescriptor.getConceptDeclaration_id3TQBmq3qpDT.invoke(__thisNode__), PROPS.iconPath$WAri, "${module}/icons/" + IconChar__BehaviorDescriptor.concatIconFileName_id3TQBmq3qtXH.invoke(__thisNode__));
  }
  /*package*/ static SNode getConceptDeclaration_id3TQBmq3qpDT(@NotNull SNode __thisNode__) {
    return SNodeOperations.getNodeAncestor(__thisNode__, CONCEPTS.ConceptDeclaration$gH, false, false);
  }
  /*package*/ static String concatIconFileName_id3TQBmq3qtXH(@NotNull SNode __thisNode__) {
    return SPropertyOperations.getString(IconChar__BehaviorDescriptor.getConceptDeclaration_id3TQBmq3qpDT.invoke(__thisNode__), PROPS.name$MnvL) + "CharIcon.png";
  }
  /*package*/ static File getIconFile_id3TQBmq3qdeX(@NotNull SNode __thisNode__) {
    return ((File) IconChar__BehaviorDescriptor.getIconFile_id3TQBmq3rnNb.invoke(__thisNode__, ((AbstractModule) SNodeOperations.getModel(__thisNode__).getModule())));
  }
  /*package*/ static File getIconFile_id3TQBmq3rnNb(@NotNull SNode __thisNode__, AbstractModule abstractModule) {
    IFile outputPathIFile = abstractModule.getModuleSourceDir();
    File outputPath = new File(outputPathIFile.getPath() + File.separator + "icons");

    return new File(outputPath, IconChar__BehaviorDescriptor.concatIconFileName_id3TQBmq3qtXH.invoke(__thisNode__));
  }
  /*package*/ static BufferedImage createIconImage_id5L7BF$C77MJ(@NotNull SNode __thisNode__) {
    final int WIDTH = 16;
    final int HEIGHT = 16;

    final double CHAR_FRACTION = 0.95;

    final double CIRCLE_FRATION = 0.95;

    final int BORDER_WIDTH_DIVISOR = 16;

    double centerX = WIDTH / 2;
    double centerY = HEIGHT / 2;

    BufferedImage bi = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);
    Graphics2D g = bi.createGraphics();
    try {
      IconChar__BehaviorDescriptor.setGraphicsHints_id608oBgqv2dI.invoke(__thisNode__, g);

      g.setBackground(IconChar__BehaviorDescriptor.getTransparentColor_id5L7BF$C6GwK.invoke(__thisNode__.getConcept()));

      // circles
      double circleWidth = WIDTH * CIRCLE_FRATION;
      double circleHeight = HEIGHT * CIRCLE_FRATION;
      double circleX = centerX - (circleWidth / 2);
      double circleY = centerY - (circleHeight / 2);

      // background circle
      g.setColor(Color.decode(SPropertyOperations.getString(__thisNode__, PROPS.backgroundColor$eumq)));
      g.fill(new Ellipse2D.Double(circleX, circleY, circleWidth, circleHeight));

      // border circle
      float borderLineWidth = WIDTH / BORDER_WIDTH_DIVISOR;
      g.setStroke(new BasicStroke(borderLineWidth));
      g.setColor(Color.decode(SPropertyOperations.getString(__thisNode__, PROPS.borderColor$h3Kr)));
      g.draw(new Ellipse2D.Double(circleX, circleY, circleWidth, circleHeight));

      // prepare character image (required to preciclely place it in the middle)
      int widthCharImage = WIDTH * 2;
      int heightCharImage = HEIGHT * 2;

      int desiredCharWidth = ((int) (WIDTH * CHAR_FRACTION));
      int desiredCharHeight = ((int) (HEIGHT * CHAR_FRACTION));
      desiredCharWidth += desiredCharWidth % 2;
      desiredCharHeight += desiredCharHeight % 2;
      BufferedImage charImage = IconChar__BehaviorDescriptor.createCharImage_id5L7BF$C6Jgf.invoke(__thisNode__, ((int) widthCharImage), ((int) heightCharImage), ((double) desiredCharWidth), ((double) desiredCharHeight));

      // find area actually drawn on in character image
      int minX = ((int) IconChar__BehaviorDescriptor.findCharMinX_id5L7BF$C6PQd.invoke(__thisNode__, ((int) widthCharImage), ((int) heightCharImage), charImage));
      int maxX = ((int) IconChar__BehaviorDescriptor.findCharMaxX_id5L7BF$C6W0S.invoke(__thisNode__, ((int) widthCharImage), ((int) heightCharImage), charImage));
      int charWidth = maxX - minX;
      charWidth -= charWidth % 2;

      int maxY = ((int) IconChar__BehaviorDescriptor.findCharMaxY_id5L7BF$C6X6A.invoke(__thisNode__, ((int) widthCharImage), ((int) heightCharImage), charImage));
      int minY = ((int) IconChar__BehaviorDescriptor.findCharMinY_id5L7BF$C6TaA.invoke(__thisNode__, ((int) widthCharImage), ((int) heightCharImage), charImage));
      int charHeight = maxY - minY;
      charHeight -= charHeight % 2;

      // position character in final image
      int charPosX = ((int) (centerX - (charWidth / 2)));
      int charPosY = ((int) (centerY - (charHeight / 2)));

      g.drawImage(charImage, charPosX, charPosY, charPosX + charWidth, charPosY + charHeight, minX, minY, maxX, maxY, null);

      return bi;
    } finally {
    }
  }
  /*package*/ static void writeIconImage_id5L7BF$C8g1T(@NotNull SNode __thisNode__, BufferedImage bi, AbstractModule abstractModule) {
    try {
      File iconFile = IconChar__BehaviorDescriptor.getIconFile_id3TQBmq3rnNb.invoke(__thisNode__, abstractModule);
      FileUtils.forceMkdir(iconFile.getParentFile());
      ImageIO.write(bi, "png", iconFile);
    } catch (IOException e) {
      throw new RuntimeException("Exception while writing iconChar image", e);
    }
  }
  /*package*/ static void setGraphicsHints_id608oBgqv2dI(@NotNull SNode __thisNode__, Graphics2D g) {
    g.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
    g.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);
    g.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    g.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);
    if (SPropertyOperations.getBoolean(__thisNode__, PROPS.antialias$RWYJ)) {
      g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
      g.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
      g.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
    }
  }
  /*package*/ static BufferedImage createCharImage_id5L7BF$C6Jgf(@NotNull SNode __thisNode__, int widthCharImage, int heightCharImage, double desiredCharWidth, double desiredCharHeight) {
    final int POINTS_PER_INCH = 72;
    final int PIXELS_PER_INCH = 96;

    BufferedImage charImage = new BufferedImage(widthCharImage, heightCharImage, BufferedImage.TYPE_INT_ARGB);
    Graphics2D gChar = charImage.createGraphics();
    try {
      IconChar__BehaviorDescriptor.setGraphicsHints_id608oBgqv2dI.invoke(__thisNode__, gChar);

      int charHeightInPoint = ((int) (desiredCharHeight * POINTS_PER_INCH / PIXELS_PER_INCH));
      Font font = new Font(Font.DIALOG, Font.BOLD, charHeightInPoint);

      gChar.setFont(font);

      String msg = SPropertyOperations.getString(__thisNode__, PROPS.char$etDn);

      FontMetrics metrics = gChar.getFontMetrics();

      Rectangle2D stringBounds = metrics.getStringBounds(msg, gChar);

      double stringWidth = stringBounds.getWidth();
      double stringHeight = stringBounds.getHeight();

      double scaleFactor;
      if (stringWidth >= stringHeight) {
        scaleFactor = desiredCharWidth / stringWidth;
      } else {
        scaleFactor = desiredCharHeight / stringHeight;
      }

      gChar.setBackground(IconChar__BehaviorDescriptor.getTransparentColor_id5L7BF$C6GwK.invoke(__thisNode__.getConcept()));
      gChar.setColor(Color.decode(SPropertyOperations.getString(__thisNode__, PROPS.textColor$e$sO)));
      gChar.scale(scaleFactor, scaleFactor);
      gChar.drawString(msg, ((float) (widthCharImage / 2 / scaleFactor)), ((float) (heightCharImage / 2 / scaleFactor)));

      return charImage;
    } finally {
    }
  }
  /*package*/ static int findCharMinX_id5L7BF$C6PQd(@NotNull SNode __thisNode__, int widthCharImage, int heightCharImage, BufferedImage charImage) {
    int minX = 0;

outerLoop:
    for (int i = 0; i < heightCharImage; i++) {
      for (int j = 0; j < widthCharImage; j++) {
        if (((boolean) IconChar__BehaviorDescriptor.isPixelUsed_id608oBgqljgu.invoke(__thisNode__, charImage, ((int) i), ((int) j)))) {
          minX = i;
          break outerLoop;
        }
      }
    }

    return minX;
  }
  /*package*/ static int findCharMaxX_id5L7BF$C6W0S(@NotNull SNode __thisNode__, int widthCharImage, int heightCharImage, BufferedImage charImage) {
    int maxX = widthCharImage;

outerLoop:
    for (int i = heightCharImage - 1; i >= 0; i--) {
      for (int j = 0; j < widthCharImage; j++) {
        if (((boolean) IconChar__BehaviorDescriptor.isPixelUsed_id608oBgqljgu.invoke(__thisNode__, charImage, ((int) i), ((int) j)))) {
          maxX = i + 1;
          break outerLoop;
        }
      }
    }

    return maxX;
  }
  /*package*/ static int findCharMinY_id5L7BF$C6TaA(@NotNull SNode __thisNode__, int widthCharImage, int heightCharImage, BufferedImage charImage) {
    int minY = 0;

outerLoop:
    for (int i = 0; i < widthCharImage; i++) {
      for (int j = 0; j < heightCharImage; j++) {
        if (((boolean) IconChar__BehaviorDescriptor.isPixelUsed_id608oBgqljgu.invoke(__thisNode__, charImage, ((int) j), ((int) i)))) {
          minY = i;
          break outerLoop;
        }
      }
    }

    return minY;
  }
  /*package*/ static int findCharMaxY_id5L7BF$C6X6A(@NotNull SNode __thisNode__, int widthCharImage, int heightCharImage, BufferedImage charImage) {
    int maxY = heightCharImage;

outerLoop:
    for (int i = widthCharImage - 1; i >= 0; i--) {
      for (int j = 0; j < heightCharImage; j++) {
        if (((boolean) IconChar__BehaviorDescriptor.isPixelUsed_id608oBgqljgu.invoke(__thisNode__, charImage, ((int) j), ((int) i)))) {
          maxY = i + 1;
          break outerLoop;
        }
      }
    }

    return maxY;
  }
  /*package*/ static boolean isPixelUsed_id608oBgqljgu(@NotNull SNode __thisNode__, BufferedImage img, int x, int y) {
    final int MIN_ALPHA = 50;
    int color = img.getRGB(x, y);
    int alpha = ((color >> 24) & 0xff);
    return (color != 0) && (alpha > MIN_ALPHA);
  }
  /*package*/ static Color getTransparentColor_id5L7BF$C6GwK(@NotNull SAbstractConcept __thisConcept__) {
    return new Color(0, 0, 0, 0xff);
  }

  /*package*/ IconChar__BehaviorDescriptor() {
  }

  @Override
  protected void initNode(@NotNull SNode node, @NotNull SConstructor constructor, @Nullable Object[] parameters) {
    ___init___(node);
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SNode node, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      case 0:
        init_id3TQBmq3qB5f(node);
        return null;
      case 1:
        setDefaultValues_id3TQBmq3qBde(node);
        return null;
      case 2:
        setIconPath_id3TQBmq3p9ZJ(node);
        return null;
      case 3:
        return (T) ((SNode) getConceptDeclaration_id3TQBmq3qpDT(node));
      case 4:
        return (T) ((String) concatIconFileName_id3TQBmq3qtXH(node));
      case 5:
        return (T) ((File) getIconFile_id3TQBmq3qdeX(node));
      case 6:
        return (T) ((File) getIconFile_id3TQBmq3rnNb(node, (AbstractModule) parameters[0]));
      case 7:
        return (T) ((BufferedImage) createIconImage_id5L7BF$C77MJ(node));
      case 8:
        writeIconImage_id5L7BF$C8g1T(node, (BufferedImage) parameters[0], (AbstractModule) parameters[1]);
        return null;
      case 9:
        setGraphicsHints_id608oBgqv2dI(node, (Graphics2D) parameters[0]);
        return null;
      case 10:
        return (T) ((BufferedImage) createCharImage_id5L7BF$C6Jgf(node, ((int) (Integer) parameters[0]), ((int) (Integer) parameters[1]), ((double) (Double) parameters[2]), ((double) (Double) parameters[3])));
      case 11:
        return (T) ((Integer) findCharMinX_id5L7BF$C6PQd(node, ((int) (Integer) parameters[0]), ((int) (Integer) parameters[1]), (BufferedImage) parameters[2]));
      case 12:
        return (T) ((Integer) findCharMaxX_id5L7BF$C6W0S(node, ((int) (Integer) parameters[0]), ((int) (Integer) parameters[1]), (BufferedImage) parameters[2]));
      case 13:
        return (T) ((Integer) findCharMinY_id5L7BF$C6TaA(node, ((int) (Integer) parameters[0]), ((int) (Integer) parameters[1]), (BufferedImage) parameters[2]));
      case 14:
        return (T) ((Integer) findCharMaxY_id5L7BF$C6X6A(node, ((int) (Integer) parameters[0]), ((int) (Integer) parameters[1]), (BufferedImage) parameters[2]));
      case 15:
        return (T) ((Boolean) isPixelUsed_id608oBgqljgu(node, (BufferedImage) parameters[0], ((int) (Integer) parameters[1]), ((int) (Integer) parameters[2])));
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SAbstractConcept concept, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      case 16:
        return (T) ((Color) getTransparentColor_id5L7BF$C6GwK(concept));
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @NotNull
  @Override
  public List<SMethod<?>> getDeclaredMethods() {
    return BH_METHODS;
  }

  @NotNull
  @Override
  public SAbstractConcept getConcept() {
    return CONCEPT;
  }

  private static final class PROPS {
    /*package*/ static final SProperty char$etDn = MetaAdapterFactory.getProperty(0xe840b8ae64d94b5bL, 0xb3b4eca3f222d4daL, 0x7b0afcb877ece1f6L, 0x7b0afcb877f1364dL, "char");
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
    /*package*/ static final SProperty backgroundColor$eumq = MetaAdapterFactory.getProperty(0xe840b8ae64d94b5bL, 0xb3b4eca3f222d4daL, 0x7b0afcb877ece1f6L, 0x7b0afcb877f13650L, "backgroundColor");
    /*package*/ static final SProperty borderColor$h3Kr = MetaAdapterFactory.getProperty(0xe840b8ae64d94b5bL, 0xb3b4eca3f222d4daL, 0x7b0afcb877ece1f6L, 0x7b0afcb877f1365cL, "borderColor");
    /*package*/ static final SProperty textColor$e$sO = MetaAdapterFactory.getProperty(0xe840b8ae64d94b5bL, 0xb3b4eca3f222d4daL, 0x7b0afcb877ece1f6L, 0x7b0afcb877f13655L, "textColor");
    /*package*/ static final SProperty iconPath$WAri = MetaAdapterFactory.getProperty(0xc72da2b97cce4447L, 0x8389f407dc1158b7L, 0xf979ba0450L, 0x10e328118ddL, "iconPath");
    /*package*/ static final SProperty antialias$RWYJ = MetaAdapterFactory.getProperty(0xe840b8ae64d94b5bL, 0xb3b4eca3f222d4daL, 0x7b0afcb877ece1f6L, 0x6008627419e33005L, "antialias");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept ConceptDeclaration$gH = MetaAdapterFactory.getConcept(0xc72da2b97cce4447L, 0x8389f407dc1158b7L, 0xf979ba0450L, "jetbrains.mps.lang.structure.structure.ConceptDeclaration");
  }
}

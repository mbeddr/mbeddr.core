package com.mbeddr.mpsutil.datepicker.runtime.model;

/*Generated by MPS */

import jetbrains.mps.nodeEditor.cells.EditorCell_Property;
import jetbrains.mps.openapi.editor.EditorContext;
import com.michaelbaranov.microba.calendar.DatePicker;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.openapi.editor.cells.CellActionType;

public class EditorCell_DatePickerEntryField extends EditorCell_Property {
  private String lastModelText = "";

  public EditorCell_DatePickerEntryField(EditorContext editorContext, final DatePicker datePicker, SNode node) {
    super(editorContext, new DatePickerModelAccessor(datePicker), node);

    getModelAccessor().setEntryField(this);
    setAction(CellActionType.RIGHT, new WorkingRightCellAction(this));
    this.lastModelText = datePicker.getDateFormat().format(datePicker.getDate());
  }

  @Override
  public String getLastModelText() {
    return this.lastModelText;
  }

  protected void setLastModelText(String newText) {
    this.lastModelText = newText;
  }

  @Override
  public boolean commit() {
    getModelAccessor().setText(getLastModelText(), true);
    return super.commit();
  }

  @Override
  public DatePickerModelAccessor getModelAccessor() {
    return ((DatePickerModelAccessor) super.getModelAccessor());
  }

}

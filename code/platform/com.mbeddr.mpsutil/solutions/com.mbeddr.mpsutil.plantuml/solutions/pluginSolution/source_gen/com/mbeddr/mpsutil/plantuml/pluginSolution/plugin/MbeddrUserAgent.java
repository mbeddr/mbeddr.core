package com.mbeddr.mpsutil.plantuml.pluginSolution.plugin;

/*Generated by MPS */

import org.apache.batik.swing.svg.SVGUserAgentGUIAdapter;
import java.awt.Component;
import java.net.URL;
import java.net.InetAddress;
import java.net.HttpURLConnection;
import java.awt.Font;
import jetbrains.mps.nodeEditor.EditorSettings;
import java.awt.GraphicsEnvironment;
import jetbrains.mps.internal.collections.runtime.Sequence;

public class MbeddrUserAgent extends SVGUserAgentGUIAdapter {

  public MbeddrUserAgent(Component parent) {
    super(parent);
  }

  @Override
  public void openLink(String urlString, boolean b) {

    try {
      URL url = new URL(urlString);
      InetAddress addr = InetAddress.getByName(url.getHost());
      if (addr.isLoopbackAddress() || addr.isAnyLocalAddress()) {
        HttpURLConnection c = ((HttpURLConnection) url.openConnection());
        c.getResponseCode();
      } else {
        System.err.println("ERROR: Cannot open link, address is not local: " + urlString);
      }
    } catch (Exception e) {
      e.printStackTrace();
    }

    super.openLink(urlString, b);
  }

  @Override
  public String getDefaultFontFamily() {
    Font defaultEditorFont = EditorSettings.getInstance().getDefaultEditorFont();
    GraphicsEnvironment localGraphicsEnvironment = GraphicsEnvironment.getLocalGraphicsEnvironment();
    if (Sequence.fromIterable(Sequence.fromArray(localGraphicsEnvironment.getAvailableFontFamilyNames())).contains(defaultEditorFont.getFontName())) {
      return defaultEditorFont.getFontName() + ", sans-serif";
    } else {
      return "sans-serif";
    }
  }
}

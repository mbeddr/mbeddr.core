package com.mbeddr.mpsutil.multilingual.settings.runtime.plugin;

/*Generated by MPS */

import com.mbeddr.mpsutil.preferenceform.runtime.PreferenceFormProjectConfigurableBase;
import com.intellij.openapi.project.Project;
import com.mbeddr.mpsutil.preferenceform.runtime.PreferenceFormProjectComponentBase;
import javax.swing.Icon;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import com.mbeddr.mpsutil.preferenceform.runtime.DynamicComboBoxEntry;
import com.intellij.openapi.options.ConfigurationException;
import java.util.Objects;
import javax.swing.JPanel;
import com.mbeddr.mpsutil.multilingual.common.runtime.plugin.MultilingualCommonUtil;
import com.mbeddr.mpsutil.multilingual.common.runtime.plugin.MultilingualLanguageProvider;
import com.mbeddr.mpsutil.preferenceform.runtime.AbstractPreferenceFormConfigurable;
import javax.swing.JLabel;
import jetbrains.mps.smodel.ModelAccess;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import com.mbeddr.mpsutil.multilingual.common.runtime.plugin.ILanguageProvider;
import jetbrains.mps.smodel.structure.ExtensionPoint;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.smodel.MPSModuleRepository;
import jetbrains.mps.ide.MPSCoreComponents;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPointerOperations;
import jetbrains.mps.smodel.SNodePointer;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import java.util.Vector;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.annotations.NonNls;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SProperty;

public class MultilingualSettings_Configurable extends PreferenceFormProjectConfigurableBase {

  public MultilingualSettings_Configurable(Project project, PreferenceFormProjectComponentBase preferenceFormComponent) {
    super(project, preferenceFormComponent);
  }

  @Override
  public MultilingualSettings_PreferencesComponent getPreferenceFormComponent() {
    return ((MultilingualSettings_PreferencesComponent) super.getPreferenceFormComponent());
  }

  @Override
  public MultilingualSettings_PreferencesComponent.MyState getStateObject() {
    return ((MultilingualSettings_PreferencesComponent.MyState) super.getStateObject());
  }

  @Override
  public String getDisplayName() {
    return "Multilingual Settings";
  }

  public Icon getIcon() {
    return this.icon;
  }

  @Override
  public boolean isModified() {
    if (isModified_CheckBoxPreferenceFormProperty1934708319409044073(this, getStateObject(), ((JCheckBox) this.findControl("1934708319409044073")))) {
      return true;
    }
    if (isModified_CheckBoxPreferenceFormProperty8201243288561189975(this, getStateObject(), ((JCheckBox) this.findControl("8201243288561189975")))) {
      return true;
    }
    if (isModified_DynamicComboBoxPreferenceFormProperty8201243288562376365(this, getStateObject(), ((JComboBox) this.findControl("8201243288562376365")))) {
      return true;
    }

    return false;
  }
  protected boolean isModified_CheckBoxPreferenceFormProperty1934708319409044073(MultilingualSettings_Configurable preferenceForm, MultilingualSettings_PreferencesComponent.MyState stateObject, JCheckBox control) {
    return !(control.isSelected()) == stateObject.showTranslations;
  }
  protected boolean isModified_CheckBoxPreferenceFormProperty8201243288561189975(MultilingualSettings_Configurable preferenceForm, MultilingualSettings_PreferencesComponent.MyState stateObject, JCheckBox control) {
    return !(control.isSelected()) == stateObject.showTranslationsIntentionEnabled;
  }
  protected boolean isModified_DynamicComboBoxPreferenceFormProperty8201243288562376365(MultilingualSettings_Configurable preferenceForm, MultilingualSettings_PreferencesComponent.MyState stateObject, JComboBox control) {
    return !(((DynamicComboBoxEntry) control.getSelectedItem()).getKey().equals(stateObject.currentLanguage));
  }

  @Override
  public void apply() throws ConfigurationException {
    apply_CheckBoxPreferenceFormProperty1934708319409044073(this, getStateObject(), ((JCheckBox) this.findControl("1934708319409044073")));
    apply_CheckBoxPreferenceFormProperty8201243288561189975(this, getStateObject(), ((JCheckBox) this.findControl("8201243288561189975")));
    apply_DynamicComboBoxPreferenceFormProperty8201243288562376365(this, getStateObject(), ((JComboBox) this.findControl("8201243288562376365")));

    getPreferenceFormComponent().saveState();
  }
  protected void apply_CheckBoxPreferenceFormProperty1934708319409044073(MultilingualSettings_Configurable preferenceForm, MultilingualSettings_PreferencesComponent.MyState stateObject, JCheckBox control) {
    {
      boolean checked = control.isSelected();
      stateObject.showTranslations = checked;
    }
  }
  protected void apply_CheckBoxPreferenceFormProperty8201243288561189975(MultilingualSettings_Configurable preferenceForm, MultilingualSettings_PreferencesComponent.MyState stateObject, JCheckBox control) {
    {
      boolean checked = control.isSelected();
      stateObject.showTranslationsIntentionEnabled = checked;
    }
  }
  protected void apply_DynamicComboBoxPreferenceFormProperty8201243288562376365(MultilingualSettings_Configurable preferenceForm, MultilingualSettings_PreferencesComponent.MyState stateObject, JComboBox control) {
    {
      String key = ((DynamicComboBoxEntry) control.getSelectedItem()).getKey();
      stateObject.currentLanguage = key;
    }
  }

  @Override
  public void reset() {
    reset_CheckBoxPreferenceFormProperty1934708319409044073(this, getStateObject(), ((JCheckBox) this.findControl("1934708319409044073")));
    reset_CheckBoxPreferenceFormProperty8201243288561189975(this, getStateObject(), ((JCheckBox) this.findControl("8201243288561189975")));
    reset_DynamicComboBoxPreferenceFormProperty8201243288562376365(this, getStateObject(), ((JComboBox) this.findControl("8201243288562376365")));
  }
  protected void reset_CheckBoxPreferenceFormProperty1934708319409044073(MultilingualSettings_Configurable preferenceForm, MultilingualSettings_PreferencesComponent.MyState stateObject, JCheckBox control) {
    control.setSelected(((boolean) stateObject.showTranslations));
  }
  protected void reset_CheckBoxPreferenceFormProperty8201243288561189975(MultilingualSettings_Configurable preferenceForm, MultilingualSettings_PreferencesComponent.MyState stateObject, JCheckBox control) {
    control.setSelected(((boolean) stateObject.showTranslationsIntentionEnabled));
  }
  protected void reset_DynamicComboBoxPreferenceFormProperty8201243288562376365(MultilingualSettings_Configurable preferenceForm, MultilingualSettings_PreferencesComponent.MyState stateObject, JComboBox control) {
    {
      int itemCount = control.getItemCount();
      int selectedIndex = 0;
      String resetId = ((String) stateObject.currentLanguage());
      for (int i = 0; i < itemCount; i++) {
        DynamicComboBoxEntry item = ((DynamicComboBoxEntry) control.getItemAt(i));
        if (Objects.equals(resetId, item.getKey())) {
          selectedIndex = i;
          break;
        }
      }
      control.setSelectedIndex(selectedIndex);
    }
  }

  @Override
  protected void init() {
    init_CheckBoxPreferenceFormProperty1934708319409044073(this, this.jComponent);
    init_CheckBoxPreferenceFormProperty8201243288561189975(this, this.jComponent);
    init_DynamicComboBoxPreferenceFormProperty8201243288562376365(this, this.jComponent);
  }
  protected void init_CheckBoxPreferenceFormProperty1934708319409044073(MultilingualSettings_Configurable preferenceForm, JPanel formComponent) {
    {
      JCheckBox control = new JCheckBox(MultilingualCommonUtil.retrieveTranslation("ShowTranslationsGlobally", "Show Translations Globally", new ShowTranslationsResourceBundleBundleClass().getResourceBundle(MultilingualLanguageProvider.getInstance().getCurrentLanguageLocale())));
      control.putClientProperty(AbstractPreferenceFormConfigurable.CONTROL_CLIENT_PROPERTY_KEY, "1934708319409044073");
      JLabel label = new JLabel();
      label.setLabelFor(control);
      formComponent.add(control);
      formComponent.add(label);
    }
  }
  protected void init_CheckBoxPreferenceFormProperty8201243288561189975(MultilingualSettings_Configurable preferenceForm, JPanel formComponent) {
    {
      JCheckBox control = new JCheckBox(MultilingualCommonUtil.retrieveTranslation("EnableShowTranslationsIntention", "Enable \"Show Translations\" Intention", new ShowTranslationsResourceBundleBundleClass().getResourceBundle(MultilingualLanguageProvider.getInstance().getCurrentLanguageLocale())));
      control.putClientProperty(AbstractPreferenceFormConfigurable.CONTROL_CLIENT_PROPERTY_KEY, "8201243288561189975");
      JLabel label = new JLabel();
      label.setLabelFor(control);
      formComponent.add(control);
      formComponent.add(label);
    }
  }
  protected void init_DynamicComboBoxPreferenceFormProperty8201243288562376365(MultilingualSettings_Configurable preferenceForm, final JPanel formComponent) {
    ModelAccess.instance().runReadAction(() -> {
      JLabel label = new JLabel(MultilingualCommonUtil.retrieveTranslation("CurrentLanguage", "Current Language", new ShowTranslationsResourceBundleBundleClass().getResourceBundle(MultilingualLanguageProvider.getInstance().getCurrentLanguageLocale())));
      List<DynamicComboBoxEntry> values = ListSequence.fromListWithValues(new ArrayList<DynamicComboBoxEntry>(), ((_FunctionTypes._return_P0_E0<List<DynamicComboBoxEntry>>) () -> {

        Iterable<ILanguageProvider> langs = new ExtensionPoint<ILanguageProvider>("com.mbeddr.mpsutil.multilingual.common.runtime.MULTILINGUAL_PROVIDERS").getObjects();
        if (Sequence.fromIterable(langs).isEmpty()) {
          MPSModuleRepository moduleRepository = MPSCoreComponents.getInstance().getPlatform().findComponent(MPSModuleRepository.class);
          return ListSequence.fromList(SLinkOperations.getChildren(SPointerOperations.resolveNode(new SNodePointer("r:28cd7e84-4784-462c-804c-1dae92004ef9(com.mbeddr.mpsutil.multilingual.common.languageRegistry)", "2510545900186942258"), moduleRepository), LINKS.languages$oFFz)).select((it) -> new DynamicComboBoxEntry(SPropertyOperations.getString(it, PROPS.languageCode$o_oz) + "_" + SPropertyOperations.getString(it, PROPS.countryCode$oEyT), SPropertyOperations.getString(it, PROPS.name$MnvL))).toList();
        }
        return Sequence.fromIterable(langs).translate((it) -> it.getLanguages()).select((it) -> new DynamicComboBoxEntry(SPropertyOperations.getString(it, PROPS.languageCode$o_oz) + "_" + SPropertyOperations.getString(it, PROPS.countryCode$oEyT), SPropertyOperations.getString(it, PROPS.name$MnvL))).toList();
      }).invoke());
      JComboBox control = new JComboBox(new Vector(values));
      control.putClientProperty(AbstractPreferenceFormConfigurable.CONTROL_CLIENT_PROPERTY_KEY, "8201243288562376365");
      label.setLabelFor(control);
      formComponent.add(label);
      formComponent.add(control);
    });
  }

  @Override
  public String getHelpTopic() {
    return "Multilingual_Settings";
  }

  @NotNull
  @NonNls
  @Override
  public String getId() {
    return "8201243288561188945";
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink languages$oFFz = MetaAdapterFactory.getContainmentLink(0x23f985f2965f4af1L, 0xaee8a32677429514L, 0x7e347dff5959fb1L, 0x7e347dff5959fb2L, "languages");
  }

  private static final class PROPS {
    /*package*/ static final SProperty countryCode$oEyT = MetaAdapterFactory.getProperty(0x23f985f2965f4af1L, 0xaee8a32677429514L, 0x7e347dff5959facL, 0x7e347dff5959faeL, "countryCode");
    /*package*/ static final SProperty languageCode$o_oz = MetaAdapterFactory.getProperty(0x23f985f2965f4af1L, 0xaee8a32677429514L, 0x7e347dff5959facL, 0x7e347dff5959fadL, "languageCode");
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
  }
}

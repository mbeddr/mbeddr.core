package com.mbeddr.mpsutil.interpreter.plugin.plugin;

/*Generated by MPS */

import jetbrains.mps.plugins.part.ApplicationPluginPart;
import jetbrains.mps.classloading.DeployListener;
import java.util.Set;
import jetbrains.mps.module.ReloadableModule;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.mps.openapi.util.ProgressMonitor;
import com.mbeddr.mpsutil.interpreter.rt.InterpreterEvaluationHelper;
import jetbrains.mps.ide.MPSCoreComponents;
import com.intellij.openapi.application.ApplicationManager;

public class InterpreterCachePlugin_AppPluginPart extends ApplicationPluginPart {
  private DeployListener deployListener = new DeployListener() {
    public void onUnloaded(Set<ReloadableModule> p0, @NotNull ProgressMonitor p1) {
      InterpreterEvaluationHelper.clearInterpreterCache();
    }
    public void onLoaded(Set<ReloadableModule> p0, @NotNull ProgressMonitor p1) {
    }
  };
  public InterpreterCachePlugin_AppPluginPart() {
  }
  @Override
  public void init() {
    MPSCoreComponents mpsCoreComponents = ApplicationManager.getApplication().getComponent(MPSCoreComponents.class);
    mpsCoreComponents.getClassLoaderManager().addListener(InterpreterCachePlugin_AppPluginPart.this.deployListener);
  }
  @Override
  public void dispose() {
    MPSCoreComponents mpsCoreComponents = ApplicationManager.getApplication().getComponent(MPSCoreComponents.class);
    mpsCoreComponents.getClassLoaderManager().removeListener(InterpreterCachePlugin_AppPluginPart.this.deployListener);
  }
}

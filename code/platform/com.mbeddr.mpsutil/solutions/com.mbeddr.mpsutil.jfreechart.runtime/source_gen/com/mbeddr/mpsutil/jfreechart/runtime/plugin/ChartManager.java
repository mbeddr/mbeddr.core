package com.mbeddr.mpsutil.jfreechart.runtime.plugin;

/*Generated by MPS */

import jetbrains.mps.project.Project;
import jetbrains.mps.ide.project.ProjectHelper;
import jetbrains.mps.plugins.projectplugins.ProjectPluginManager;
import jetbrains.mps.openapi.editor.EditorContext;
import org.jfree.chart.JFreeChart;
import com.intellij.openapi.application.ApplicationManager;
import org.jetbrains.annotations.Nullable;
import org.jfree.chart.ChartPanel;
import jetbrains.mps.ide.tools.BaseTool;

public class ChartManager {

  public static ChartManager getInstance(Project mpsProject) {
    com.intellij.openapi.project.Project ideaProject = ProjectHelper.toIdeaProject(mpsProject);
    ChartTool_Tool tool = ProjectPluginManager.getInstance(ideaProject).getTool(ChartTool_Tool.class);
    return tool.getChartManager();
  }

  public static ChartManager getInstance(EditorContext editorContext) {
    return getInstance(editorContext.getOperationContext().getProject());
  }

  private ChartTool_Tool myTool;

  public ChartManager(ChartTool_Tool tool) {
    myTool = tool;
  }

  public void setChart(JFreeChart chart) {
    myTool.setChart(chart);
    ApplicationManager.getApplication().invokeLater(() -> myTool.openTool(true));
  }

  @Nullable
  public ChartPanel getChartPanel() {
    return myTool.getChartPanel();
  }

  public BaseTool getToolWindow() {
    return myTool;
  }
}

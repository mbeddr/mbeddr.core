package com.mbeddr.mpsutil.ecore.ui.plugin;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SModel;
import javax.swing.JFileChooser;
import javax.swing.filechooser.FileFilter;
import javax.swing.filechooser.FileNameExtensionFilter;
import java.io.File;
import com.mbeddr.mpsutil.ecoreimporter.runtime.importerruntime.EcoreModelExporter;
import org.eclipse.emf.common.util.URI;

/**
 * 
 * @deprecated  use EcoreImporterUI
 */
@Deprecated
public class EcoreModelExporterUI {
  /**
   * 
   * @deprecated  use EcoreImporterUI.exportEcoreModel()
   */
  @Deprecated
  public static void exportEcoreModel(SModel currModel) {
    JFileChooser fileChooser = new JFileChooser();
    FileFilter fileFilter = new FileNameExtensionFilter("Ecore/Xcore files", "ecore", "xcore");
    fileChooser.setFileFilter(fileFilter);
    int result = fileChooser.showOpenDialog(null);
    if (result == JFileChooser.APPROVE_OPTION) {
      String ecoreFilename = fileChooser.getSelectedFile().getAbsolutePath();
      File file = new File(ecoreFilename);
      String pathToStore = file.toPath().getParent().toString();
      String pathToInstance = pathToStore + File.separator + currModel.getName().getSimpleName() + "_instance.xml";

      EcoreModelExporter exporter = new EcoreModelExporter(currModel, URI.createFileURI(ecoreFilename), URI.createFileURI(pathToInstance));
      exporter.exportEcoreModel();
    }
  }

}

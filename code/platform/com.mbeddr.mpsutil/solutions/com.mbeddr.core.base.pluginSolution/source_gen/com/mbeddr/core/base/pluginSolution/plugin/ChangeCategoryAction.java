package com.mbeddr.core.base.pluginSolution.plugin;

/*Generated by MPS */

import com.intellij.openapi.actionSystem.AnAction;
import com.intellij.openapi.actionSystem.ex.CustomComponentAction;
import javax.swing.ComboBoxModel;
import javax.swing.JComponent;
import com.intellij.openapi.actionSystem.Presentation;
import javax.swing.JComboBox;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import jetbrains.mps.smodel.ModelAccess;
import com.intellij.openapi.actionSystem.AnActionEvent;

public class ChangeCategoryAction extends AnAction implements CustomComponentAction {
  private ComboBoxModel model;
  private AbstractChanceCategoryCallback callback;
  public ChangeCategoryAction(ComboBoxModel model, AbstractChanceCategoryCallback callback) {
    this.model = model;
    this.callback = callback;
  }
  public JComponent createCustomComponent(Presentation presentation) {
    final JComboBox box = new JComboBox(model);
    box.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent event) {
        final Object selectedItem = box.getSelectedItem();
        if (selectedItem != null) {
          ModelAccess.instance().runReadAction(() -> callback.categoryChanged(selectedItem.toString()));
        }
      }
    });
    return box;
  }
  public void actionPerformed(AnActionEvent event) {
  }
}

package com.mbeddr.core.base.pluginSolution.plugin;

/*Generated by MPS */

import javax.swing.tree.DefaultTreeCellRenderer;
import java.awt.Component;
import javax.swing.JTree;
import com.mbeddr.core.base.behavior.AbstractTreeViewNode;
import javax.swing.JLabel;
import javax.swing.Icon;
import com.mbeddr.core.base.behavior.TreeNodeStyle;
import java.awt.Color;
import java.awt.Font;
import jetbrains.mps.baseLanguage.closures.runtime.Wrappers;
import jetbrains.mps.smodel.ModelAccess;

public class GenericTreeCellRenderer extends DefaultTreeCellRenderer {

  /*package*/ Component dummy(JTree tree, Object value, boolean selected, boolean b1, boolean b2, int i, boolean b3) {
    Component l = super.getTreeCellRendererComponent(tree, value, selected, b1, b2, i, b3);
    if (value instanceof AbstractTreeViewNode) {
      AbstractTreeViewNode tvn = ((AbstractTreeViewNode) value);
      if (l instanceof JLabel) {
        JLabel label = ((JLabel) l);
        label.setToolTipText(tvn.getTooltipText());
        label.setText(tvn.getLabel());
        Icon icon = tvn.getIcon();
        if (icon != null) {
          label.setIcon(icon);
        }


        TreeNodeStyle style = tvn.getStyle();
        if (selected) {
          label.setForeground(Color.WHITE);
        } else {
          label.setForeground(style.getColor());
        }
        int fs = Font.PLAIN;
        if (style.isBold()) {
          fs = fs | Font.BOLD;
        }
        if (style.isItalic()) {
          fs = fs | Font.ITALIC;
        }
        label.setFont(new Font(label.getFont().getFontName(), fs, label.getFont().getSize()));

      }
    }
    return l;
  }

  @Override
  public Component getTreeCellRendererComponent(final JTree tree, final Object value, final boolean selected, final boolean b1, final boolean b2, final int i, final boolean b3) {
    final Wrappers._T<Component> res = new Wrappers._T<Component>();
    ModelAccess.instance().runReadAction(() -> res.value = dummy(tree, value, selected, b1, b2, i, b3));
    return res.value;
  }
}

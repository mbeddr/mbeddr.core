package com.mbeddr.core.base.pluginSolution.plugin;

/*Generated by MPS */

import java.util.List;
import java.util.Map;
import java.util.Set;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.HashMap;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.smodel.structure.ExtensionPoint;

public class SearchNodeFilterConfig {
  public static List<ISearchNodeFilter> getFilters() {
    Map<Set<SAbstractConcept>, ISearchNodeFilter> filterMap = MapSequence.fromMap(new HashMap<Set<SAbstractConcept>, ISearchNodeFilter>());
    for (ISearchNodeFilter filter : Sequence.fromIterable(new ExtensionPoint<ISearchNodeFilter>("com.mbeddr.core.base.pluginSolution.SearchNodeFilter").getObjects())) {
      Set<SAbstractConcept> key = filter.getApplicableConcepts();
      if (!(MapSequence.fromMap(filterMap).containsKey(key)) || (filter.getPriority() > MapSequence.fromMap(filterMap).get(key).getPriority())) {
        MapSequence.fromMap(filterMap).put(key, filter);
      }
    }
    return Sequence.fromIterable(MapSequence.fromMap(filterMap).values()).sort((a, b) -> a.getPriority(), false).toList();
  }
}

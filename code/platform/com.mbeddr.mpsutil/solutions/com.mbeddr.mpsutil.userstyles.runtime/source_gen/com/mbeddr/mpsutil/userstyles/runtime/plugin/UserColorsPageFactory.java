package com.mbeddr.mpsutil.userstyles.runtime.plugin;

/*Generated by MPS */

import com.intellij.application.options.colors.ColorAndFontPanelFactory;
import javax.swing.JLabel;
import org.jetbrains.annotations.NotNull;
import com.intellij.application.options.colors.NewColorAndFontPanel;
import com.intellij.application.options.colors.ColorAndFontOptions;
import com.intellij.application.options.colors.PreviewPanel;
import javax.swing.JComponent;
import com.intellij.application.options.colors.ColorAndFontSettingsListener;
import com.intellij.application.options.colors.ColorAndFontDescription;

public class UserColorsPageFactory implements ColorAndFontPanelFactory {

  private JLabel myDescriptionLabel = new JLabel();

  @NotNull
  @Override
  public NewColorAndFontPanel createPanel(@NotNull ColorAndFontOptions options) {
    PreviewPanel.Empty descriptionPanelCreator = new PreviewPanel.Empty() {
      @Override
      public JComponent getPanel() {
        return myDescriptionLabel;
      }
    };
    NewColorAndFontPanel panel = NewColorAndFontPanel.create(descriptionPanelCreator, "Code", options, null, null);
    panel.addDescriptionListener(new ColorAndFontSettingsListener.Abstract() {
      @Override
      public void selectedOptionChanged(Object object) {
        ColorAndFontDescription fontDescription = ((ColorAndFontDescription) object);
        String styleId = fontDescription.getType();
        UserStyleItem userStyleItem = UserStylesDescriptors.getUserStyleItem(styleId);
        String description = (userStyleItem == null ? "" : userStyleItem.getDescription());
        myDescriptionLabel.setText(description);
      }
    });
    return panel;
  }

  @NotNull
  @Override
  public String getPanelDisplayName() {
    return "Code";
  }
}

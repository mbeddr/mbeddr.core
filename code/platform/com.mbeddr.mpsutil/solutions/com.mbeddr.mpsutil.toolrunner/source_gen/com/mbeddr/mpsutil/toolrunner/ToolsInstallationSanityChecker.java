package com.mbeddr.mpsutil.toolrunner;

/*Generated by MPS */

import java.util.List;
import jetbrains.mps.smodel.structure.ExtensionPoint;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.internal.collections.runtime.Sequence;

/**
 * Checks the sanity of external tools installation
 */
public class ToolsInstallationSanityChecker {

  /**
   * Performs the check.
   */
  public static boolean check(String toolCategoryName, List<String> messages) {
    ExtensionPoint<ToolsAvailabilityChecker> toolsSanityCheckerProvider = new ExtensionPoint<ToolsAvailabilityChecker>("com.mbeddr.mpsutil.toolrunner.ToolsSanityCheckerProvider");

    ListSequence.fromList(messages).addElement("<html>");
    for (ToolsAvailabilityChecker c : Sequence.fromIterable(toolsSanityCheckerProvider.getObjects())) {
      if (c.categoryName().equals(toolCategoryName)) {
        boolean availabilityResult = c.checkAvailability(messages);
        if (!(availabilityResult)) {
          return false;
        }
      }
    }
    ListSequence.fromList(messages).addElement("</html>");

    return true;
  }
}

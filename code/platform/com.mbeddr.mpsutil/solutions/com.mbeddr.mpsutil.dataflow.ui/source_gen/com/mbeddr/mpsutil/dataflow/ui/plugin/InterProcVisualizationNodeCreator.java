package com.mbeddr.mpsutil.dataflow.ui.plugin;

/*Generated by MPS */

import jetbrains.mps.ide.dataFlow.presentation.IGraphCreator;
import jetbrains.mps.ide.dataFlow.presentation.InstructionWrapper;
import jetbrains.mps.ide.dataFlow.presentation.IBlock;
import jetbrains.mps.lang.dataFlow.framework.instructions.Instruction;
import org.jetbrains.mps.openapi.model.SNodeReference;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.smodel.SNodePointer;
import jetbrains.mps.lang.dataFlow.framework.instructions.IfJumpInstruction;
import jetbrains.mps.lang.dataFlow.framework.instructions.JumpInstruction;
import jetbrains.mps.lang.dataFlow.framework.instructions.WriteInstruction;
import jetbrains.mps.lang.dataFlow.framework.instructions.ReadInstruction;
import jetbrains.mps.lang.dataFlow.framework.instructions.RetInstruction;

public class InterProcVisualizationNodeCreator implements IGraphCreator<InstructionWrapper> {

  @Override
  public IBlock createBlock(InstructionWrapper wrapper, int x, int y, int width, int height) {
    Instruction instruction = wrapper.getInstruction();
    SNodeReference pointer;
    if (instruction.getSource() instanceof SNode) {
      pointer = new SNodePointer(((SNode) instruction.getSource()));
    } else {
      pointer = null;
    }
    String caption = instruction.toString();
    String rule = instruction.getRuleReference();
    if (instruction instanceof IfJumpInstruction) {
      return new InterProcAltBlock(instruction, x, y, width, height, pointer, caption, rule);
    } else if (instruction instanceof JumpInstruction) {
      return new InterProcJumpBlock(instruction, x, y, width, height, pointer, caption, rule);
    } else if (instruction instanceof WriteInstruction) {
      return new InterProcWriteBlock(instruction, x, y, width, height, pointer, caption, rule);
    } else if (instruction instanceof ReadInstruction) {
      return new InterProcReadBlock(instruction, x, y, width, height, pointer, caption, rule);
    } else if (instruction instanceof RetInstruction) {
      return new InterProcReturnBlock(instruction, x, y, width, height, pointer, caption, rule);
    } else {
      return new InterProcSimpleBlock(instruction, x, y, width, height, pointer, caption, rule);
    }
  }

}

package com.mbeddr.mpsutil.checkinHandler.plugin;

/*Generated by MPS */

import com.intellij.openapi.vcs.checkin.CommitCheck;
import com.intellij.openapi.vcs.checkin.CommitProblem;
import com.intellij.openapi.vcs.checkin.CommitInfo;
import org.jetbrains.annotations.NotNull;
import com.intellij.util.concurrency.annotations.RequiresEdt;
import org.jetbrains.annotations.Nullable;
import kotlin.coroutines.Continuation;

public abstract class BackgroundCheckinHandler extends BaseCheckinHandler implements CommitCheck {

  private com.mbeddr.mpsutil.checkinHandler.plugin.ExecutionOrder executionOrder;

  public BackgroundCheckinHandler(String settingsKey, boolean perProjectSettings, String label, com.mbeddr.mpsutil.checkinHandler.plugin.ExecutionOrder executionOrder) {
    super(settingsKey, perProjectSettings, label);
    this.executionOrder = executionOrder;
  }

  public abstract CommitProblem check(CommitInfo commitInfo);

  @NotNull
  @Override
  public CommitCheck.ExecutionOrder getExecutionOrder() {
    return executionOrder.get();

  }

  @RequiresEdt
  @Override
  public boolean isEnabled() {
    return this.getKeyValue();
  }

  @RequiresEdt
  @Nullable
  @Override
  public Object runCheck(@NotNull CommitInfo info, @NotNull Continuation<? super CommitProblem> continuation) {
    CommitProblem problem = check(info);
    return problem;
  }
}

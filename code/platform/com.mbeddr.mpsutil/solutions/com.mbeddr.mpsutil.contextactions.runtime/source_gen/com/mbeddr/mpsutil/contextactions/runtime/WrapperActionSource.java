package com.mbeddr.mpsutil.contextactions.runtime;

/*Generated by MPS */

import java.util.List;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.internal.collections.runtime.ListSequence;

public class WrapperActionSource implements IContextActionSource {

  private List<IContextActionSource> myWrapped;

  public WrapperActionSource(IContextActionSource... wrapped) {
    myWrapped = Sequence.fromIterable(Sequence.fromArray(wrapped)).toList();
  }

  public Iterable<IContextAction> getActions(final IContext context) {
    return ListSequence.fromList(myWrapped).where((it) -> it.isApplicable(context)).translate((it) -> it.getActions(context)).select((it) -> wrap(it));
  }

  public boolean isApplicable(IContext context) {
    return true;
  }

  protected IContextAction wrap(IContextAction action) {
    return new WrapperAction(action);
  }
  @Override
  public String getOriginalActionSourceId() {
    if (ListSequence.fromList(myWrapped).count() > 1) {
      return ListSequence.fromList(myWrapped).getElement(0).getOriginalActionSourceId();
    } else {
      return "";
    }
  }
}

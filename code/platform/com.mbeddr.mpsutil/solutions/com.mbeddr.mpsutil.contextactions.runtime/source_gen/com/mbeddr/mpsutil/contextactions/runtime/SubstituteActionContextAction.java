package com.mbeddr.mpsutil.contextactions.runtime;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.SubstituteAction;
import org.jetbrains.annotations.NotNull;
import java.util.List;
import java.util.Collections;
import javax.swing.Icon;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.ide.icons.GlobalIconManager;
import jetbrains.mps.ide.icons.IdeIcons;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.openapi.editor.EditorComponent;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public class SubstituteActionContextAction extends AbstractContextAction implements IContextAction {
  private SubstituteAction mySubstituteAction;

  public SubstituteActionContextAction(SubstituteAction substituteAction) {
    mySubstituteAction = substituteAction;
  }

  @Override
  @NotNull
  public List<String> getFolders(IContext context) {
    return Collections.<String>emptyList();
  }

  @Override
  public Icon getIcon(IContext context) {
    return getIcon("", mySubstituteAction);
  }

  @Override
  @NotNull
  public String getLabel(IContext context) {
    return mySubstituteAction.getMatchingText("");
  }

  protected static Icon getIcon(String pattern, SubstituteAction action) {
    Icon icon;
    SNode iconNode = action.getIconNode(pattern);
    if (iconNode != null) {
      icon = (SNodeOperations.isInstanceOf(iconNode, CONCEPTS.AbstractConceptDeclaration$KA) && !(action.isReferentPresentation()) ? GlobalIconManager.getInstance().getIconFor(SNodeOperations.asSConcept(SNodeOperations.cast(iconNode, CONCEPTS.AbstractConceptDeclaration$KA))) : GlobalIconManager.getInstance().getIconFor(iconNode));
    } else {
      icon = IdeIcons.DEFAULT_ICON;
    }
    return icon;
  }

  @Override
  public void execute(IContext context) {
    mySubstituteAction.substitute(check_1ly74a_a0a0a21(context.getEditorComponent()), "");
  }

  @NotNull
  public ContextActionId getId() {
    return new ContextActionId(mySubstituteAction.getClass().getName() + "#" + mySubstituteAction.getMatchingText(""));
  }
  private static EditorContext check_1ly74a_a0a0a21(EditorComponent checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getEditorContext();
    }
    return null;
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept AbstractConceptDeclaration$KA = MetaAdapterFactory.getConcept(0xc72da2b97cce4447L, 0x8389f407dc1158b7L, 0x1103553c5ffL, "jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration");
  }
}

package com.mbeddr.mpsutil.contextactions.runtime;

/*Generated by MPS */

import com.intellij.ui.SearchTextField;
import javax.swing.event.DocumentListener;
import javax.swing.event.DocumentEvent;
import java.awt.event.KeyListener;
import java.awt.event.KeyEvent;

public abstract class SearchField extends SearchTextField {

  public abstract void executeSearch(boolean next);

  public SearchField() {
    addDocumentListener(new DocumentListener() {
      @Override
      public void insertUpdate(DocumentEvent p0) {
        executeSearch(false);
      }
      @Override
      public void removeUpdate(DocumentEvent p0) {
        executeSearch(false);
      }
      @Override
      public void changedUpdate(DocumentEvent p0) {
        executeSearch(false);
      }
    });
    addKeyboardListener(new KeyListener() {
      @Override
      public void keyTyped(KeyEvent e) {
      }
      @Override
      public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_DOWN) {
          executeSearch(true);
          e.consume();
        }
        if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {
          setText("");
          e.consume();
        }
      }
      @Override
      public void keyReleased(KeyEvent e) {
      }
    });
  }

  @Override
  protected void showPopup() {
  }

}

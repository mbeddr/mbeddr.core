package com.mbeddr.mpsutil.contextactions.runtime;

/*Generated by MPS */

import com.intellij.openapi.actionSystem.ActionManager;
import com.intellij.openapi.actionSystem.AnAction;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.plugins.actions.LabelledAnchor;

public class IdeaActionSource extends AbstractActionSource implements IContextActionSource {

  private String[] myActionIds;

  public IdeaActionSource(String[] actionIds) {
    myActionIds = actionIds;
  }

  @Override
  public Iterable<IContextAction> getActions(IContext context) {
    final String folder = getFolder(context);
    final ActionManager actionManager = ActionManager.getInstance();

    Iterable<AnAction> actions = Sequence.fromIterable(Sequence.fromArray(myActionIds)).where((it) -> !(actionManager.isGroup(it))).select((it) -> actionManager.getAction(it)).where((it) -> it != null && !(it instanceof LabelledAnchor));

    return Sequence.fromIterable(actions).select((it) -> {
      IContextAction action = new IdeaAction(it, folder);
      return action;
    });
  }

  public String getFolder(IContext context) {
    return null;
  }
}

package com.mbeddr.mpsutil.margincell.runtime;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.EditorCell;
import jetbrains.mps.editor.runtime.style.StyleAttributes;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.BasicStroke;

public class MarginCellStyle {
  public int getOverlapResolutionTimeout(EditorCell contentCell) {
    return 1337;
  }

  public int getMarginLeft(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-margin-left"));
  }

  public int getConnectionMargin(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-connection-margin"));
  }

  public int getCellWidth(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-cell-width"));
  }

  public int getVerticalBound(EditorCell contentCell) {
    return contentCell.getEditorComponent().getEditorComponentSettings().getRightMargin() + 15;
  }

  public int getGap(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-gap"));
  }

  public int getBorderPadding(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-border-padding"));
  }

  public int getBorderDiameter(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-border-padding")) * 4;
  }

  public int getBorderWidth(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-border-width"));
  }

  public float getDashedLineInterval(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Float>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-dashed-line-interval"));
  }

  public Color getUnselectedOverlayColor(EditorCell contentCell) {
    return alpharize(getLineColor(contentCell).brighter().brighter(), getUnselectedOverlayAlpha(contentCell));
  }

  public int getUnselectedOverlayAlpha(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-unselected-overlay-alpha"));
  }

  public Color getSelectedOverlayColor(EditorCell contentCell) {
    return alpharize(getLineColor(contentCell).brighter().brighter(), getSelectedOverlayAlpha(contentCell));
  }

  public int getSelectedOverlayAlpha(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-selected-overlay-alpha"));
  }

  public Color getConnectionColor(EditorCell contentCell) {
    return alpharize(getLineColor(contentCell), getConnectionAlpha(contentCell));
  }

  public int getConnectionAlpha(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-connection-alpha"));
  }

  public int getConnectionWidth(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-connection-width"));
  }

  public Color getLineColor(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Color>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-line-color"));
  }

  public int getLineWidth(EditorCell contentCell) {
    return contentCell.getStyle().get(StyleAttributes.getInstance().<Integer>getAttribute("com.mbeddr.mpsutil.margincell.editor", "margincell-line-width"));
  }

  public void setupAttachmentStyle(EditorCell contentCell, Graphics graphics, boolean isSelected) {
    graphics.setColor(getLineColor(contentCell));
    if (isSelected) {
      setStroke(getLineWidth(contentCell), graphics);
    } else {
      setStroke(getLineWidth(contentCell), getDashedLineInterval(contentCell), graphics);
    }
  }

  public void setupBorderStyle(EditorCell contentCell, Graphics graphics, boolean isSelected) {
    graphics.setColor(getLineColor(contentCell));
    if (isSelected) {
      setStroke(getBorderWidth(contentCell), graphics);
    } else {
      setStroke(getBorderWidth(contentCell), getDashedLineInterval(contentCell), graphics);
    }
  }

  public void setupConnectionStyle(EditorCell contentCell, Graphics graphics, boolean isSelected) {
    graphics.setColor(getConnectionColor(contentCell));
    if (isSelected) {
      setStroke(getConnectionWidth(contentCell), graphics);
    } else {
      setStroke(getConnectionWidth(contentCell), getDashedLineInterval(contentCell), graphics);
    }
  }

  public void setupOverlayStyle(EditorCell contentCell, Graphics graphics, boolean isSelected) {
    setStroke(0, graphics);
    if (isSelected) {
      graphics.setColor(getSelectedOverlayColor(contentCell));
    } else {
      graphics.setColor(getUnselectedOverlayColor(contentCell));
    }
  }

  protected Color alpharize(Color input, int alpha) {
    return new Color(input.getRed(), input.getGreen(), input.getBlue(), alpha);
  }

  protected void setStroke(int width, Graphics graphics) {
    Graphics2D g = ((Graphics2D) graphics);
    g.setStroke(new BasicStroke(width));
  }

  protected void setStroke(int width, float dash, Graphics graphics) {
    Graphics2D g = ((Graphics2D) graphics);
    g.setStroke(new BasicStroke(width, BasicStroke.CAP_BUTT, BasicStroke.JOIN_BEVEL, dash, new float[]{dash}, 0.0f));
  }

}

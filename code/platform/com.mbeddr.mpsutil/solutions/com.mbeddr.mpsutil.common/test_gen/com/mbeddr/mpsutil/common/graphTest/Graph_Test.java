package com.mbeddr.mpsutil.common.graphTest;

/*Generated by MPS */

import jetbrains.mps.MPSLaunch;
import jetbrains.mps.lang.test.runtime.BaseTransformationTest;
import org.junit.jupiter.api.extension.RegisterExtension;
import jetbrains.mps.lang.test.runtime.TestParametersCacheExtension;
import jetbrains.mps.lang.test.runtime.TestParametersCacheBuilder;
import org.junit.jupiter.api.Test;
import jetbrains.mps.lang.test.runtime.BaseTestBody;
import jetbrains.mps.lang.test.runtime.TransformationTest;
import com.mbeddr.mpsutil.common.graph.Graph;
import org.junit.Assert;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import java.util.HashSet;

@MPSLaunch
public class Graph_Test extends BaseTransformationTest {
  @RegisterExtension
  private static final TestParametersCacheExtension ourParametersCacheExtension = new TestParametersCacheExtension(new TestParametersCacheBuilder(Graph_Test.class).projectPath("${mbeddr.github.core.home}/code/platform/com.mbeddr.mpsutil").modelRef("r:a68423c3-5b3b-473a-89a3-7910cb495020(com.mbeddr.mpsutil.common.graphTest@tests)").reopenProject(false).build());

  public Graph_Test() {
    super(ourParametersCacheExtension.getParametersCache());
  }

  @Test
  public void test_getSourcesInEmptyGraph() throws Throwable {
    new TestBody(this).test_getSourcesInEmptyGraph();
  }
  @Test
  public void test_getSources() throws Throwable {
    new TestBody(this).test_getSources();
  }
  @Test
  public void test_getSourcesInDisconnectedGraph() throws Throwable {
    new TestBody(this).test_getSourcesInDisconnectedGraph();
  }
  @Test
  public void test_getSourcesInSourcefreeGraph() throws Throwable {
    new TestBody(this).test_getSourcesInSourcefreeGraph();
  }
  @Test
  public void test_getSinksInEmptyGraph() throws Throwable {
    new TestBody(this).test_getSinksInEmptyGraph();
  }
  @Test
  public void test_getSinks() throws Throwable {
    new TestBody(this).test_getSinks();
  }
  @Test
  public void test_getSinksInDisconnectedGraph() throws Throwable {
    new TestBody(this).test_getSinksInDisconnectedGraph();
  }
  @Test
  public void test_getSinksInSinkfreeGraph() throws Throwable {
    new TestBody(this).test_getSinksInSinkfreeGraph();
  }
  @Test
  public void test_getNodeSourcesInEmptyGraph() throws Throwable {
    new TestBody(this).test_getNodeSourcesInEmptyGraph();
  }
  @Test
  public void test_getNodeSourcesOfUnknownNode() throws Throwable {
    new TestBody(this).test_getNodeSourcesOfUnknownNode();
  }
  @Test
  public void test_getNodeSources() throws Throwable {
    new TestBody(this).test_getNodeSources();
  }
  @Test
  public void test_getNodeSourcesInDisconnectedGraph() throws Throwable {
    new TestBody(this).test_getNodeSourcesInDisconnectedGraph();
  }
  @Test
  public void test_getNodeSourcesInSourcefreeGraph() throws Throwable {
    new TestBody(this).test_getNodeSourcesInSourcefreeGraph();
  }
  @Test
  public void test_getNodeTargetsInEmptyGraph() throws Throwable {
    new TestBody(this).test_getNodeTargetsInEmptyGraph();
  }
  @Test
  public void test_getNodeTargetsOfUnknownNode() throws Throwable {
    new TestBody(this).test_getNodeTargetsOfUnknownNode();
  }
  @Test
  public void test_getNodeTargets() throws Throwable {
    new TestBody(this).test_getNodeTargets();
  }
  @Test
  public void test_getNodeTargetsInDisconnectedGraph() throws Throwable {
    new TestBody(this).test_getNodeTargetsInDisconnectedGraph();
  }
  @Test
  public void test_getNodeTargetsInTargetfreeGraph() throws Throwable {
    new TestBody(this).test_getNodeTargetsInTargetfreeGraph();
  }
  @Test
  public void test_copyGraphAndChangeCopy() throws Throwable {
    new TestBody(this).test_copyGraphAndChangeCopy();
  }
  @Test
  public void test_copyGraphAndChangeOriginal() throws Throwable {
    new TestBody(this).test_copyGraphAndChangeOriginal();
  }

  /*package*/ static class TestBody extends BaseTestBody {

    /*package*/ TestBody(TransformationTest owner) {
      super(owner);
    }

    @Override
    protected void initTestNodes() {
      prepareTestNodes();
    }

    public void test_getSourcesInEmptyGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Graph<Integer> testGraph = TestBody.this.createGraph(null, null);
        Assert.assertEquals(SetSequence.fromSet(new HashSet<Integer>()), testGraph.getSources());
      });
    }
    public void test_getSources() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{3, 4, 5};
        Integer[][] edges = new Integer[][]{new Integer[]{3, 5}, new Integer[]{4, 5}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 3, 4), testGraph.getSources());
      });
    }
    public void test_getSourcesInDisconnectedGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{3, 4, 5};
        Integer[][] edges = new Integer[][]{new Integer[]{4, 5}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 3, 4), testGraph.getSources());
      });
    }
    public void test_getSourcesInSourcefreeGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{3, 4, 5};
        Integer[][] edges = new Integer[][]{new Integer[]{3, 4}, new Integer[]{4, 5}, new Integer[]{5, 3}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSet(new HashSet<Integer>()), testGraph.getSources());
      });
    }
    public void test_getSinksInEmptyGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Graph<Integer> testGraph = TestBody.this.createGraph(null, null);
        Assert.assertEquals(SetSequence.fromSet(new HashSet<Integer>()), testGraph.getSinks());
      });
    }
    public void test_getSinks() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{3, 4, 5};
        Integer[][] edges = new Integer[][]{new Integer[]{3, 4}, new Integer[]{3, 5}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 4, 5), testGraph.getSinks());
      });
    }
    public void test_getSinksInDisconnectedGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{3, 4, 5};
        Integer[][] edges = new Integer[][]{new Integer[]{3, 5}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 4, 5), testGraph.getSinks());
      });
    }
    public void test_getSinksInSinkfreeGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{3, 4, 5};
        Integer[][] edges = new Integer[][]{new Integer[]{3, 4}, new Integer[]{4, 5}, new Integer[]{5, 3}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSet(new HashSet<Integer>()), testGraph.getSinks());
      });
    }
    public void test_getNodeSourcesInEmptyGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Graph<Integer> testGraph = TestBody.this.createGraph(null, null);
        Assert.assertEquals(SetSequence.fromSet(new HashSet<Integer>()), testGraph.getSources(0));
      });
    }
    public void test_getNodeSourcesOfUnknownNode() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{3, 5};
        Integer[][] edges = new Integer[][]{new Integer[]{3, 5}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSet(new HashSet<Integer>()), testGraph.getSources(6));
      });
    }
    public void test_getNodeSources() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{5, 6, 7, 8};
        Integer[][] edges = new Integer[][]{new Integer[]{5, 7}, new Integer[]{7, 8}, new Integer[]{6, 8}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 6, 7), testGraph.getSources(8));
      });
    }
    public void test_getNodeSourcesInDisconnectedGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{1, 2, 3};
        Integer[][] edges = new Integer[][]{new Integer[]{1, 3}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 1), testGraph.getSources(3));
      });
    }
    public void test_getNodeSourcesInSourcefreeGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{3, 4, 5};
        Integer[][] edges = new Integer[][]{new Integer[]{3, 4}, new Integer[]{4, 5}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSet(new HashSet<Integer>()), testGraph.getSources(3));
      });
    }
    public void test_getNodeTargetsInEmptyGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Graph<Integer> testGraph = TestBody.this.createGraph(null, null);
        Assert.assertEquals(SetSequence.fromSet(new HashSet<Integer>()), testGraph.getTargets(0));
      });
    }
    public void test_getNodeTargetsOfUnknownNode() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{3, 5};
        Integer[][] edges = new Integer[][]{new Integer[]{3, 5}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSet(new HashSet<Integer>()), testGraph.getTargets(6));
      });
    }
    public void test_getNodeTargets() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{5, 6, 7, 8};
        Integer[][] edges = new Integer[][]{new Integer[]{5, 7}, new Integer[]{7, 8}, new Integer[]{5, 8}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 7, 8), testGraph.getTargets(5));
      });
    }
    public void test_getNodeTargetsInDisconnectedGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{1, 2, 3};
        Integer[][] edges = new Integer[][]{new Integer[]{1, 2}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 2), testGraph.getTargets(1));
      });
    }
    public void test_getNodeTargetsInTargetfreeGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{3, 4, 5};
        Integer[][] edges = new Integer[][]{new Integer[]{3, 4}, new Integer[]{4, 5}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(SetSequence.fromSet(new HashSet<Integer>()), testGraph.getTargets(5));
      });
    }
    public void test_copyGraphAndChangeCopy() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{1, 2, 3};
        Integer[][] edges = new Integer[][]{new Integer[]{1, 2}, new Integer[]{2, 3}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);

        // the original graph should not be changed when changing the copy
        Graph<Integer> copiedGraph = testGraph.copy();
        copiedGraph.removeEdge(1, 2);
        copiedGraph.removeEdge(2, 3);

        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 1), testGraph.getSources(2));
        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 3), testGraph.getTargets(2));
      });
    }
    public void test_copyGraphAndChangeOriginal() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{1, 2, 3};
        Integer[][] edges = new Integer[][]{new Integer[]{1, 2}, new Integer[]{2, 3}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);

        // the copied graph should not be changed when changing the original
        Graph<Integer> copiedGraph = testGraph.copy();
        testGraph.removeEdge(1, 2);
        testGraph.removeEdge(2, 3);

        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 1), copiedGraph.getSources(2));
        Assert.assertEquals(SetSequence.fromSetAndArray(new HashSet<Integer>(), 3), copiedGraph.getTargets(2));
      });
    }

    public Graph<Integer> createGraph(Integer[] nodes, Integer[][] edges) {
      Graph<Integer> graph = new Graph<Integer>();
      if (nodes != null) {
        for (Integer node : nodes) {
          graph.addNode(node);
        }
      }
      if (edges != null) {
        for (Integer[] edge : edges) {
          graph.addEdge(edge[0], edge[1]);
        }
      }
      return graph;
    }
  }
}

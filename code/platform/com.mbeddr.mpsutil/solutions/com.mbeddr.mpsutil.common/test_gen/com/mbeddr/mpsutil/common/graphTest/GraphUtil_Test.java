package com.mbeddr.mpsutil.common.graphTest;

/*Generated by MPS */

import jetbrains.mps.MPSLaunch;
import jetbrains.mps.lang.test.runtime.BaseTransformationTest;
import org.junit.jupiter.api.extension.RegisterExtension;
import jetbrains.mps.lang.test.runtime.TestParametersCacheExtension;
import jetbrains.mps.lang.test.runtime.TestParametersCacheBuilder;
import org.junit.jupiter.api.Test;
import jetbrains.mps.lang.test.runtime.BaseTestBody;
import jetbrains.mps.lang.test.runtime.TransformationTest;
import com.mbeddr.mpsutil.common.graph.Graph;
import org.junit.Assert;
import com.mbeddr.mpsutil.common.graph.GraphUtil;

@MPSLaunch
public class GraphUtil_Test extends BaseTransformationTest {
  @RegisterExtension
  private static final TestParametersCacheExtension ourParametersCacheExtension = new TestParametersCacheExtension(new TestParametersCacheBuilder(GraphUtil_Test.class).projectPath("${mbeddr.github.core.home}/code/platform/com.mbeddr.mpsutil").modelRef("r:a68423c3-5b3b-473a-89a3-7910cb495020(com.mbeddr.mpsutil.common.graphTest@tests)").reopenProject(false).build());

  public GraphUtil_Test() {
    super(ourParametersCacheExtension.getParametersCache());
  }

  @Test
  public void test_isConnectedOnEmptyGraph() throws Throwable {
    new TestBody(this).test_isConnectedOnEmptyGraph();
  }
  @Test
  public void test_isConnectWithUnknownNode() throws Throwable {
    new TestBody(this).test_isConnectWithUnknownNode();
  }
  @Test
  public void test_isConnectedWithOneNodeGraph() throws Throwable {
    new TestBody(this).test_isConnectedWithOneNodeGraph();
  }
  @Test
  public void test_isConnectedWithOneNodeGraphAndWrongStartNode() throws Throwable {
    new TestBody(this).test_isConnectedWithOneNodeGraphAndWrongStartNode();
  }
  @Test
  public void test_isConnected() throws Throwable {
    new TestBody(this).test_isConnected();
  }
  @Test
  public void test_isConnectedWithUnreachableNodes() throws Throwable {
    new TestBody(this).test_isConnectedWithUnreachableNodes();
  }
  @Test
  public void test_isConnectedWithDisconnectedGraph() throws Throwable {
    new TestBody(this).test_isConnectedWithDisconnectedGraph();
  }

  /*package*/ static class TestBody extends BaseTestBody {

    /*package*/ TestBody(TransformationTest owner) {
      super(owner);
    }

    @Override
    protected void initTestNodes() {
      prepareTestNodes();
    }

    public void test_isConnectedOnEmptyGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Graph<Integer> testGraph = TestBody.this.createGraph(null, null);
        Assert.assertEquals(true, GraphUtil.isConnected(testGraph, null));
      });
    }
    public void test_isConnectWithUnknownNode() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{1, 2};
        Integer[][] edges = new Integer[][]{new Integer[]{1, 2}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(false, GraphUtil.isConnected(testGraph, 3));
      });
    }
    public void test_isConnectedWithOneNodeGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{3};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, null);
        Assert.assertEquals(true, GraphUtil.isConnected(testGraph, 3));
      });
    }
    public void test_isConnectedWithOneNodeGraphAndWrongStartNode() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{2};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, null);
        Assert.assertEquals(false, GraphUtil.isConnected(testGraph, 3));
      });
    }
    public void test_isConnected() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{5, 6, 7, 8, 9};
        Integer[][] edges = new Integer[][]{new Integer[]{5, 6}, new Integer[]{5, 7}, new Integer[]{7, 8}, new Integer[]{7, 9}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(true, GraphUtil.isConnected(testGraph, 5));
      });
    }
    public void test_isConnectedWithUnreachableNodes() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{5, 6, 7, 8, 9};
        Integer[][] edges = new Integer[][]{new Integer[]{5, 6}, new Integer[]{5, 7}, new Integer[]{7, 8}, new Integer[]{7, 9}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(false, GraphUtil.isConnected(testGraph, 7));
      });
    }
    public void test_isConnectedWithDisconnectedGraph() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Integer[] nodes = new Integer[]{5, 6, 7, 8, 9};
        Integer[][] edges = new Integer[][]{new Integer[]{5, 6}, new Integer[]{7, 8}, new Integer[]{7, 9}};
        Graph<Integer> testGraph = TestBody.this.createGraph(nodes, edges);
        Assert.assertEquals(false, GraphUtil.isConnected(testGraph, 5));
      });
    }

    public Graph<Integer> createGraph(Integer[] nodes, Integer[][] edges) {
      Graph<Integer> graph = new Graph<Integer>();
      if (nodes != null) {
        for (Integer node : nodes) {
          graph.addNode(node);
        }
      }
      if (edges != null) {
        for (Integer[] edge : edges) {
          graph.addEdge(edge[0], edge[1]);
        }
      }
      return graph;
    }
  }
}

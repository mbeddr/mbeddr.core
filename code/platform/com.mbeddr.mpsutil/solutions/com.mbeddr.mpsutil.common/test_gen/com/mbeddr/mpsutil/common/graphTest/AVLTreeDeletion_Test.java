package com.mbeddr.mpsutil.common.graphTest;

/*Generated by MPS */

import jetbrains.mps.MPSLaunch;
import jetbrains.mps.lang.test.runtime.BaseTransformationTest;
import org.junit.jupiter.api.extension.RegisterExtension;
import jetbrains.mps.lang.test.runtime.TestParametersCacheExtension;
import jetbrains.mps.lang.test.runtime.TestParametersCacheBuilder;
import org.junit.jupiter.api.Test;
import jetbrains.mps.lang.test.runtime.BaseTestBody;
import jetbrains.mps.lang.test.runtime.TransformationTest;
import com.mbeddr.mpsutil.common.graph.AVLTreeNodeFactory;
import com.mbeddr.mpsutil.common.graph.AVLTree;
import com.mbeddr.mpsutil.common.graph.AVLTreeImpl;
import org.junit.Assert;
import com.mbeddr.mpsutil.common.graph.AVLTreeNode;

@MPSLaunch
public class AVLTreeDeletion_Test extends BaseTransformationTest {
  @RegisterExtension
  private static final TestParametersCacheExtension ourParametersCacheExtension = new TestParametersCacheExtension(new TestParametersCacheBuilder(AVLTreeDeletion_Test.class).projectPath("${mbeddr.github.core.home}/code/platform/com.mbeddr.mpsutil").modelRef("r:a68423c3-5b3b-473a-89a3-7910cb495020(com.mbeddr.mpsutil.common.graphTest@tests)").reopenProject(false).build());

  public AVLTreeDeletion_Test() {
    super(ourParametersCacheExtension.getParametersCache());
  }

  @Test
  public void test_testDeletionSimple() throws Throwable {
    new TestBody(this).test_testDeletionSimple();
  }
  @Test
  public void test_testDeletionMultiple() throws Throwable {
    new TestBody(this).test_testDeletionMultiple();
  }
  @Test
  public void test_testDeletionLeftLeft() throws Throwable {
    new TestBody(this).test_testDeletionLeftLeft();
  }
  @Test
  public void test_testDeletionRightRight() throws Throwable {
    new TestBody(this).test_testDeletionRightRight();
  }
  @Test
  public void test_testDeletionLeftRight() throws Throwable {
    new TestBody(this).test_testDeletionLeftRight();
  }
  @Test
  public void test_testDeletionRightLeft() throws Throwable {
    new TestBody(this).test_testDeletionRightLeft();
  }
  @Test
  public void test_testDeletionRightCopy1() throws Throwable {
    new TestBody(this).test_testDeletionRightCopy1();
  }
  @Test
  public void test_testDeletionRightCopy2() throws Throwable {
    new TestBody(this).test_testDeletionRightCopy2();
  }
  @Test
  public void test_testDeletionDestruct() throws Throwable {
    new TestBody(this).test_testDeletionDestruct();
  }

  /*package*/ static class TestBody extends BaseTestBody {

    /*package*/ TestBody(TransformationTest owner) {
      super(owner);
    }

    @Override
    protected void initTestNodes() {
      prepareTestNodes();
    }

    public void test_testDeletionSimple() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        AVLTreeNodeFactory<Integer, IntegerNode> nodeFactory = new IntegerNodeFactory();
        AVLTree<Integer, IntegerNode> tree = new AVLTreeImpl<Integer, IntegerNode>(nodeFactory);

        tree.insert(9).insert(1).insert(10).insert(0).insert(5).insert(11).insert(-1).insert(2).insert(6);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 0 -1 5 2 6 10 11 ");

        tree.remove(6);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 0 -1 5 2 10 11 ");
      });
    }
    public void test_testDeletionMultiple() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        AVLTreeNodeFactory<Integer, IntegerNode> nodeFactory = new IntegerNodeFactory();
        AVLTree<Integer, IntegerNode> tree = new AVLTreeImpl<Integer, IntegerNode>(nodeFactory);

        tree.insert(9).insert(1).insert(10).insert(0).insert(5).insert(11).insert(-1).insert(2).insert(6).insert(-1).insert(-1);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 0 -1 -1 -1 5 2 6 10 11 ");

        tree.remove(-1);
        tree.remove(-1);
        tree.remove(-1);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 0 5 2 6 10 11 ");
      });
    }
    public void test_testDeletionLeftLeft() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        AVLTreeNodeFactory<Integer, IntegerNode> nodeFactory = new IntegerNodeFactory();
        AVLTree<Integer, IntegerNode> tree = new AVLTreeImpl<Integer, IntegerNode>(nodeFactory);

        tree.insert(9).insert(1).insert(11).insert(-1).insert(5).insert(10).insert(12).insert(-2).insert(0).insert(2).insert(6).insert(13).insert(-3).insert(7);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -1 -2 -3 0 5 2 6 7 11 10 12 13 ");

        tree.remove(0);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -2 -3 -1 5 2 6 7 11 10 12 13 ");
      });
    }
    public void test_testDeletionRightRight() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        AVLTreeNodeFactory<Integer, IntegerNode> nodeFactory = new IntegerNodeFactory();
        AVLTree<Integer, IntegerNode> tree = new AVLTreeImpl<Integer, IntegerNode>(nodeFactory);

        tree.insert(9).insert(1).insert(11).insert(-1).insert(5).insert(10).insert(12).insert(-2).insert(0).insert(2).insert(6).insert(13).insert(-3).insert(7);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -1 -2 -3 0 5 2 6 7 11 10 12 13 ");

        tree.remove(2);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -1 -2 -3 0 6 5 7 11 10 12 13 ");
      });
    }
    public void test_testDeletionLeftRight() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        AVLTreeNodeFactory<Integer, IntegerNode> nodeFactory = new IntegerNodeFactory();
        AVLTree<Integer, IntegerNode> tree = new AVLTreeImpl<Integer, IntegerNode>(nodeFactory);

        tree.insert(9).insert(1).insert(11).insert(-1).insert(4).insert(10).insert(12).insert(-3).insert(0).insert(2).insert(6).insert(13).insert(-4).insert(-2).insert(5).insert(7);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -1 -3 -4 -2 0 4 2 6 5 7 11 10 12 13 ");

        tree.remove(-4);
        tree.remove(0);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -2 -3 -1 4 2 6 5 7 11 10 12 13 ");
      });
    }
    public void test_testDeletionRightLeft() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        AVLTreeNodeFactory<Integer, IntegerNode> nodeFactory = new IntegerNodeFactory();
        AVLTree<Integer, IntegerNode> tree = new AVLTreeImpl<Integer, IntegerNode>(nodeFactory);

        tree.insert(9).insert(1).insert(11).insert(-1).insert(4).insert(10).insert(12).insert(-3).insert(0).insert(2).insert(6).insert(13).insert(-4).insert(-2).insert(5).insert(7);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -1 -3 -4 -2 0 4 2 6 5 7 11 10 12 13 ");

        tree.remove(7);
        tree.remove(2);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -1 -3 -4 -2 0 5 4 6 11 10 12 13 ");
      });
    }
    public void test_testDeletionRightCopy1() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        AVLTreeNodeFactory<Integer, IntegerNode> nodeFactory = new IntegerNodeFactory();
        AVLTree<Integer, IntegerNode> tree = new AVLTreeImpl<Integer, IntegerNode>(nodeFactory);

        tree.insert(9).insert(1).insert(11).insert(-1).insert(4).insert(10).insert(12).insert(-3).insert(0).insert(2).insert(6).insert(13).insert(-4).insert(-2).insert(5).insert(7).insert(7).insert(7);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -1 -3 -4 -2 0 4 2 6 5 7 7 7 11 10 12 13 ");

        tree.remove(6);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -1 -3 -4 -2 0 4 2 7 7 7 5 11 10 12 13 ");
      });
    }
    public void test_testDeletionRightCopy2() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        AVLTreeNodeFactory<Integer, IntegerNode> nodeFactory = new IntegerNodeFactory();
        AVLTree<Integer, IntegerNode> tree = new AVLTreeImpl<Integer, IntegerNode>(nodeFactory);

        tree.insert(9).insert(1).insert(11).insert(-1).insert(4).insert(10).insert(12).insert(-3).insert(0).insert(2).insert(6).insert(13).insert(-4).insert(-2).insert(5).insert(7).insert(7).insert(7);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -1 -3 -4 -2 0 4 2 6 5 7 7 7 11 10 12 13 ");

        tree.remove(6);
        tree.remove(2);
        tree.remove(7);
        tree.remove(5);
        tree.remove(7);
        tree.remove(7);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 -1 -3 -4 -2 1 0 4 11 10 12 13 ");
      });
    }
    public void test_testDeletionDestruct() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        AVLTreeNodeFactory<Integer, IntegerNode> nodeFactory = new IntegerNodeFactory();
        AVLTree<Integer, IntegerNode> tree = new AVLTreeImpl<Integer, IntegerNode>(nodeFactory);

        tree.insert(9).insert(1).insert(11).insert(-1).insert(5).insert(10).insert(12).insert(-2).insert(0).insert(2).insert(6).insert(13).insert(-3).insert(7);

        Assert.assertEquals(TestBody.this.getPreOrderDump(tree.getRoot()), "9 1 -1 -2 -3 0 5 2 6 7 11 10 12 13 ");

        tree.remove(2).remove(1).remove(-1).remove(-3).remove(-2).remove(9).remove(0).remove(12).remove(13).remove(7).remove(6).remove(11).remove(5).remove(10);

        Assert.assertEquals(tree.getRoot(), null);
      });
    }

    public String getPreOrderDump(AVLTreeNode<Integer> node) {
      StringBuffer buffer = new StringBuffer();
      this.getPreOrderDump(node, buffer);
      return buffer.toString();
    }
    public void getPreOrderDump(AVLTreeNode<Integer> node, StringBuffer buffer) {
      if (node != null) {
        for (int i = 0; i < node.getCount(); i++) {
          buffer.append(node.getValue() + " ");
        }
        this.getPreOrderDump(node.getLeftChild(), buffer);
        this.getPreOrderDump(node.getRightChild(), buffer);
      }
    }
  }
}

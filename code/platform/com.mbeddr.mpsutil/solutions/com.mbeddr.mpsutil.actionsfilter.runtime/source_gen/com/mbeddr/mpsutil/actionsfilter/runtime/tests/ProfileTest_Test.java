package com.mbeddr.mpsutil.actionsfilter.runtime.tests;

/*Generated by MPS */

import jetbrains.mps.MPSLaunch;
import jetbrains.mps.lang.test.runtime.BaseTransformationTest;
import org.junit.jupiter.api.extension.RegisterExtension;
import jetbrains.mps.lang.test.runtime.TestParametersCacheExtension;
import jetbrains.mps.lang.test.runtime.TestParametersCacheBuilder;
import org.junit.jupiter.api.Test;
import jetbrains.mps.lang.test.runtime.BaseTestBody;
import jetbrains.mps.lang.test.runtime.TransformationTest;
import com.mbeddr.mpsutil.actionsfilter.runtime.Profile;
import org.junit.Assert;
import com.mbeddr.mpsutil.actionsfilter.runtime.ToolbarSettings;
import com.mbeddr.mpsutil.actionsfilter.runtime.ToolBarEntry;

@MPSLaunch
public class ProfileTest_Test extends BaseTransformationTest {
  @RegisterExtension
  private static final TestParametersCacheExtension ourParametersCacheExtension = new TestParametersCacheExtension(new TestParametersCacheBuilder(ProfileTest_Test.class).projectPath(null).modelRef("r:eddc3924-ccea-4ced-aea2-faf864d53897(com.mbeddr.mpsutil.actionsfilter.runtime.tests)").reopenProject(null).build());

  public ProfileTest_Test() {
    super(ourParametersCacheExtension.getParametersCache());
  }

  @Test
  public void test_constructorSetsIdAndName() throws Throwable {
    new TestBody(this).test_constructorSetsIdAndName();
  }
  @Test
  public void test_clone() throws Throwable {
    new TestBody(this).test_clone();
  }
  @Test
  public void test_equalsAndHashCode() throws Throwable {
    new TestBody(this).test_equalsAndHashCode();
  }
  @Test
  public void test_canBeActivatedByDefaultTrueByDefault() throws Throwable {
    new TestBody(this).test_canBeActivatedByDefaultTrueByDefault();
  }
  @Test
  public void test_testToStringUsesNameIfNotEmpty() throws Throwable {
    new TestBody(this).test_testToStringUsesNameIfNotEmpty();
  }

  /*package*/ static class TestBody extends BaseTestBody {

    /*package*/ TestBody(TransformationTest owner) {
      super(owner);
    }

    @Override
    protected void initTestNodes() {
      prepareTestNodes();
    }

    public void test_constructorSetsIdAndName() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Profile profile = new Profile("TestProfile");
        Assert.assertEquals("TestProfile", profile.getName());
        Assert.assertNotNull(profile.getId());
      });
    }
    public void test_clone() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Profile original = TestBody.this.createTestProfile();
        Profile clone = original.clone();
        Assert.assertEquals(original, clone);
        Assert.assertEquals(original, clone);
        Assert.assertEquals(original.getFilterSettings(), clone.getFilterSettings());
        Assert.assertEquals(original.getName(), clone.getName());
      });
    }
    public void test_equalsAndHashCode() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Profile p1 = new Profile("Equal");
        Profile p2 = new Profile("Equal");
        p2.setId(p1.getId());
        Assert.assertEquals(p2, p1);
        Assert.assertEquals(p2.hashCode(), p1.hashCode());
      });
    }
    public void test_canBeActivatedByDefaultTrueByDefault() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Profile original = TestBody.this.createTestProfile();
        Assert.assertTrue(original.canBeActivatedByDefault(null));
      });
    }
    public void test_testToStringUsesNameIfNotEmpty() throws Exception {
      initTestNodes();
      runWithinCommand(() -> {
        Profile profile = new Profile("VisibleName");
        Assert.assertEquals("VisibleName", profile.toString());
        profile.setName("");
        Assert.assertEquals(profile.toString(), profile.getId());
      });
    }

    public Profile createTestProfile() {
      Profile profile = new Profile("Profile" + Math.random(), Math.random() > 0.5);
      for (int j = 0; j < 5; j++) {
        profile.filterSettings.addFilteredId(Math.random() + "");
        profile.toolbarSettings = new ToolbarSettings();
        profile.toolbarSettings.addEntry(new ToolBarEntry(Math.random() + "", null, ToolBarEntry.EntryType.TOOLBAR_ACTION));
      }
      return profile;
    }
  }
}

package com.mbeddr.mpsutil.traceExplorer.plugin;

/*Generated by MPS */

import com.intellij.ui.ColoredTreeCellRenderer;
import org.jetbrains.annotations.NotNull;
import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;

public class TraceRecordTreeCellRenderer<T> extends ColoredTreeCellRenderer {
  private final ITraceRecordRenderer<T> renderer;

  public TraceRecordTreeCellRenderer(ITraceRecordRenderer<T> renderer) {
    this.renderer = renderer;
  }

  @Override
  public void customizeCellRenderer(@NotNull final JTree tree, final Object value, final boolean selected, final boolean expanded, final boolean leaf, final int row, final boolean hasFocus) {
    if (value instanceof DefaultMutableTreeNode) {
      DefaultMutableTreeNode dmtn = (DefaultMutableTreeNode) value;
      T traceRecord = (T) dmtn.getUserObject();
      if (traceRecord != null) {
        renderer.render(traceRecord, this);
      }
      return;
    }

    final Object valueToRender = value;
    setIcon(null);
    append((valueToRender == null ? "" : valueToRender.toString()));
  }
}

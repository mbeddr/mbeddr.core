package com.mbeddr.doc.self.plugin;

/*Generated by MPS */

import jetbrains.mps.project.AbstractModule;
import jetbrains.mps.util.MacroHelper;
import jetbrains.mps.util.MacrosFactory;
import jetbrains.mps.project.structure.modules.ModuleDescriptor;
import jetbrains.mps.project.ProjectPathUtil;
import java.io.File;

public class GenerationHelper {
  public static String getGeneratorOutputPath(AbstractModule module) {
    MacroHelper macroHelper = MacrosFactory.forModule(module);
    ModuleDescriptor md = module.getModuleDescriptor();
    if (md == null) {
      return null;
    }
    if (md.getOutputRoot() != null) {
      return macroHelper.expandPath(md.getOutputRoot());
    }
    final String p = ProjectPathUtil._getGeneratorOutputPathPrim(md);
    return (p == null ? null : macroHelper.expandPath(p));

  }

  public static File getDocGenFolder(AbstractModule m) {
    String generatorOutputPath = GenerationHelper.getGeneratorOutputPath(m);
    File outputRoot = new File(generatorOutputPath);
    File docGenRoot = new File(outputRoot.getParentFile(), "doc_gen");
    return docGenRoot;
  }

}

package com.mbeddr.doc.pluginSolution.plugin;

/*Generated by MPS */

import jetbrains.mps.workbench.action.BaseAction;
import javax.swing.Icon;
import jetbrains.mps.workbench.action.ActionAccess;
import com.intellij.openapi.actionSystem.AnActionEvent;
import java.util.Map;
import org.jetbrains.annotations.NotNull;
import com.intellij.openapi.project.Project;
import com.intellij.openapi.actionSystem.CommonDataKeys;
import org.jetbrains.mps.openapi.model.SModel;
import jetbrains.mps.ide.actions.MPSCommonDataKeys;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.smodel.builder.SNodeBuilder;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SProperty;

public class createExportSkeleton_Action extends BaseAction {
  private static final Icon ICON = null;

  public createExportSkeleton_Action() {
    super("Create Document Export", "", ICON);
    this.setIsAlwaysVisible(false);
    this.setActionAccess(ActionAccess.UNDO_PROJECT);
    updateInBackground(true);
  }
  @Override
  public boolean isDumbAware() {
    return true;
  }
  @Override
  public boolean isApplicable(AnActionEvent event, final Map<String, Object> _params) {
    return true;
  }
  @Override
  public void doUpdate(@NotNull AnActionEvent event, final Map<String, Object> _params) {
    this.setEnabledState(event.getPresentation(), this.isApplicable(event, _params));
  }
  @Override
  protected boolean collectActionData(AnActionEvent event, final Map<String, Object> _params) {
    if (!(super.collectActionData(event, _params))) {
      return false;
    }
    {
      Project p = event.getData(CommonDataKeys.PROJECT);
      if (p == null) {
        return false;
      }
    }
    {
      SModel p = event.getData(MPSCommonDataKeys.CONTEXT_MODEL);
      if (p == null) {
        return false;
      }
    }
    {
      SNode node = event.getData(MPSCommonDataKeys.NODE);
      if (node != null && !(SNodeOperations.isInstanceOf(node, CONCEPTS.Document$4G))) {
        node = null;
      }
      if (node == null) {
        return false;
      }
    }
    return true;
  }
  @Override
  public void doExecute(@NotNull final AnActionEvent event, final Map<String, Object> _params) {

    SNode dc = createDocumentConfig_2qof2_a0b0a();


    SNode de = createDocumentExport_2qof2_a0e0a(event.getData(MPSCommonDataKeys.NODE), SLinkOperations.getTarget(dc, LINKS.defaultTempPath$G_NC));

    SModel model = event.getData(MPSCommonDataKeys.CONTEXT_MODEL);
    model.addRootNode(dc);
    model.addRootNode(de);

  }
  private static SNode createDocumentConfig_2qof2_a0b0a() {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.DocumentConfig$ci);
    n0.setProperty(PROPS.virtualPackage$EkXl, "config");
    n0.setProperty(PROPS.name$MnvL, "Config");
    {
      SNodeBuilder n1 = n0.forChild(LINKS.defaultTempPath$G_NC).init(CONCEPTS.PathDefinition$sK);
      n1.setProperty(PROPS.name$MnvL, "temp");
      {
        SNodeBuilder n2 = n1.forChild(LINKS.pathPicker$QPZE).init(CONCEPTS.SolutionRelativeDirPicker$W5);
        n2.setProperty(PROPS.path$VaYg, "temp");
      }
    }
    {
      SNodeBuilder n3 = n0.forChild(LINKS.defaultImagePath$4aaV).init(CONCEPTS.PathDefinition$sK);
      n3.setProperty(PROPS.name$MnvL, "image");
      {
        SNodeBuilder n4 = n3.forChild(LINKS.pathPicker$QPZE).init(CONCEPTS.SolutionRelativeDirPicker$W5);
        n4.setProperty(PROPS.path$VaYg, "image");
      }
    }
    return n0.getResult();
  }
  private static SNode createDocumentExport_2qof2_a0e0a(SNode p0, SNode p1) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.DocumentExport$bq);
    n0.setProperty(PROPS.virtualPackage$EkXl, "config");
    n0.setProperty(PROPS.name$MnvL, "DocumentExport");
    n0.setProperty(PROPS.title$K1cS, "My first export");
    {
      SNodeBuilder n1 = n0.forChild(LINKS.root$175E).init(CONCEPTS.DocumentRef$zv);
      n1.setReferenceTarget(LINKS.doc$bvgi, p0);
    }
    n0.forChild(LINKS.renderer$16BC).init(CONCEPTS.NoOutputRenderer$My);
    {
      SNodeBuilder n2 = n0.forChild(LINKS.mappings$1cg0).init(CONCEPTS.PathMapping$PL);
      n2.setReferenceTarget(LINKS.pathDef$k8pi, p1);
      n2.setProperty(PROPS.mappedPath$k8Cj, "_vis");
    }
    return n0.getResult();
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept Document$4G = MetaAdapterFactory.getConcept(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7a1830L, "com.mbeddr.doc.structure.Document");
    /*package*/ static final SConcept DocumentConfig$ci = MetaAdapterFactory.getConcept(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x58a16bfbe08e80ceL, "com.mbeddr.doc.structure.DocumentConfig");
    /*package*/ static final SConcept PathDefinition$sK = MetaAdapterFactory.getConcept(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x58a16bfbe08e80dbL, "com.mbeddr.doc.structure.PathDefinition");
    /*package*/ static final SConcept SolutionRelativeDirPicker$W5 = MetaAdapterFactory.getConcept(0xd3a0fd26445a466cL, 0x900e10444ddfed52L, 0x24acfda72d7b4f13L, "com.mbeddr.mpsutil.filepicker.structure.SolutionRelativeDirPicker");
    /*package*/ static final SConcept DocumentExport$bq = MetaAdapterFactory.getConcept(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7f5a6eL, "com.mbeddr.doc.structure.DocumentExport");
    /*package*/ static final SConcept DocumentRef$zv = MetaAdapterFactory.getConcept(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7ee169L, "com.mbeddr.doc.structure.DocumentRef");
    /*package*/ static final SConcept NoOutputRenderer$My = MetaAdapterFactory.getConcept(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7f8c75L, "com.mbeddr.doc.structure.NoOutputRenderer");
    /*package*/ static final SConcept PathMapping$PL = MetaAdapterFactory.getConcept(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x58a16bfbe08fc074L, "com.mbeddr.doc.structure.PathMapping");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink defaultTempPath$G_NC = MetaAdapterFactory.getContainmentLink(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x58a16bfbe08e80ceL, 0x504952297865ba38L, "defaultTempPath");
    /*package*/ static final SContainmentLink pathPicker$QPZE = MetaAdapterFactory.getContainmentLink(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x58a16bfbe08e80dbL, 0x24acfda72d7b4682L, "pathPicker");
    /*package*/ static final SContainmentLink defaultImagePath$4aaV = MetaAdapterFactory.getContainmentLink(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x58a16bfbe08e80ceL, 0x5bd5cb5a7dd1c3fbL, "defaultImagePath");
    /*package*/ static final SContainmentLink root$175E = MetaAdapterFactory.getContainmentLink(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x5439559294885429L, 0x5439559294886741L, "root");
    /*package*/ static final SReferenceLink doc$bvgi = MetaAdapterFactory.getReferenceLink(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7ee169L, 0x2e7fd03a4b7ee16aL, "doc");
    /*package*/ static final SContainmentLink renderer$16BC = MetaAdapterFactory.getContainmentLink(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x5439559294885429L, 0x543955929488673fL, "renderer");
    /*package*/ static final SContainmentLink mappings$1cg0 = MetaAdapterFactory.getContainmentLink(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x5439559294885429L, 0x5439559294886742L, "mappings");
    /*package*/ static final SReferenceLink pathDef$k8pi = MetaAdapterFactory.getReferenceLink(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x58a16bfbe08fc074L, 0x58a16bfbe08fc075L, "pathDef");
  }

  private static final class PROPS {
    /*package*/ static final SProperty virtualPackage$EkXl = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x10802efe25aL, 0x115eca8579fL, "virtualPackage");
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
    /*package*/ static final SProperty path$VaYg = MetaAdapterFactory.getProperty(0xd3a0fd26445a466cL, 0x900e10444ddfed52L, 0x55705e73a6773808L, 0x55705e73a6774a6eL, "path");
    /*package*/ static final SProperty title$K1cS = MetaAdapterFactory.getProperty(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7f5a6eL, 0x1c2f4be3daa39eeL, "title");
    /*package*/ static final SProperty mappedPath$k8Cj = MetaAdapterFactory.getProperty(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x58a16bfbe08fc074L, 0x58a16bfbe08fc076L, "mappedPath");
  }
}

package com.mbeddr.doc.behavior;

/*Generated by MPS */

import jetbrains.mps.core.aspects.behaviour.BaseBHDescriptor;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.core.aspects.behaviour.api.SMethod;
import jetbrains.mps.core.aspects.behaviour.SMethodBuilder;
import jetbrains.mps.core.aspects.behaviour.SJavaCompoundTypeImpl;
import jetbrains.mps.core.aspects.behaviour.AccessPrivileges;
import jetbrains.mps.openapi.editor.EditorContext;
import org.jetbrains.mps.openapi.model.SNode;
import com.mbeddr.core.base.behavior.AbstractTreeViewNode;
import java.util.List;
import java.util.Arrays;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import jetbrains.mps.openapi.editor.cells.EditorCell_Collection;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import com.mbeddr.core.base.behavior.NodeTreeViewNode;
import jetbrains.mps.core.aspects.behaviour.api.SConstructor;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.core.aspects.behaviour.api.BHMethodNotFoundException;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SProperty;
import org.jetbrains.mps.openapi.language.SContainmentLink;

public final class AbstractSection__BehaviorDescriptor extends BaseBHDescriptor {
  private static final SAbstractConcept CONCEPT = MetaAdapterFactory.getConcept(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7c6bdeL, "com.mbeddr.doc.structure.AbstractSection");

  public static final SMethod<Integer> nestingLevel_id4vQSg$AqJMN = new SMethodBuilder<Integer>(new SJavaCompoundTypeImpl(Integer.TYPE)).name("nestingLevel").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(5185579450379205811L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2();
  public static final SMethod<Boolean> isInChapter_id3DAECxGcNHt = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("isInChapter").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4208238404731878237L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2();
  public static final SMethod<String> qualifiedName_id2TZO3DbvVw0 = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("qualifiedName").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(3350625596580280320L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2();
  public static final SMethod<String> referenceString_id4vQSg$Aqmae = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("referenceString").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(5185579450379100814L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2();
  public static final SMethod<String> namespace_id4vQSg$AqbUT = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("namespace").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(5185579450379058873L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2();
  public static final SMethod<String> tocText_id3DLpMp_rLlJ = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("tocText").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4211260541176321391L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2();
  public static final SMethod<Boolean> isInIndex_idQRmqzHsFzm = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("isInIndex").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(988357225304209622L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2();
  public static final SMethod<String> nestingIndex_id4vQSg$Aq5vD = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("nestingIndex").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(5185579450379032553L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2();
  public static final SMethod<String> getRefString_id5yxqZJwyEUp = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("getRefString").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(6386504476136222361L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2();
  public static final SMethod<String> getRefPrefix_id5yxqZJwyGX2 = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("getRefPrefix").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(6386504476136230722L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2();
  public static final SMethod<Void> foldCloseChildren_id3RseghIds7l = new SMethodBuilder<Void>(new SJavaCompoundTypeImpl(Void.class)).name("foldCloseChildren").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4457500422381617621L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2(SMethodBuilder.createJavaParameter(EditorContext.class, ""), SMethodBuilder.createJavaParameter(Boolean.TYPE, ""));
  public static final SMethod<Void> unfoldCloseChildren_id3RseghId_8J = new SMethodBuilder<Void>(new SJavaCompoundTypeImpl(Void.class)).name("unfoldCloseChildren").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4457500422381654575L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2(SMethodBuilder.createJavaParameter(EditorContext.class, ""), SMethodBuilder.createJavaParameter(Boolean.TYPE, ""));
  public static final SMethod<Iterable<SNode>> getUniquelyNamedElements_id4qSf1u1TRfj = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("getUniquelyNamedElements").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(5095889050031059923L).languageId(0xaa41d1b2bffa7eb1L, 0xd4280a54f6df4383L).build2();
  public static final SMethod<Boolean> containsText_idjpyKDg1onB = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("containsText").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(349463322506397159L).languageId(0xaa41d1b2bffa7eb1L, 0xd4280a54f6df4383L).build2(SMethodBuilder.createJavaParameter(String.class, ""));
  public static final SMethod<String> resultName_idjpyKDg1pW5 = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("resultName").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(349463322506403589L).languageId(0xaa41d1b2bffa7eb1L, 0xd4280a54f6df4383L).build2();
  public static final SMethod<AbstractTreeViewNode> getTreeNode_id7NyyyjNtbn2 = new SMethodBuilder<AbstractTreeViewNode>(new SJavaCompoundTypeImpl(AbstractTreeViewNode.class)).name("getTreeNode").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(8998906896747640258L).languageId(0xaa41d1b2bffa7eb1L, 0xd4280a54f6df4383L).build2(SMethodBuilder.createJavaParameter(String.class, ""));
  public static final SMethod<String> getIndexedText_id5wmuVxvF0fD = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("getIndexedText").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(6347396756634600425L).languageId(0xa9c4c2e35194c36aL, 0x2374bc907e3741f1L).build2();

  private static final List<SMethod<?>> BH_METHODS = Arrays.<SMethod<?>>asList(nestingLevel_id4vQSg$AqJMN, isInChapter_id3DAECxGcNHt, qualifiedName_id2TZO3DbvVw0, referenceString_id4vQSg$Aqmae, namespace_id4vQSg$AqbUT, tocText_id3DLpMp_rLlJ, isInIndex_idQRmqzHsFzm, nestingIndex_id4vQSg$Aq5vD, getRefString_id5yxqZJwyEUp, getRefPrefix_id5yxqZJwyGX2, foldCloseChildren_id3RseghIds7l, unfoldCloseChildren_id3RseghId_8J, getUniquelyNamedElements_id4qSf1u1TRfj, containsText_idjpyKDg1onB, resultName_idjpyKDg1pW5, getTreeNode_id7NyyyjNtbn2, getIndexedText_id5wmuVxvF0fD);

  private static void ___init___(@NotNull SNode __thisNode__) {
  }

  /*package*/ static int nestingLevel_id4vQSg$AqJMN(@NotNull SNode __thisNode__) {
    return ListSequence.fromList(SNodeOperations.getNodeAncestors(__thisNode__, CONCEPTS.AbstractSection$8m, false)).count();
  }
  /*package*/ static boolean isInChapter_id3DAECxGcNHt(@NotNull SNode __thisNode__) {
    return (SNodeOperations.getNodeAncestor(__thisNode__, CONCEPTS.Chapter$x0, false, false) != null);
  }
  /*package*/ static String qualifiedName_id2TZO3DbvVw0(@NotNull SNode __thisNode__) {
    return ListSequence.fromList(SNodeOperations.getNodeAncestors(__thisNode__, CONCEPTS.AbstractSection$8m, false)).reversedList().foldLeft("", (String s, SNode it) -> s + SPropertyOperations.getString(it, PROPS.name$MnvL) + ".") + SPropertyOperations.getString(__thisNode__, PROPS.name$MnvL);
  }
  /*package*/ static String referenceString_id4vQSg$Aqmae(@NotNull SNode __thisNode__) {
    return AbstractSection__BehaviorDescriptor.qualifiedName_id2TZO3DbvVw0.invoke(__thisNode__) + " (" + SPropertyOperations.getString(SNodeOperations.getNodeAncestor(__thisNode__, CONCEPTS.Document$4G, false, false), PROPS.name$MnvL) + ")";
  }
  /*package*/ static String namespace_id4vQSg$AqbUT(@NotNull SNode __thisNode__) {
    return ListSequence.fromList(SNodeOperations.getNodeAncestors(__thisNode__, CONCEPTS.AbstractSection$8m, false)).reversedList().foldLeft("", (String s, SNode it) -> s + SPropertyOperations.getString(it, PROPS.name$MnvL) + ".");
  }
  /*package*/ static String tocText_id3DLpMp_rLlJ(@NotNull SNode __thisNode__) {
    return SPropertyOperations.getString(__thisNode__, PROPS.text$dM9O);
  }
  /*package*/ static boolean isInIndex_idQRmqzHsFzm(@NotNull SNode __thisNode__) {
    return true;
  }
  /*package*/ static String nestingIndex_id4vQSg$Aq5vD(@NotNull SNode __thisNode__) {
    if (!((boolean) AbstractSection__BehaviorDescriptor.isInIndex_idQRmqzHsFzm.invoke(__thisNode__))) {
      return "";
    }

    int myIndex = Sequence.fromIterable(SNodeOperations.ofConcept(SNodeOperations.getPrevSiblings(__thisNode__, false), CONCEPTS.AbstractSection$8m)).where((it) -> (boolean) AbstractSection__BehaviorDescriptor.isInIndex_idQRmqzHsFzm.invoke(it)).count() + 1;
    boolean isTopLevel = !(SNodeOperations.isInstanceOf(SNodeOperations.getParent(__thisNode__), CONCEPTS.AbstractSection$8m));
    boolean isFirst = (SNodeOperations.getPrevSibling(__thisNode__) == null);
    if (isTopLevel && isFirst) {
      SNode doc = SNodeOperations.getNodeAncestor(__thisNode__, CONCEPTS.Document$4G, false, false);
      if (doc != null) {
        myIndex = SPropertyOperations.getInteger(doc, PROPS.chapterStartIndex$rjjE);
      }
    }
    SNode s = SNodeOperations.getNodeAncestor(__thisNode__, CONCEPTS.AbstractSection$8m, false, false);
    if (s != null && (boolean) AbstractSection__BehaviorDescriptor.isInIndex_idQRmqzHsFzm.invoke(s)) {
      return AbstractSection__BehaviorDescriptor.nestingIndex_id4vQSg$Aq5vD.invoke(s) + "." + myIndex;
    }
    return myIndex + "";
  }
  /*package*/ static String getRefString_id5yxqZJwyEUp(@NotNull SNode __thisNode__) {
    return SPropertyOperations.getString(__thisNode__, PROPS.text$dM9O);
  }
  /*package*/ static String getRefPrefix_id5yxqZJwyGX2(@NotNull SNode __thisNode__) {
    String s = SConceptOperations.conceptAlias(SNodeOperations.getConcept(__thisNode__));
    return s.substring(0, 1).toUpperCase() + s.substring(1);
  }
  /*package*/ static void foldCloseChildren_id3RseghIds7l(@NotNull SNode __thisNode__, EditorContext ctx, boolean recursive) {
    if (recursive) {
      for (SNode s : ListSequence.fromList(SNodeOperations.getNodeDescendants(__thisNode__, CONCEPTS.AbstractSection$8m, false, new SAbstractConcept[]{}))) {
        AbstractSection__BehaviorDescriptor.foldCloseChildren_id3RseghIds7l.invoke(s, ctx, ((boolean) recursive));
      }
    }
    EditorCell cell = ctx.getEditorComponent().findNodeCell(__thisNode__, true);
    if (cell instanceof EditorCell_Collection) {
      ((EditorCell_Collection) cell).fold();
    }
  }
  /*package*/ static void unfoldCloseChildren_id3RseghId_8J(@NotNull SNode __thisNode__, EditorContext ctx, boolean recursive) {
    if (recursive) {
      for (SNode s : ListSequence.fromList(SNodeOperations.getNodeDescendants(__thisNode__, CONCEPTS.AbstractSection$8m, false, new SAbstractConcept[]{}))) {
        AbstractSection__BehaviorDescriptor.unfoldCloseChildren_id3RseghId_8J.invoke(s, ctx, ((boolean) recursive));
      }
    }
    EditorCell cell = ctx.getEditorComponent().findNodeCell(__thisNode__, true);
    if (cell instanceof EditorCell_Collection) {
      ((EditorCell_Collection) cell).unfold();
    }
  }
  /*package*/ static Iterable<SNode> getUniquelyNamedElements_id4qSf1u1TRfj(@NotNull SNode __thisNode__) {
    return SLinkOperations.getChildren(__thisNode__, LINKS.contents$e7kB);
  }
  /*package*/ static boolean containsText_idjpyKDg1onB(@NotNull SNode __thisNode__, String text) {
    return SPropertyOperations.getString(__thisNode__, PROPS.text$dM9O) != null && SPropertyOperations.getString(__thisNode__, PROPS.text$dM9O).contains(text);
  }
  /*package*/ static String resultName_idjpyKDg1pW5(@NotNull SNode __thisNode__) {
    return SPropertyOperations.getString(__thisNode__, PROPS.name$MnvL);
  }
  /*package*/ static AbstractTreeViewNode getTreeNode_id7NyyyjNtbn2(@NotNull SNode __thisNode__, final String category) {
    if (category.contains("Structure")) {
      return new NodeTreeViewNode(__thisNode__, AbstractSection__BehaviorDescriptor.nestingIndex_id4vQSg$Aq5vD.invoke(__thisNode__) + " " + SPropertyOperations.getString(__thisNode__, PROPS.text$dM9O), category, null) {

        public int getChildCountFromModel() {
          return Sequence.fromIterable(DocTreeHelper.filter(SLinkOperations.getChildren(SNodeOperations.cast(getProgramNode(), CONCEPTS.AbstractSection$8m), LINKS.contents$e7kB), category)).count();
        }
        public List<AbstractTreeViewNode> getChildrenFromModel() {
          return getTheirTreeNodes(DocTreeHelper.filter(SLinkOperations.getChildren(SNodeOperations.cast(getProgramNode(), CONCEPTS.AbstractSection$8m), LINKS.contents$e7kB), category), category);
        }
      };
    }
    return null;
  }
  /*package*/ static String getIndexedText_id5wmuVxvF0fD(@NotNull SNode __thisNode__) {
    return AbstractSection__BehaviorDescriptor.nestingIndex_id4vQSg$Aq5vD.invoke(__thisNode__) + " " + SPropertyOperations.getString(__thisNode__, PROPS.text$dM9O);
  }

  /*package*/ AbstractSection__BehaviorDescriptor() {
  }

  @Override
  protected void initNode(@NotNull SNode node, @NotNull SConstructor constructor, @Nullable Object[] parameters) {
    ___init___(node);
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SNode node, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      case 0:
        return (T) ((Integer) nestingLevel_id4vQSg$AqJMN(node));
      case 1:
        return (T) ((Boolean) isInChapter_id3DAECxGcNHt(node));
      case 2:
        return (T) ((String) qualifiedName_id2TZO3DbvVw0(node));
      case 3:
        return (T) ((String) referenceString_id4vQSg$Aqmae(node));
      case 4:
        return (T) ((String) namespace_id4vQSg$AqbUT(node));
      case 5:
        return (T) ((String) tocText_id3DLpMp_rLlJ(node));
      case 6:
        return (T) ((Boolean) isInIndex_idQRmqzHsFzm(node));
      case 7:
        return (T) ((String) nestingIndex_id4vQSg$Aq5vD(node));
      case 8:
        return (T) ((String) getRefString_id5yxqZJwyEUp(node));
      case 9:
        return (T) ((String) getRefPrefix_id5yxqZJwyGX2(node));
      case 10:
        foldCloseChildren_id3RseghIds7l(node, (EditorContext) parameters[0], ((boolean) (Boolean) parameters[1]));
        return null;
      case 11:
        unfoldCloseChildren_id3RseghId_8J(node, (EditorContext) parameters[0], ((boolean) (Boolean) parameters[1]));
        return null;
      case 12:
        return (T) ((Iterable<SNode>) getUniquelyNamedElements_id4qSf1u1TRfj(node));
      case 13:
        return (T) ((Boolean) containsText_idjpyKDg1onB(node, (String) parameters[0]));
      case 14:
        return (T) ((String) resultName_idjpyKDg1pW5(node));
      case 15:
        return (T) ((AbstractTreeViewNode) getTreeNode_id7NyyyjNtbn2(node, (String) parameters[0]));
      case 16:
        return (T) ((String) getIndexedText_id5wmuVxvF0fD(node));
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SAbstractConcept concept, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @NotNull
  @Override
  public List<SMethod<?>> getDeclaredMethods() {
    return BH_METHODS;
  }

  @NotNull
  @Override
  public SAbstractConcept getConcept() {
    return CONCEPT;
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept AbstractSection$8m = MetaAdapterFactory.getConcept(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7c6bdeL, "com.mbeddr.doc.structure.AbstractSection");
    /*package*/ static final SConcept Chapter$x0 = MetaAdapterFactory.getConcept(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x3a66aa886c197daaL, "com.mbeddr.doc.structure.Chapter");
    /*package*/ static final SConcept Document$4G = MetaAdapterFactory.getConcept(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7a1830L, "com.mbeddr.doc.structure.Document");
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
    /*package*/ static final SProperty text$dM9O = MetaAdapterFactory.getProperty(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7c6bdeL, 0x2e7fd03a4b7c6be1L, "text");
    /*package*/ static final SProperty chapterStartIndex$rjjE = MetaAdapterFactory.getProperty(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7a1830L, 0x4d5651056fcfcd6fL, "chapterStartIndex");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink contents$e7kB = MetaAdapterFactory.getContainmentLink(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x2e7fd03a4b7c6bf9L, 0x2e7fd03a4b7c6bfaL, "contents");
  }
}

package com.mbeddr.doc.intentions;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.openapi.editor.selection.Selection;
import de.slisson.mps.richtext.runtime.selection.RichtextSelection;
import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import de.slisson.mps.richtext.behavior.Text__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public class SurroundWithHelper {
  public static boolean isCorrectSelection(EditorContext ctx) {
    Selection sel = ctx.getEditorComponent().getSelectionManager().getSelection();
    RichtextSelection rtsel = RichtextSelection.create(sel);
    return rtsel != null;
  }
  public static SNode performSurrounding(EditorContext ctx, SConcept wrapWith) {
    RichtextSelection selection = RichtextSelection.create(ctx.getEditorComponent().getSelectionManager().getSelection());
    SNode formatted = SConceptOperations.createNewNode(SNodeOperations.asInstanceConcept(wrapWith));
    ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(formatted, LINKS.text$eJIi), LINKS.words$C8QZ)).addSequence(ListSequence.fromList(selection.replaceSelected(formatted)));
    Text__BehaviorDescriptor.ensureNormalized_id3mI$71cQ6Aw.invoke(SLinkOperations.getTarget(formatted, LINKS.text$eJIi));
    return formatted;
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink text$eJIi = MetaAdapterFactory.getContainmentLink(0x2374bc907e3741f1L, 0xa9c4c2e35194c36aL, 0x558f97d9712a5ce4L, 0x558f97d9712a5ce5L, "text");
    /*package*/ static final SContainmentLink words$C8QZ = MetaAdapterFactory.getContainmentLink(0x92d2ea165a424fdfL, 0xa676c7604efe3504L, 0x237c8da86a9e4e61L, 0x237c8da86a9e7aeeL, "words");
  }
}
